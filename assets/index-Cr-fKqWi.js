var uh=Object.defineProperty;var dh=(e,t,a)=>t in e?uh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var G=(e,t,a)=>dh(e,typeof t!="symbol"?t+"":t,a);import{g as fh,a as ic,c as mh,b as hh,R as ph,d as gh,e as yh}from"./rxdb-qAQF2UeV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function a(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(l){if(l.ep)return;l.ep=!0;const i=a(l);fetch(l.href,i)}})();var Xu={exports:{}},Ji={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vh=Symbol.for("react.transitional.element"),xh=Symbol.for("react.fragment");function Qu(e,t,a){var n=null;if(a!==void 0&&(n=""+a),t.key!==void 0&&(n=""+t.key),"key"in t){a={};for(var l in t)l!=="key"&&(a[l]=t[l])}else a=t;return t=a.ref,{$$typeof:vh,type:e,key:n,ref:t!==void 0?t:null,props:a}}Ji.Fragment=xh;Ji.jsx=Qu;Ji.jsxs=Qu;Xu.exports=Ji;var s=Xu.exports,Zu={exports:{}},H={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc=Symbol.for("react.transitional.element"),bh=Symbol.for("react.portal"),Sh=Symbol.for("react.fragment"),jh=Symbol.for("react.strict_mode"),Eh=Symbol.for("react.profiler"),Nh=Symbol.for("react.consumer"),Th=Symbol.for("react.context"),Ch=Symbol.for("react.forward_ref"),wh=Symbol.for("react.suspense"),_h=Symbol.for("react.memo"),Iu=Symbol.for("react.lazy"),ho=Symbol.iterator;function Ah(e){return e===null||typeof e!="object"?null:(e=ho&&e[ho]||e["@@iterator"],typeof e=="function"?e:null)}var Ku={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$u=Object.assign,Ju={};function vn(e,t,a){this.props=e,this.context=t,this.refs=Ju,this.updater=a||Ku}vn.prototype.isReactComponent={};vn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wu(){}Wu.prototype=vn.prototype;function rc(e,t,a){this.props=e,this.context=t,this.refs=Ju,this.updater=a||Ku}var cc=rc.prototype=new Wu;cc.constructor=rc;$u(cc,vn.prototype);cc.isPureReactComponent=!0;var po=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},Fu=Object.prototype.hasOwnProperty;function oc(e,t,a,n,l,i){return a=i.ref,{$$typeof:sc,type:e,key:t,ref:a!==void 0?a:null,props:i}}function Rh(e,t){return oc(e.type,t,void 0,void 0,void 0,e.props)}function uc(e){return typeof e=="object"&&e!==null&&e.$$typeof===sc}function Oh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var go=/\/+/g;function xs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Oh(""+e.key):t.toString(36)}function yo(){}function Dh(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(yo,yo):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ma(e,t,a,n,l){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(i){case"bigint":case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case sc:case bh:r=!0;break;case Iu:return r=e._init,Ma(r(e._payload),t,a,n,l)}}if(r)return l=l(e),r=n===""?"."+xs(e,0):n,po(l)?(a="",r!=null&&(a=r.replace(go,"$&/")+"/"),Ma(l,t,a,"",function(u){return u})):l!=null&&(uc(l)&&(l=Rh(l,a+(l.key==null||e&&e.key===l.key?"":(""+l.key).replace(go,"$&/")+"/")+r)),t.push(l)),1;r=0;var c=n===""?".":n+":";if(po(e))for(var o=0;o<e.length;o++)n=e[o],i=c+xs(n,o),r+=Ma(n,t,a,i,l);else if(o=Ah(e),typeof o=="function")for(e=o.call(e),o=0;!(n=e.next()).done;)n=n.value,i=c+xs(n,o++),r+=Ma(n,t,a,i,l);else if(i==="object"){if(typeof e.then=="function")return Ma(Dh(e),t,a,n,l);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function Pl(e,t,a){if(e==null)return e;var n=[],l=0;return Ma(e,n,"","",function(i){return t.call(a,i,l++)}),n}function zh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Uh(){}H.Children={map:Pl,forEach:function(e,t,a){Pl(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return Pl(e,function(){t++}),t},toArray:function(e){return Pl(e,function(t){return t})||[]},only:function(e){if(!uc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};H.Component=vn;H.Fragment=Sh;H.Profiler=Eh;H.PureComponent=rc;H.StrictMode=jh;H.Suspense=wh;H.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le;H.__COMPILER_RUNTIME={__proto__:null,c:function(e){return le.H.useMemoCache(e)}};H.cache=function(e){return function(){return e.apply(null,arguments)}};H.cloneElement=function(e,t,a){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var n=$u({},e.props),l=e.key,i=void 0;if(t!=null)for(r in t.ref!==void 0&&(i=void 0),t.key!==void 0&&(l=""+t.key),t)!Fu.call(t,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&t.ref===void 0||(n[r]=t[r]);var r=arguments.length-2;if(r===1)n.children=a;else if(1<r){for(var c=Array(r),o=0;o<r;o++)c[o]=arguments[o+2];n.children=c}return oc(e.type,l,void 0,void 0,i,n)};H.createContext=function(e){return e={$$typeof:Th,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:Nh,_context:e},e};H.createElement=function(e,t,a){var n,l={},i=null;if(t!=null)for(n in t.key!==void 0&&(i=""+t.key),t)Fu.call(t,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(l[n]=t[n]);var r=arguments.length-2;if(r===1)l.children=a;else if(1<r){for(var c=Array(r),o=0;o<r;o++)c[o]=arguments[o+2];l.children=c}if(e&&e.defaultProps)for(n in r=e.defaultProps,r)l[n]===void 0&&(l[n]=r[n]);return oc(e,i,void 0,void 0,null,l)};H.createRef=function(){return{current:null}};H.forwardRef=function(e){return{$$typeof:Ch,render:e}};H.isValidElement=uc;H.lazy=function(e){return{$$typeof:Iu,_payload:{_status:-1,_result:e},_init:zh}};H.memo=function(e,t){return{$$typeof:_h,type:e,compare:t===void 0?null:t}};H.startTransition=function(e){var t=le.T,a={};le.T=a;try{var n=e(),l=le.S;l!==null&&l(a,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(Uh,vo)}catch(i){vo(i)}finally{le.T=t}};H.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()};H.use=function(e){return le.H.use(e)};H.useActionState=function(e,t,a){return le.H.useActionState(e,t,a)};H.useCallback=function(e,t){return le.H.useCallback(e,t)};H.useContext=function(e){return le.H.useContext(e)};H.useDebugValue=function(){};H.useDeferredValue=function(e,t){return le.H.useDeferredValue(e,t)};H.useEffect=function(e,t,a){var n=le.H;if(typeof a=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)};H.useId=function(){return le.H.useId()};H.useImperativeHandle=function(e,t,a){return le.H.useImperativeHandle(e,t,a)};H.useInsertionEffect=function(e,t){return le.H.useInsertionEffect(e,t)};H.useLayoutEffect=function(e,t){return le.H.useLayoutEffect(e,t)};H.useMemo=function(e,t){return le.H.useMemo(e,t)};H.useOptimistic=function(e,t){return le.H.useOptimistic(e,t)};H.useReducer=function(e,t,a){return le.H.useReducer(e,t,a)};H.useRef=function(e){return le.H.useRef(e)};H.useState=function(e){return le.H.useState(e)};H.useSyncExternalStore=function(e,t,a){return le.H.useSyncExternalStore(e,t,a)};H.useTransition=function(){return le.H.useTransition()};H.version="19.1.1";Zu.exports=H;var v=Zu.exports;const Mh=fh(v);var ed={exports:{}},Wi={},td={exports:{}},ad={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,R){var O=z.length;z.push(R);e:for(;0<O;){var U=O-1>>>1,Y=z[U];if(0<l(Y,R))z[U]=R,z[O]=Y,O=U;else break e}}function a(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var R=z[0],O=z.pop();if(O!==R){z[0]=O;e:for(var U=0,Y=z.length,He=Y>>>1;U<He;){var Ke=2*(U+1)-1,fa=z[Ke],xt=Ke+1,ma=z[xt];if(0>l(fa,O))xt<Y&&0>l(ma,fa)?(z[U]=ma,z[xt]=O,U=xt):(z[U]=fa,z[Ke]=O,U=Ke);else if(xt<Y&&0>l(ma,O))z[U]=ma,z[xt]=O,U=xt;else break e}}return R}function l(z,R){var O=z.sortIndex-R.sortIndex;return O!==0?O:z.id-R.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var r=Date,c=r.now();e.unstable_now=function(){return r.now()-c}}var o=[],u=[],f=1,m=null,d=3,h=!1,b=!1,j=!1,S=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function x(z){for(var R=a(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=z)n(u),R.sortIndex=R.expirationTime,t(o,R);else break;R=a(u)}}function T(z){if(j=!1,x(z),!b)if(a(o)!==null)b=!0,N||(N=!0,D());else{var R=a(u);R!==null&&Z(T,R.startTime-z)}}var N=!1,C=-1,A=5,M=-1;function E(){return S?!0:!(e.unstable_now()-M<A)}function w(){if(S=!1,N){var z=e.unstable_now();M=z;var R=!0;try{e:{b=!1,j&&(j=!1,p(C),C=-1),h=!0;var O=d;try{t:{for(x(z),m=a(o);m!==null&&!(m.expirationTime>z&&E());){var U=m.callback;if(typeof U=="function"){m.callback=null,d=m.priorityLevel;var Y=U(m.expirationTime<=z);if(z=e.unstable_now(),typeof Y=="function"){m.callback=Y,x(z),R=!0;break t}m===a(o)&&n(o),x(z)}else n(o);m=a(o)}if(m!==null)R=!0;else{var He=a(u);He!==null&&Z(T,He.startTime-z),R=!1}}break e}finally{m=null,d=O,h=!1}R=void 0}}finally{R?D():N=!1}}}var D;if(typeof y=="function")D=function(){y(w)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,Q=L.port2;L.port1.onmessage=w,D=function(){Q.postMessage(null)}}else D=function(){g(w,0)};function Z(z,R){C=g(function(){z(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_next=function(z){switch(d){case 1:case 2:case 3:var R=3;break;default:R=d}var O=d;d=R;try{return z()}finally{d=O}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(z,R){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var O=d;d=z;try{return R()}finally{d=O}},e.unstable_scheduleCallback=function(z,R,O){var U=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?U+O:U):O=U,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=O+Y,z={id:f++,callback:R,priorityLevel:z,startTime:O,expirationTime:Y,sortIndex:-1},O>U?(z.sortIndex=O,t(u,z),a(o)===null&&z===a(u)&&(j?(p(C),C=-1):j=!0,Z(T,O-U))):(z.sortIndex=Y,t(o,z),b||h||(b=!0,N||(N=!0,D()))),z},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(z){var R=d;return function(){var O=d;d=R;try{return z.apply(this,arguments)}finally{d=O}}}})(ad);td.exports=ad;var Lh=td.exports,nd={exports:{}},De={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bh=v;function ld(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Pt(){}var Oe={d:{f:Pt,r:function(){throw Error(ld(522))},D:Pt,C:Pt,L:Pt,m:Pt,X:Pt,S:Pt,M:Pt},p:0,findDOMNode:null},qh=Symbol.for("react.portal");function Hh(e,t,a){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:a}}var Xn=Bh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Fi(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}De.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Oe;De.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(ld(299));return Hh(e,t,null,a)};De.flushSync=function(e){var t=Xn.T,a=Oe.p;try{if(Xn.T=null,Oe.p=2,e)return e()}finally{Xn.T=t,Oe.p=a,Oe.d.f()}};De.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Oe.d.C(e,t))};De.prefetchDNS=function(e){typeof e=="string"&&Oe.d.D(e)};De.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var a=t.as,n=Fi(a,t.crossOrigin),l=typeof t.integrity=="string"?t.integrity:void 0,i=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;a==="style"?Oe.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:n,integrity:l,fetchPriority:i}):a==="script"&&Oe.d.X(e,{crossOrigin:n,integrity:l,fetchPriority:i,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};De.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var a=Fi(t.as,t.crossOrigin);Oe.d.M(e,{crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Oe.d.M(e)};De.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var a=t.as,n=Fi(a,t.crossOrigin);Oe.d.L(e,a,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};De.preloadModule=function(e,t){if(typeof e=="string")if(t){var a=Fi(t.as,t.crossOrigin);Oe.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Oe.d.m(e)};De.requestFormReset=function(e){Oe.d.r(e)};De.unstable_batchedUpdates=function(e,t){return e(t)};De.useFormState=function(e,t,a){return Xn.H.useFormState(e,t,a)};De.useFormStatus=function(){return Xn.H.useHostTransitionStatus()};De.version="19.1.1";function id(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(id)}catch(e){console.error(e)}}id(),nd.exports=De;var Ph=nd.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ve=Lh,sd=v,Vh=Ph;function _(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function rd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sl(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function cd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xo(e){if(Sl(e)!==e)throw Error(_(188))}function kh(e){var t=e.alternate;if(!t){if(t=Sl(e),t===null)throw Error(_(188));return t!==e?null:e}for(var a=e,n=t;;){var l=a.return;if(l===null)break;var i=l.alternate;if(i===null){if(n=l.return,n!==null){a=n;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===a)return xo(l),e;if(i===n)return xo(l),t;i=i.sibling}throw Error(_(188))}if(a.return!==n.return)a=l,n=i;else{for(var r=!1,c=l.child;c;){if(c===a){r=!0,a=l,n=i;break}if(c===n){r=!0,n=l,a=i;break}c=c.sibling}if(!r){for(c=i.child;c;){if(c===a){r=!0,a=i,n=l;break}if(c===n){r=!0,n=i,a=l;break}c=c.sibling}if(!r)throw Error(_(189))}}if(a.alternate!==n)throw Error(_(190))}if(a.tag!==3)throw Error(_(188));return a.stateNode.current===a?e:t}function od(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=od(e),t!==null)return t;e=e.sibling}return null}var ae=Object.assign,Yh=Symbol.for("react.element"),Vl=Symbol.for("react.transitional.element"),Vn=Symbol.for("react.portal"),Ha=Symbol.for("react.fragment"),ud=Symbol.for("react.strict_mode"),rr=Symbol.for("react.profiler"),Gh=Symbol.for("react.provider"),dd=Symbol.for("react.consumer"),Nt=Symbol.for("react.context"),dc=Symbol.for("react.forward_ref"),cr=Symbol.for("react.suspense"),or=Symbol.for("react.suspense_list"),fc=Symbol.for("react.memo"),Yt=Symbol.for("react.lazy"),ur=Symbol.for("react.activity"),Xh=Symbol.for("react.memo_cache_sentinel"),bo=Symbol.iterator;function Rn(e){return e===null||typeof e!="object"?null:(e=bo&&e[bo]||e["@@iterator"],typeof e=="function"?e:null)}var Qh=Symbol.for("react.client.reference");function dr(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Qh?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ha:return"Fragment";case rr:return"Profiler";case ud:return"StrictMode";case cr:return"Suspense";case or:return"SuspenseList";case ur:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Vn:return"Portal";case Nt:return(e.displayName||"Context")+".Provider";case dd:return(e._context.displayName||"Context")+".Consumer";case dc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fc:return t=e.displayName||null,t!==null?t:dr(e.type)||"Memo";case Yt:t=e._payload,e=e._init;try{return dr(e(t))}catch{}}return null}var kn=Array.isArray,q=sd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=Vh.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,va={pending:!1,data:null,method:null,action:null},fr=[],Pa=-1;function gt(e){return{current:e}}function Ne(e){0>Pa||(e.current=fr[Pa],fr[Pa]=null,Pa--)}function ie(e,t){Pa++,fr[Pa]=e.current,e.current=t}var mt=gt(null),sl=gt(null),Ft=gt(null),xi=gt(null);function bi(e,t){switch(ie(Ft,t),ie(sl,e),ie(mt,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Tu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Tu(t),e=Am(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ne(mt),ie(mt,e)}function rn(){Ne(mt),Ne(sl),Ne(Ft)}function mr(e){e.memoizedState!==null&&ie(xi,e);var t=mt.current,a=Am(t,e.type);t!==a&&(ie(sl,e),ie(mt,a))}function Si(e){sl.current===e&&(Ne(mt),Ne(sl)),xi.current===e&&(Ne(xi),gl._currentValue=va)}var hr=Object.prototype.hasOwnProperty,mc=ve.unstable_scheduleCallback,bs=ve.unstable_cancelCallback,Zh=ve.unstable_shouldYield,Ih=ve.unstable_requestPaint,ht=ve.unstable_now,Kh=ve.unstable_getCurrentPriorityLevel,fd=ve.unstable_ImmediatePriority,md=ve.unstable_UserBlockingPriority,ji=ve.unstable_NormalPriority,$h=ve.unstable_LowPriority,hd=ve.unstable_IdlePriority,Jh=ve.log,Wh=ve.unstable_setDisableYieldValue,jl=null,Ge=null;function Kt(e){if(typeof Jh=="function"&&Wh(e),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(jl,e)}catch{}}var Xe=Math.clz32?Math.clz32:tp,Fh=Math.log,ep=Math.LN2;function tp(e){return e>>>=0,e===0?32:31-(Fh(e)/ep|0)|0}var kl=256,Yl=4194304;function pa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function es(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var l=0,i=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var c=n&134217727;return c!==0?(n=c&~i,n!==0?l=pa(n):(r&=c,r!==0?l=pa(r):a||(a=c&~e,a!==0&&(l=pa(a))))):(c=n&~i,c!==0?l=pa(c):r!==0?l=pa(r):a||(a=n&~e,a!==0&&(l=pa(a)))),l===0?0:t!==0&&t!==l&&!(t&i)&&(i=l&-l,a=t&-t,i>=a||i===32&&(a&4194048)!==0)?t:l}function El(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ap(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pd(){var e=kl;return kl<<=1,!(kl&4194048)&&(kl=256),e}function gd(){var e=Yl;return Yl<<=1,!(Yl&62914560)&&(Yl=4194304),e}function Ss(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Nl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function np(e,t,a,n,l,i){var r=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var c=e.entanglements,o=e.expirationTimes,u=e.hiddenUpdates;for(a=r&~a;0<a;){var f=31-Xe(a),m=1<<f;c[f]=0,o[f]=-1;var d=u[f];if(d!==null)for(u[f]=null,f=0;f<d.length;f++){var h=d[f];h!==null&&(h.lane&=-536870913)}a&=~m}n!==0&&yd(e,n,0),i!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=i&~(r&~t))}function yd(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-Xe(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&4194090}function vd(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-Xe(a),l=1<<n;l&t|e[n]&t&&(e[n]|=t),a&=~l}}function hc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function pc(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function xd(){var e=K.p;return e!==0?e:(e=window.event,e===void 0?32:Hm(e.type))}function lp(e,t){var a=K.p;try{return K.p=e,t()}finally{K.p=a}}var ua=Math.random().toString(36).slice(2),_e="__reactFiber$"+ua,Be="__reactProps$"+ua,xn="__reactContainer$"+ua,pr="__reactEvents$"+ua,ip="__reactListeners$"+ua,sp="__reactHandles$"+ua,So="__reactResources$"+ua,Tl="__reactMarker$"+ua;function gc(e){delete e[_e],delete e[Be],delete e[pr],delete e[ip],delete e[sp]}function Va(e){var t=e[_e];if(t)return t;for(var a=e.parentNode;a;){if(t=a[xn]||a[_e]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=_u(e);e!==null;){if(a=e[_e])return a;e=_u(e)}return t}e=a,a=e.parentNode}return null}function bn(e){if(e=e[_e]||e[xn]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Yn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(_(33))}function Ja(e){var t=e[So];return t||(t=e[So]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function je(e){e[Tl]=!0}var bd=new Set,Sd={};function Aa(e,t){cn(e,t),cn(e+"Capture",t)}function cn(e,t){for(Sd[e]=t,e=0;e<t.length;e++)bd.add(t[e])}var rp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jo={},Eo={};function cp(e){return hr.call(Eo,e)?!0:hr.call(jo,e)?!1:rp.test(e)?Eo[e]=!0:(jo[e]=!0,!1)}function ai(e,t,a){if(cp(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Gl(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function bt(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}var js,No;function La(e){if(js===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);js=t&&t[1]||"",No=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+js+e+No}var Es=!1;function Ns(e,t){if(!e||Es)return"";Es=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(h){var d=h}Reflect.construct(e,[],m)}else{try{m.call()}catch(h){d=h}e.call(m.prototype)}}else{try{throw Error()}catch(h){d=h}(m=e())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(h){if(h&&d&&typeof h.stack=="string")return[h.stack,d.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),r=i[0],c=i[1];if(r&&c){var o=r.split(`
`),u=c.split(`
`);for(l=n=0;n<o.length&&!o[n].includes("DetermineComponentFrameRoot");)n++;for(;l<u.length&&!u[l].includes("DetermineComponentFrameRoot");)l++;if(n===o.length||l===u.length)for(n=o.length-1,l=u.length-1;1<=n&&0<=l&&o[n]!==u[l];)l--;for(;1<=n&&0<=l;n--,l--)if(o[n]!==u[l]){if(n!==1||l!==1)do if(n--,l--,0>l||o[n]!==u[l]){var f=`
`+o[n].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=n&&0<=l);break}}}finally{Es=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?La(a):""}function op(e){switch(e.tag){case 26:case 27:case 5:return La(e.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 15:return Ns(e.type,!1);case 11:return Ns(e.type.render,!1);case 1:return Ns(e.type,!0);case 31:return La("Activity");default:return""}}function To(e){try{var t="";do t+=op(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function up(e){var t=jd(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var l=a.get,i=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(r){n=""+r,i.call(this,r)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ei(e){e._valueTracker||(e._valueTracker=up(e))}function Ed(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=jd(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function Ni(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var dp=/[\n"\\]/g;function et(e){return e.replace(dp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function gr(e,t,a,n,l,i,r,c){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Je(t)):e.value!==""+Je(t)&&(e.value=""+Je(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?yr(e,r,Je(t)):a!=null?yr(e,r,Je(a)):n!=null&&e.removeAttribute("value"),l==null&&i!=null&&(e.defaultChecked=!!i),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.name=""+Je(c):e.removeAttribute("name")}function Nd(e,t,a,n,l,i,r,c){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||a!=null){if(!(i!=="submit"&&i!=="reset"||t!=null))return;a=a!=null?""+Je(a):"",t=t!=null?""+Je(t):a,c||t===e.value||(e.value=t),e.defaultValue=t}n=n??l,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=c?e.checked:!!n,e.defaultChecked=!!n,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r)}function yr(e,t,a){t==="number"&&Ni(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Wa(e,t,a,n){if(e=e.options,t){t={};for(var l=0;l<a.length;l++)t["$"+a[l]]=!0;for(a=0;a<e.length;a++)l=t.hasOwnProperty("$"+e[a].value),e[a].selected!==l&&(e[a].selected=l),l&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Je(a),t=null,l=0;l<e.length;l++){if(e[l].value===a){e[l].selected=!0,n&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Td(e,t,a){if(t!=null&&(t=""+Je(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Je(a):""}function Cd(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(_(92));if(kn(n)){if(1<n.length)throw Error(_(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=Je(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n)}function on(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var fp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Co(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||fp.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function wd(e,t,a){if(t!=null&&typeof t!="object")throw Error(_(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var l in t)n=t[l],t.hasOwnProperty(l)&&a[l]!==n&&Co(e,l,n)}else for(var i in t)t.hasOwnProperty(i)&&Co(e,i,t[i])}function yc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ni(e){return hp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var vr=null;function vc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ka=null,Fa=null;function wo(e){var t=bn(e);if(t&&(e=t.stateNode)){var a=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(gr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+et(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var l=n[Be]||null;if(!l)throw Error(_(90));gr(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&Ed(n)}break e;case"textarea":Td(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Wa(e,!!a.multiple,t,!1)}}}var Ts=!1;function _d(e,t,a){if(Ts)return e(t,a);Ts=!0;try{var n=e(t);return n}finally{if(Ts=!1,(ka!==null||Fa!==null)&&(us(),ka&&(t=ka,e=Fa,Fa=ka=null,wo(t),e)))for(t=0;t<e.length;t++)wo(e[t])}}function rl(e,t){var a=e.stateNode;if(a===null)return null;var n=a[Be]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(_(231,t,typeof a));return a}var Dt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xr=!1;if(Dt)try{var On={};Object.defineProperty(On,"passive",{get:function(){xr=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{xr=!1}var $t=null,xc=null,li=null;function Ad(){if(li)return li;var e,t=xc,a=t.length,n,l="value"in $t?$t.value:$t.textContent,i=l.length;for(e=0;e<a&&t[e]===l[e];e++);var r=a-e;for(n=1;n<=r&&t[a-n]===l[i-n];n++);return li=l.slice(e,1<n?1-n:void 0)}function ii(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xl(){return!0}function _o(){return!1}function qe(e){function t(a,n,l,i,r){this._reactName=a,this._targetInst=l,this.type=n,this.nativeEvent=i,this.target=r,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(a=e[c],this[c]=a?a(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xl:_o,this.isPropagationStopped=_o,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),t}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ts=qe(Ra),Cl=ae({},Ra,{view:0,detail:0}),pp=qe(Cl),Cs,ws,Dn,as=ae({},Cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dn&&(Dn&&e.type==="mousemove"?(Cs=e.screenX-Dn.screenX,ws=e.screenY-Dn.screenY):ws=Cs=0,Dn=e),Cs)},movementY:function(e){return"movementY"in e?e.movementY:ws}}),Ao=qe(as),gp=ae({},as,{dataTransfer:0}),yp=qe(gp),vp=ae({},Cl,{relatedTarget:0}),_s=qe(vp),xp=ae({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),bp=qe(xp),Sp=ae({},Ra,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jp=qe(Sp),Ep=ae({},Ra,{data:0}),Ro=qe(Ep),Np={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Cp[e])?!!t[e]:!1}function bc(){return wp}var _p=ae({},Cl,{key:function(e){if(e.key){var t=Np[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Tp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bc,charCode:function(e){return e.type==="keypress"?ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ap=qe(_p),Rp=ae({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oo=qe(Rp),Op=ae({},Cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bc}),Dp=qe(Op),zp=ae({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),Up=qe(zp),Mp=ae({},as,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lp=qe(Mp),Bp=ae({},Ra,{newState:0,oldState:0}),qp=qe(Bp),Hp=[9,13,27,32],Sc=Dt&&"CompositionEvent"in window,Qn=null;Dt&&"documentMode"in document&&(Qn=document.documentMode);var Pp=Dt&&"TextEvent"in window&&!Qn,Rd=Dt&&(!Sc||Qn&&8<Qn&&11>=Qn),Do=" ",zo=!1;function Od(e,t){switch(e){case"keyup":return Hp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ya=!1;function Vp(e,t){switch(e){case"compositionend":return Dd(t);case"keypress":return t.which!==32?null:(zo=!0,Do);case"textInput":return e=t.data,e===Do&&zo?null:e;default:return null}}function kp(e,t){if(Ya)return e==="compositionend"||!Sc&&Od(e,t)?(e=Ad(),li=xc=$t=null,Ya=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rd&&t.locale!=="ko"?null:t.data;default:return null}}var Yp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Yp[e.type]:t==="textarea"}function zd(e,t,a,n){ka?Fa?Fa.push(n):Fa=[n]:ka=n,t=ki(t,"onChange"),0<t.length&&(a=new ts("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var Zn=null,cl=null;function Gp(e){Cm(e,0)}function ns(e){var t=Yn(e);if(Ed(t))return e}function Mo(e,t){if(e==="change")return t}var Ud=!1;if(Dt){var As;if(Dt){var Rs="oninput"in document;if(!Rs){var Lo=document.createElement("div");Lo.setAttribute("oninput","return;"),Rs=typeof Lo.oninput=="function"}As=Rs}else As=!1;Ud=As&&(!document.documentMode||9<document.documentMode)}function Bo(){Zn&&(Zn.detachEvent("onpropertychange",Md),cl=Zn=null)}function Md(e){if(e.propertyName==="value"&&ns(cl)){var t=[];zd(t,cl,e,vc(e)),_d(Gp,t)}}function Xp(e,t,a){e==="focusin"?(Bo(),Zn=t,cl=a,Zn.attachEvent("onpropertychange",Md)):e==="focusout"&&Bo()}function Qp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ns(cl)}function Zp(e,t){if(e==="click")return ns(t)}function Ip(e,t){if(e==="input"||e==="change")return ns(t)}function Kp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ie=typeof Object.is=="function"?Object.is:Kp;function ol(e,t){if(Ie(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var l=a[n];if(!hr.call(t,l)||!Ie(e[l],t[l]))return!1}return!0}function qo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ho(e,t){var a=qo(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=qo(a)}}function Ld(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ld(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ni(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ni(e.document)}return t}function jc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var $p=Dt&&"documentMode"in document&&11>=document.documentMode,Ga=null,br=null,In=null,Sr=!1;function Po(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sr||Ga==null||Ga!==Ni(n)||(n=Ga,"selectionStart"in n&&jc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),In&&ol(In,n)||(In=n,n=ki(br,"onSelect"),0<n.length&&(t=new ts("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=Ga)))}function ha(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Xa={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},Os={},qd={};Dt&&(qd=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function Oa(e){if(Os[e])return Os[e];if(!Xa[e])return e;var t=Xa[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in qd)return Os[e]=t[a];return e}var Hd=Oa("animationend"),Pd=Oa("animationiteration"),Vd=Oa("animationstart"),Jp=Oa("transitionrun"),Wp=Oa("transitionstart"),Fp=Oa("transitioncancel"),kd=Oa("transitionend"),Yd=new Map,jr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jr.push("scrollEnd");function ct(e,t){Yd.set(e,t),Aa(t,[e])}var Vo=new WeakMap;function tt(e,t){if(typeof e=="object"&&e!==null){var a=Vo.get(e);return a!==void 0?a:(t={value:e,source:t,stack:To(t)},Vo.set(e,t),t)}return{value:e,source:t,stack:To(t)}}var $e=[],Qa=0,Ec=0;function ls(){for(var e=Qa,t=Ec=Qa=0;t<e;){var a=$e[t];$e[t++]=null;var n=$e[t];$e[t++]=null;var l=$e[t];$e[t++]=null;var i=$e[t];if($e[t++]=null,n!==null&&l!==null){var r=n.pending;r===null?l.next=l:(l.next=r.next,r.next=l),n.pending=l}i!==0&&Gd(a,l,i)}}function is(e,t,a,n){$e[Qa++]=e,$e[Qa++]=t,$e[Qa++]=a,$e[Qa++]=n,Ec|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Nc(e,t,a,n){return is(e,t,a,n),Ti(e)}function Sn(e,t){return is(e,null,null,t),Ti(e)}function Gd(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var l=!1,i=e.return;i!==null;)i.childLanes|=a,n=i.alternate,n!==null&&(n.childLanes|=a),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(l=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,l&&t!==null&&(l=31-Xe(a),e=i.hiddenUpdates,n=e[l],n===null?e[l]=[t]:n.push(t),t.lane=a|536870912),i):null}function Ti(e){if(50<ll)throw ll=0,Yr=null,Error(_(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Za={};function eg(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(e,t,a,n){return new eg(e,t,a,n)}function Tc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function At(e,t){var a=e.alternate;return a===null?(a=Ye(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Xd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function si(e,t,a,n,l,i){var r=0;if(n=e,typeof e=="function")Tc(e)&&(r=1);else if(typeof e=="string")r=ay(e,a,mt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ur:return e=Ye(31,a,t,l),e.elementType=ur,e.lanes=i,e;case Ha:return xa(a.children,l,i,t);case ud:r=8,l|=24;break;case rr:return e=Ye(12,a,t,l|2),e.elementType=rr,e.lanes=i,e;case cr:return e=Ye(13,a,t,l),e.elementType=cr,e.lanes=i,e;case or:return e=Ye(19,a,t,l),e.elementType=or,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gh:case Nt:r=10;break e;case dd:r=9;break e;case dc:r=11;break e;case fc:r=14;break e;case Yt:r=16,n=null;break e}r=29,a=Error(_(130,e===null?"null":typeof e,"")),n=null}return t=Ye(r,a,t,l),t.elementType=e,t.type=n,t.lanes=i,t}function xa(e,t,a,n){return e=Ye(7,e,n,t),e.lanes=a,e}function Ds(e,t,a){return e=Ye(6,e,null,t),e.lanes=a,e}function zs(e,t,a){return t=Ye(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ia=[],Ka=0,Ci=null,wi=0,We=[],Fe=0,ba=null,Tt=1,Ct="";function ga(e,t){Ia[Ka++]=wi,Ia[Ka++]=Ci,Ci=e,wi=t}function Qd(e,t,a){We[Fe++]=Tt,We[Fe++]=Ct,We[Fe++]=ba,ba=e;var n=Tt;e=Ct;var l=32-Xe(n)-1;n&=~(1<<l),a+=1;var i=32-Xe(t)+l;if(30<i){var r=l-l%5;i=(n&(1<<r)-1).toString(32),n>>=r,l-=r,Tt=1<<32-Xe(t)+l|a<<l|n,Ct=i+e}else Tt=1<<i|a<<l|n,Ct=e}function Cc(e){e.return!==null&&(ga(e,1),Qd(e,1,0))}function wc(e){for(;e===Ci;)Ci=Ia[--Ka],Ia[Ka]=null,wi=Ia[--Ka],Ia[Ka]=null;for(;e===ba;)ba=We[--Fe],We[Fe]=null,Ct=We[--Fe],We[Fe]=null,Tt=We[--Fe],We[Fe]=null}var Re=null,ce=null,I=!1,Sa=null,dt=!1,Er=Error(_(519));function Ta(e){var t=Error(_(418,""));throw ul(tt(t,e)),Er}function ko(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[_e]=e,t[Be]=n,a){case"dialog":V("cancel",t),V("close",t);break;case"iframe":case"object":case"embed":V("load",t);break;case"video":case"audio":for(a=0;a<ml.length;a++)V(ml[a],t);break;case"source":V("error",t);break;case"img":case"image":case"link":V("error",t),V("load",t);break;case"details":V("toggle",t);break;case"input":V("invalid",t),Nd(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),Ei(t);break;case"select":V("invalid",t);break;case"textarea":V("invalid",t),Cd(t,n.value,n.defaultValue,n.children),Ei(t)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||_m(t.textContent,a)?(n.popover!=null&&(V("beforetoggle",t),V("toggle",t)),n.onScroll!=null&&V("scroll",t),n.onScrollEnd!=null&&V("scrollend",t),n.onClick!=null&&(t.onclick=ms),t=!0):t=!1,t||Ta(e)}function Yo(e){for(Re=e.return;Re;)switch(Re.tag){case 5:case 13:dt=!1;return;case 27:case 3:dt=!0;return;default:Re=Re.return}}function zn(e){if(e!==Re)return!1;if(!I)return Yo(e),I=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Kr(e.type,e.memoizedProps)),a=!a),a&&ce&&Ta(e),Yo(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){ce=st(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}ce=null}}else t===27?(t=ce,da(e.type)?(e=Wr,Wr=null,ce=e):ce=t):ce=Re?st(e.stateNode.nextSibling):null;return!0}function wl(){ce=Re=null,I=!1}function Go(){var e=Sa;return e!==null&&(Le===null?Le=e:Le.push.apply(Le,e),Sa=null),e}function ul(e){Sa===null?Sa=[e]:Sa.push(e)}var Nr=gt(null),Da=null,wt=null;function Xt(e,t,a){ie(Nr,t._currentValue),t._currentValue=a}function Rt(e){e._currentValue=Nr.current,Ne(Nr)}function Tr(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function Cr(e,t,a,n){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var i=l.dependencies;if(i!==null){var r=l.child;i=i.firstContext;e:for(;i!==null;){var c=i;i=l;for(var o=0;o<t.length;o++)if(c.context===t[o]){i.lanes|=a,c=i.alternate,c!==null&&(c.lanes|=a),Tr(i.return,a,e),n||(r=null);break e}i=c.next}}else if(l.tag===18){if(r=l.return,r===null)throw Error(_(341));r.lanes|=a,i=r.alternate,i!==null&&(i.lanes|=a),Tr(r,a,e),r=null}else r=l.child;if(r!==null)r.return=l;else for(r=l;r!==null;){if(r===e){r=null;break}if(l=r.sibling,l!==null){l.return=r.return,r=l;break}r=r.return}l=r}}function _l(e,t,a,n){e=null;for(var l=t,i=!1;l!==null;){if(!i){if(l.flags&524288)i=!0;else if(l.flags&262144)break}if(l.tag===10){var r=l.alternate;if(r===null)throw Error(_(387));if(r=r.memoizedProps,r!==null){var c=l.type;Ie(l.pendingProps.value,r.value)||(e!==null?e.push(c):e=[c])}}else if(l===xi.current){if(r=l.alternate,r===null)throw Error(_(387));r.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(gl):e=[gl])}l=l.return}e!==null&&Cr(t,e,a,n),t.flags|=262144}function _i(e){for(e=e.firstContext;e!==null;){if(!Ie(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ca(e){Da=e,wt=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ae(e){return Zd(Da,e)}function Ql(e,t){return Da===null&&Ca(e),Zd(e,t)}function Zd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},wt===null){if(e===null)throw Error(_(308));wt=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else wt=wt.next=t;return a}var tg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},ag=ve.unstable_scheduleCallback,ng=ve.unstable_NormalPriority,ge={$$typeof:Nt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _c(){return{controller:new tg,data:new Map,refCount:0}}function Al(e){e.refCount--,e.refCount===0&&ag(ng,function(){e.controller.abort()})}var Kn=null,wr=0,un=0,en=null;function lg(e,t){if(Kn===null){var a=Kn=[];wr=0,un=Jc(),en={status:"pending",value:void 0,then:function(n){a.push(n)}}}return wr++,t.then(Xo,Xo),t}function Xo(){if(--wr===0&&Kn!==null){en!==null&&(en.status="fulfilled");var e=Kn;Kn=null,un=0,en=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ig(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var l=0;l<a.length;l++)(0,a[l])(t)},function(l){for(n.status="rejected",n.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),n}var Qo=q.S;q.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&lg(e,t),Qo!==null&&Qo(e,t)};var ja=gt(null);function Ac(){var e=ja.current;return e!==null?e:te.pooledCache}function ri(e,t){t===null?ie(ja,ja.current):ie(ja,t.pool)}function Id(){var e=Ac();return e===null?null:{parent:ge._currentValue,pool:e}}var Rl=Error(_(460)),Kd=Error(_(474)),ss=Error(_(542)),_r={then:function(){}};function Zo(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Zl(){}function $d(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Zl,Zl),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ko(e),e;default:if(typeof t.status=="string")t.then(Zl,Zl);else{if(e=te,e!==null&&100<e.shellSuspendCounter)throw Error(_(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=n}},function(n){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ko(e),e}throw $n=t,Rl}}var $n=null;function Io(){if($n===null)throw Error(_(459));var e=$n;return $n=null,e}function Ko(e){if(e===Rl||e===ss)throw Error(_(483))}var Gt=!1;function Rc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ar(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ea(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ta(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,J&2){var l=n.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),n.pending=t,t=Ti(e),Gd(e,null,a),t}return is(e,n,t,a),Ti(e)}function Jn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,vd(e,a)}}function Us(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var l=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var r={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};i===null?l=i=r:i=i.next=r,a=a.next}while(a!==null);i===null?l=i=t:i=i.next=t}else l=i=t;a={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Rr=!1;function Wn(){if(Rr){var e=en;if(e!==null)throw e}}function Fn(e,t,a,n){Rr=!1;var l=e.updateQueue;Gt=!1;var i=l.firstBaseUpdate,r=l.lastBaseUpdate,c=l.shared.pending;if(c!==null){l.shared.pending=null;var o=c,u=o.next;o.next=null,r===null?i=u:r.next=u,r=o;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==r&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=o))}if(i!==null){var m=l.baseState;r=0,f=u=o=null,c=i;do{var d=c.lane&-536870913,h=d!==c.lane;if(h?(X&d)===d:(n&d)===d){d!==0&&d===un&&(Rr=!0),f!==null&&(f=f.next={lane:0,tag:c.tag,payload:c.payload,callback:null,next:null});e:{var b=e,j=c;d=t;var S=a;switch(j.tag){case 1:if(b=j.payload,typeof b=="function"){m=b.call(S,m,d);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=j.payload,d=typeof b=="function"?b.call(S,m,d):b,d==null)break e;m=ae({},m,d);break e;case 2:Gt=!0}}d=c.callback,d!==null&&(e.flags|=64,h&&(e.flags|=8192),h=l.callbacks,h===null?l.callbacks=[d]:h.push(d))}else h={lane:d,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=h,o=m):f=f.next=h,r|=d;if(c=c.next,c===null){if(c=l.shared.pending,c===null)break;h=c,c=h.next,h.next=null,l.lastBaseUpdate=h,l.shared.pending=null}}while(!0);f===null&&(o=m),l.baseState=o,l.firstBaseUpdate=u,l.lastBaseUpdate=f,i===null&&(l.shared.lanes=0),oa|=r,e.lanes=r,e.memoizedState=m}}function Jd(e,t){if(typeof e!="function")throw Error(_(191,e));e.call(t)}function Wd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Jd(a[e],t)}var dn=gt(null),Ai=gt(0);function $o(e,t){e=Mt,ie(Ai,e),ie(dn,t),Mt=e|t.baseLanes}function Or(){ie(Ai,Mt),ie(dn,dn.current)}function Oc(){Mt=Ai.current,Ne(dn),Ne(Ai)}var ra=0,P=null,F=null,me=null,Ri=!1,tn=!1,wa=!1,Oi=0,dl=0,an=null,sg=0;function ue(){throw Error(_(321))}function Dc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Ie(e[a],t[a]))return!1;return!0}function zc(e,t,a,n,l,i){return ra=i,P=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q.H=e===null||e.memoizedState===null?Rf:Of,wa=!1,i=a(n,l),wa=!1,tn&&(i=ef(t,a,n,l)),Fd(e),i}function Fd(e){q.H=Di;var t=F!==null&&F.next!==null;if(ra=0,me=F=P=null,Ri=!1,dl=0,an=null,t)throw Error(_(300));e===null||Ee||(e=e.dependencies,e!==null&&_i(e)&&(Ee=!0))}function ef(e,t,a,n){P=e;var l=0;do{if(tn&&(an=null),dl=0,tn=!1,25<=l)throw Error(_(301));if(l+=1,me=F=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}q.H=mg,i=t(a,n)}while(tn);return i}function rg(){var e=q.H,t=e.useState()[0];return t=typeof t.then=="function"?Ol(t):t,e=e.useState()[0],(F!==null?F.memoizedState:null)!==e&&(P.flags|=1024),t}function Uc(){var e=Oi!==0;return Oi=0,e}function Mc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Lc(e){if(Ri){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ri=!1}ra=0,me=F=P=null,tn=!1,dl=Oi=0,an=null}function Ue(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return me===null?P.memoizedState=me=e:me=me.next=e,me}function pe(){if(F===null){var e=P.alternate;e=e!==null?e.memoizedState:null}else e=F.next;var t=me===null?P.memoizedState:me.next;if(t!==null)me=t,F=e;else{if(e===null)throw P.alternate===null?Error(_(467)):Error(_(310));F=e,e={memoizedState:F.memoizedState,baseState:F.baseState,baseQueue:F.baseQueue,queue:F.queue,next:null},me===null?P.memoizedState=me=e:me=me.next=e}return me}function Bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(e){var t=dl;return dl+=1,an===null&&(an=[]),e=$d(an,e,t),t=P,(me===null?t.memoizedState:me.next)===null&&(t=t.alternate,q.H=t===null||t.memoizedState===null?Rf:Of),e}function rs(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ol(e);if(e.$$typeof===Nt)return Ae(e)}throw Error(_(438,String(e)))}function qc(e){var t=null,a=P.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=P.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Bc(),P.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=Xh;return t.index++,a}function zt(e,t){return typeof t=="function"?t(e):t}function ci(e){var t=pe();return Hc(t,F,e)}function Hc(e,t,a){var n=e.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=a;var l=e.baseQueue,i=n.pending;if(i!==null){if(l!==null){var r=l.next;l.next=i.next,i.next=r}t.baseQueue=l=i,n.pending=null}if(i=e.baseState,l===null)e.memoizedState=i;else{t=l.next;var c=r=null,o=null,u=t,f=!1;do{var m=u.lane&-536870913;if(m!==u.lane?(X&m)===m:(ra&m)===m){var d=u.revertLane;if(d===0)o!==null&&(o=o.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),m===un&&(f=!0);else if((ra&d)===d){u=u.next,d===un&&(f=!0);continue}else m={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(c=o=m,r=i):o=o.next=m,P.lanes|=d,oa|=d;m=u.action,wa&&a(i,m),i=u.hasEagerState?u.eagerState:a(i,m)}else d={lane:m,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(c=o=d,r=i):o=o.next=d,P.lanes|=m,oa|=m;u=u.next}while(u!==null&&u!==t);if(o===null?r=i:o.next=c,!Ie(i,e.memoizedState)&&(Ee=!0,f&&(a=en,a!==null)))throw a;e.memoizedState=i,e.baseState=r,e.baseQueue=o,n.lastRenderedState=i}return l===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Ms(e){var t=pe(),a=t.queue;if(a===null)throw Error(_(311));a.lastRenderedReducer=e;var n=a.dispatch,l=a.pending,i=t.memoizedState;if(l!==null){a.pending=null;var r=l=l.next;do i=e(i,r.action),r=r.next;while(r!==l);Ie(i,t.memoizedState)||(Ee=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),a.lastRenderedState=i}return[i,n]}function tf(e,t,a){var n=P,l=pe(),i=I;if(i){if(a===void 0)throw Error(_(407));a=a()}else a=t();var r=!Ie((F||l).memoizedState,a);r&&(l.memoizedState=a,Ee=!0),l=l.queue;var c=lf.bind(null,n,l,e);if(Dl(2048,8,c,[e]),l.getSnapshot!==t||r||me!==null&&me.memoizedState.tag&1){if(n.flags|=2048,fn(9,cs(),nf.bind(null,n,l,a,t),null),te===null)throw Error(_(349));i||ra&124||af(n,t,a)}return a}function af(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=P.updateQueue,t===null?(t=Bc(),P.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function nf(e,t,a,n){t.value=a,t.getSnapshot=n,sf(t)&&rf(e)}function lf(e,t,a){return a(function(){sf(t)&&rf(e)})}function sf(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Ie(e,a)}catch{return!0}}function rf(e){var t=Sn(e,2);t!==null&&Ze(t,e,2)}function Dr(e){var t=Ue();if(typeof e=="function"){var a=e;if(e=a(),wa){Kt(!0);try{a()}finally{Kt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zt,lastRenderedState:e},t}function cf(e,t,a,n){return e.baseState=a,Hc(e,F,typeof n=="function"?n:zt)}function cg(e,t,a,n,l){if(os(e))throw Error(_(485));if(e=t.action,e!==null){var i={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){i.listeners.push(r)}};q.T!==null?a(!0):i.isTransition=!1,n(i),a=t.pending,a===null?(i.next=t.pending=i,of(t,i)):(i.next=a.next,t.pending=a.next=i)}}function of(e,t){var a=t.action,n=t.payload,l=e.state;if(t.isTransition){var i=q.T,r={};q.T=r;try{var c=a(l,n),o=q.S;o!==null&&o(r,c),Jo(e,t,c)}catch(u){zr(e,t,u)}finally{q.T=i}}else try{i=a(l,n),Jo(e,t,i)}catch(u){zr(e,t,u)}}function Jo(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Wo(e,t,n)},function(n){return zr(e,t,n)}):Wo(e,t,a)}function Wo(e,t,a){t.status="fulfilled",t.value=a,uf(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,of(e,a)))}function zr(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,uf(t),t=t.next;while(t!==n)}e.action=null}function uf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function df(e,t){return t}function Fo(e,t){if(I){var a=te.formState;if(a!==null){e:{var n=P;if(I){if(ce){t:{for(var l=ce,i=dt;l.nodeType!==8;){if(!i){l=null;break t}if(l=st(l.nextSibling),l===null){l=null;break t}}i=l.data,l=i==="F!"||i==="F"?l:null}if(l){ce=st(l.nextSibling),n=l.data==="F!";break e}}Ta(n)}n=!1}n&&(t=a[0])}}return a=Ue(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:df,lastRenderedState:t},a.queue=n,a=wf.bind(null,P,n),n.dispatch=a,n=Dr(!1),i=Yc.bind(null,P,!1,n.queue),n=Ue(),l={state:t,dispatch:null,action:e,pending:null},n.queue=l,a=cg.bind(null,P,l,i,a),l.dispatch=a,n.memoizedState=e,[t,a,!1]}function eu(e){var t=pe();return ff(t,F,e)}function ff(e,t,a){if(t=Hc(e,t,df)[0],e=ci(zt)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Ol(t)}catch(r){throw r===Rl?ss:r}else n=t;t=pe();var l=t.queue,i=l.dispatch;return a!==t.memoizedState&&(P.flags|=2048,fn(9,cs(),og.bind(null,l,a),null)),[n,i,e]}function og(e,t){e.action=t}function tu(e){var t=pe(),a=F;if(a!==null)return ff(t,a,e);pe(),t=t.memoizedState,a=pe();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function fn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=P.updateQueue,t===null&&(t=Bc(),P.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function cs(){return{destroy:void 0,resource:void 0}}function mf(){return pe().memoizedState}function oi(e,t,a,n){var l=Ue();n=n===void 0?null:n,P.flags|=e,l.memoizedState=fn(1|t,cs(),a,n)}function Dl(e,t,a,n){var l=pe();n=n===void 0?null:n;var i=l.memoizedState.inst;F!==null&&n!==null&&Dc(n,F.memoizedState.deps)?l.memoizedState=fn(t,i,a,n):(P.flags|=e,l.memoizedState=fn(1|t,i,a,n))}function au(e,t){oi(8390656,8,e,t)}function hf(e,t){Dl(2048,8,e,t)}function pf(e,t){return Dl(4,2,e,t)}function gf(e,t){return Dl(4,4,e,t)}function yf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vf(e,t,a){a=a!=null?a.concat([e]):null,Dl(4,4,yf.bind(null,t,e),a)}function Pc(){}function xf(e,t){var a=pe();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&Dc(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function bf(e,t){var a=pe();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&Dc(t,n[1]))return n[0];if(n=e(),wa){Kt(!0);try{e()}finally{Kt(!1)}}return a.memoizedState=[n,t],n}function Vc(e,t,a){return a===void 0||ra&1073741824?e.memoizedState=t:(e.memoizedState=a,e=um(),P.lanes|=e,oa|=e,a)}function Sf(e,t,a,n){return Ie(a,t)?a:dn.current!==null?(e=Vc(e,a,n),Ie(e,t)||(Ee=!0),e):ra&42?(e=um(),P.lanes|=e,oa|=e,t):(Ee=!0,e.memoizedState=a)}function jf(e,t,a,n,l){var i=K.p;K.p=i!==0&&8>i?i:8;var r=q.T,c={};q.T=c,Yc(e,!1,t,a);try{var o=l(),u=q.S;if(u!==null&&u(c,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var f=ig(o,n);el(e,t,f,Qe(e))}else el(e,t,n,Qe(e))}catch(m){el(e,t,{then:function(){},status:"rejected",reason:m},Qe())}finally{K.p=i,q.T=r}}function ug(){}function Ur(e,t,a,n){if(e.tag!==5)throw Error(_(476));var l=Ef(e).queue;jf(e,l,t,va,a===null?ug:function(){return Nf(e),a(n)})}function Ef(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:va,baseState:va,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zt,lastRenderedState:va},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zt,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Nf(e){var t=Ef(e).next.queue;el(e,t,{},Qe())}function kc(){return Ae(gl)}function Tf(){return pe().memoizedState}function Cf(){return pe().memoizedState}function dg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Qe();e=ea(a);var n=ta(t,e,a);n!==null&&(Ze(n,t,a),Jn(n,t,a)),t={cache:_c()},e.payload=t;return}t=t.return}}function fg(e,t,a){var n=Qe();a={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},os(e)?_f(t,a):(a=Nc(e,t,a,n),a!==null&&(Ze(a,e,n),Af(a,t,n)))}function wf(e,t,a){var n=Qe();el(e,t,a,n)}function el(e,t,a,n){var l={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(os(e))_f(t,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var r=t.lastRenderedState,c=i(r,a);if(l.hasEagerState=!0,l.eagerState=c,Ie(c,r))return is(e,t,l,0),te===null&&ls(),!1}catch{}finally{}if(a=Nc(e,t,l,n),a!==null)return Ze(a,e,n),Af(a,t,n),!0}return!1}function Yc(e,t,a,n){if(n={lane:2,revertLane:Jc(),action:n,hasEagerState:!1,eagerState:null,next:null},os(e)){if(t)throw Error(_(479))}else t=Nc(e,a,n,2),t!==null&&Ze(t,e,2)}function os(e){var t=e.alternate;return e===P||t!==null&&t===P}function _f(e,t){tn=Ri=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Af(e,t,a){if(a&4194048){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,vd(e,a)}}var Di={readContext:Ae,use:rs,useCallback:ue,useContext:ue,useEffect:ue,useImperativeHandle:ue,useLayoutEffect:ue,useInsertionEffect:ue,useMemo:ue,useReducer:ue,useRef:ue,useState:ue,useDebugValue:ue,useDeferredValue:ue,useTransition:ue,useSyncExternalStore:ue,useId:ue,useHostTransitionStatus:ue,useFormState:ue,useActionState:ue,useOptimistic:ue,useMemoCache:ue,useCacheRefresh:ue},Rf={readContext:Ae,use:rs,useCallback:function(e,t){return Ue().memoizedState=[e,t===void 0?null:t],e},useContext:Ae,useEffect:au,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,oi(4194308,4,yf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return oi(4194308,4,e,t)},useInsertionEffect:function(e,t){oi(4,2,e,t)},useMemo:function(e,t){var a=Ue();t=t===void 0?null:t;var n=e();if(wa){Kt(!0);try{e()}finally{Kt(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=Ue();if(a!==void 0){var l=a(t);if(wa){Kt(!0);try{a(t)}finally{Kt(!1)}}}else l=t;return n.memoizedState=n.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},n.queue=e,e=e.dispatch=fg.bind(null,P,e),[n.memoizedState,e]},useRef:function(e){var t=Ue();return e={current:e},t.memoizedState=e},useState:function(e){e=Dr(e);var t=e.queue,a=wf.bind(null,P,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Pc,useDeferredValue:function(e,t){var a=Ue();return Vc(a,e,t)},useTransition:function(){var e=Dr(!1);return e=jf.bind(null,P,e.queue,!0,!1),Ue().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=P,l=Ue();if(I){if(a===void 0)throw Error(_(407));a=a()}else{if(a=t(),te===null)throw Error(_(349));X&124||af(n,t,a)}l.memoizedState=a;var i={value:a,getSnapshot:t};return l.queue=i,au(lf.bind(null,n,i,e),[e]),n.flags|=2048,fn(9,cs(),nf.bind(null,n,i,a,t),null),a},useId:function(){var e=Ue(),t=te.identifierPrefix;if(I){var a=Ct,n=Tt;a=(n&~(1<<32-Xe(n)-1)).toString(32)+a,t="«"+t+"R"+a,a=Oi++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=sg++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:kc,useFormState:Fo,useActionState:Fo,useOptimistic:function(e){var t=Ue();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Yc.bind(null,P,!0,a),a.dispatch=t,[e,t]},useMemoCache:qc,useCacheRefresh:function(){return Ue().memoizedState=dg.bind(null,P)}},Of={readContext:Ae,use:rs,useCallback:xf,useContext:Ae,useEffect:hf,useImperativeHandle:vf,useInsertionEffect:pf,useLayoutEffect:gf,useMemo:bf,useReducer:ci,useRef:mf,useState:function(){return ci(zt)},useDebugValue:Pc,useDeferredValue:function(e,t){var a=pe();return Sf(a,F.memoizedState,e,t)},useTransition:function(){var e=ci(zt)[0],t=pe().memoizedState;return[typeof e=="boolean"?e:Ol(e),t]},useSyncExternalStore:tf,useId:Tf,useHostTransitionStatus:kc,useFormState:eu,useActionState:eu,useOptimistic:function(e,t){var a=pe();return cf(a,F,e,t)},useMemoCache:qc,useCacheRefresh:Cf},mg={readContext:Ae,use:rs,useCallback:xf,useContext:Ae,useEffect:hf,useImperativeHandle:vf,useInsertionEffect:pf,useLayoutEffect:gf,useMemo:bf,useReducer:Ms,useRef:mf,useState:function(){return Ms(zt)},useDebugValue:Pc,useDeferredValue:function(e,t){var a=pe();return F===null?Vc(a,e,t):Sf(a,F.memoizedState,e,t)},useTransition:function(){var e=Ms(zt)[0],t=pe().memoizedState;return[typeof e=="boolean"?e:Ol(e),t]},useSyncExternalStore:tf,useId:Tf,useHostTransitionStatus:kc,useFormState:tu,useActionState:tu,useOptimistic:function(e,t){var a=pe();return F!==null?cf(a,F,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:qc,useCacheRefresh:Cf},nn=null,fl=0;function Il(e){var t=fl;return fl+=1,nn===null&&(nn=[]),$d(nn,e,t)}function Un(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Kl(e,t){throw t.$$typeof===Yh?Error(_(525)):(e=Object.prototype.toString.call(t),Error(_(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function nu(e){var t=e._init;return t(e._payload)}function Df(e){function t(g,p){if(e){var y=g.deletions;y===null?(g.deletions=[p],g.flags|=16):y.push(p)}}function a(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g){for(var p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function l(g,p){return g=At(g,p),g.index=0,g.sibling=null,g}function i(g,p,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<p?(g.flags|=67108866,p):y):(g.flags|=67108866,p)):(g.flags|=1048576,p)}function r(g){return e&&g.alternate===null&&(g.flags|=67108866),g}function c(g,p,y,x){return p===null||p.tag!==6?(p=Ds(y,g.mode,x),p.return=g,p):(p=l(p,y),p.return=g,p)}function o(g,p,y,x){var T=y.type;return T===Ha?f(g,p,y.props.children,x,y.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Yt&&nu(T)===p.type)?(p=l(p,y.props),Un(p,y),p.return=g,p):(p=si(y.type,y.key,y.props,null,g.mode,x),Un(p,y),p.return=g,p)}function u(g,p,y,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=zs(y,g.mode,x),p.return=g,p):(p=l(p,y.children||[]),p.return=g,p)}function f(g,p,y,x,T){return p===null||p.tag!==7?(p=xa(y,g.mode,x,T),p.return=g,p):(p=l(p,y),p.return=g,p)}function m(g,p,y){if(typeof p=="string"&&p!==""||typeof p=="number"||typeof p=="bigint")return p=Ds(""+p,g.mode,y),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Vl:return y=si(p.type,p.key,p.props,null,g.mode,y),Un(y,p),y.return=g,y;case Vn:return p=zs(p,g.mode,y),p.return=g,p;case Yt:var x=p._init;return p=x(p._payload),m(g,p,y)}if(kn(p)||Rn(p))return p=xa(p,g.mode,y,null),p.return=g,p;if(typeof p.then=="function")return m(g,Il(p),y);if(p.$$typeof===Nt)return m(g,Ql(g,p),y);Kl(g,p)}return null}function d(g,p,y,x){var T=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return T!==null?null:c(g,p,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vl:return y.key===T?o(g,p,y,x):null;case Vn:return y.key===T?u(g,p,y,x):null;case Yt:return T=y._init,y=T(y._payload),d(g,p,y,x)}if(kn(y)||Rn(y))return T!==null?null:f(g,p,y,x,null);if(typeof y.then=="function")return d(g,p,Il(y),x);if(y.$$typeof===Nt)return d(g,p,Ql(g,y),x);Kl(g,y)}return null}function h(g,p,y,x,T){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return g=g.get(y)||null,c(p,g,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vl:return g=g.get(x.key===null?y:x.key)||null,o(p,g,x,T);case Vn:return g=g.get(x.key===null?y:x.key)||null,u(p,g,x,T);case Yt:var N=x._init;return x=N(x._payload),h(g,p,y,x,T)}if(kn(x)||Rn(x))return g=g.get(y)||null,f(p,g,x,T,null);if(typeof x.then=="function")return h(g,p,y,Il(x),T);if(x.$$typeof===Nt)return h(g,p,y,Ql(p,x),T);Kl(p,x)}return null}function b(g,p,y,x){for(var T=null,N=null,C=p,A=p=0,M=null;C!==null&&A<y.length;A++){C.index>A?(M=C,C=null):M=C.sibling;var E=d(g,C,y[A],x);if(E===null){C===null&&(C=M);break}e&&C&&E.alternate===null&&t(g,C),p=i(E,p,A),N===null?T=E:N.sibling=E,N=E,C=M}if(A===y.length)return a(g,C),I&&ga(g,A),T;if(C===null){for(;A<y.length;A++)C=m(g,y[A],x),C!==null&&(p=i(C,p,A),N===null?T=C:N.sibling=C,N=C);return I&&ga(g,A),T}for(C=n(C);A<y.length;A++)M=h(C,g,A,y[A],x),M!==null&&(e&&M.alternate!==null&&C.delete(M.key===null?A:M.key),p=i(M,p,A),N===null?T=M:N.sibling=M,N=M);return e&&C.forEach(function(w){return t(g,w)}),I&&ga(g,A),T}function j(g,p,y,x){if(y==null)throw Error(_(151));for(var T=null,N=null,C=p,A=p=0,M=null,E=y.next();C!==null&&!E.done;A++,E=y.next()){C.index>A?(M=C,C=null):M=C.sibling;var w=d(g,C,E.value,x);if(w===null){C===null&&(C=M);break}e&&C&&w.alternate===null&&t(g,C),p=i(w,p,A),N===null?T=w:N.sibling=w,N=w,C=M}if(E.done)return a(g,C),I&&ga(g,A),T;if(C===null){for(;!E.done;A++,E=y.next())E=m(g,E.value,x),E!==null&&(p=i(E,p,A),N===null?T=E:N.sibling=E,N=E);return I&&ga(g,A),T}for(C=n(C);!E.done;A++,E=y.next())E=h(C,g,A,E.value,x),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?A:E.key),p=i(E,p,A),N===null?T=E:N.sibling=E,N=E);return e&&C.forEach(function(D){return t(g,D)}),I&&ga(g,A),T}function S(g,p,y,x){if(typeof y=="object"&&y!==null&&y.type===Ha&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Vl:e:{for(var T=y.key;p!==null;){if(p.key===T){if(T=y.type,T===Ha){if(p.tag===7){a(g,p.sibling),x=l(p,y.props.children),x.return=g,g=x;break e}}else if(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Yt&&nu(T)===p.type){a(g,p.sibling),x=l(p,y.props),Un(x,y),x.return=g,g=x;break e}a(g,p);break}else t(g,p);p=p.sibling}y.type===Ha?(x=xa(y.props.children,g.mode,x,y.key),x.return=g,g=x):(x=si(y.type,y.key,y.props,null,g.mode,x),Un(x,y),x.return=g,g=x)}return r(g);case Vn:e:{for(T=y.key;p!==null;){if(p.key===T)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){a(g,p.sibling),x=l(p,y.children||[]),x.return=g,g=x;break e}else{a(g,p);break}else t(g,p);p=p.sibling}x=zs(y,g.mode,x),x.return=g,g=x}return r(g);case Yt:return T=y._init,y=T(y._payload),S(g,p,y,x)}if(kn(y))return b(g,p,y,x);if(Rn(y)){if(T=Rn(y),typeof T!="function")throw Error(_(150));return y=T.call(y),j(g,p,y,x)}if(typeof y.then=="function")return S(g,p,Il(y),x);if(y.$$typeof===Nt)return S(g,p,Ql(g,y),x);Kl(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,p!==null&&p.tag===6?(a(g,p.sibling),x=l(p,y),x.return=g,g=x):(a(g,p),x=Ds(y,g.mode,x),x.return=g,g=x),r(g)):a(g,p)}return function(g,p,y,x){try{fl=0;var T=S(g,p,y,x);return nn=null,T}catch(C){if(C===Rl||C===ss)throw C;var N=Ye(29,C,null,g.mode);return N.lanes=x,N.return=g,N}finally{}}}var mn=Df(!0),zf=Df(!1),nt=gt(null),pt=null;function Qt(e){var t=e.alternate;ie(ye,ye.current&1),ie(nt,e),pt===null&&(t===null||dn.current!==null||t.memoizedState!==null)&&(pt=e)}function Uf(e){if(e.tag===22){if(ie(ye,ye.current),ie(nt,e),pt===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(pt=e)}}else Zt()}function Zt(){ie(ye,ye.current),ie(nt,nt.current)}function _t(e){Ne(nt),pt===e&&(pt=null),Ne(ye)}var ye=gt(0);function zi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Jr(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ls(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:ae({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Mr={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=Qe(),l=ea(n);l.payload=t,a!=null&&(l.callback=a),t=ta(e,l,n),t!==null&&(Ze(t,e,n),Jn(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=Qe(),l=ea(n);l.tag=1,l.payload=t,a!=null&&(l.callback=a),t=ta(e,l,n),t!==null&&(Ze(t,e,n),Jn(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Qe(),n=ea(a);n.tag=2,t!=null&&(n.callback=t),t=ta(e,n,a),t!==null&&(Ze(t,e,a),Jn(t,e,a))}};function lu(e,t,a,n,l,i,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,r):t.prototype&&t.prototype.isPureReactComponent?!ol(a,n)||!ol(l,i):!0}function iu(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Mr.enqueueReplaceState(t,t.state,null)}function _a(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=ae({},a));for(var l in e)a[l]===void 0&&(a[l]=e[l])}return a}var Ui=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Mf(e){Ui(e)}function Lf(e){console.error(e)}function Bf(e){Ui(e)}function Mi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function su(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Lr(e,t,a){return a=ea(a),a.tag=3,a.payload={element:null},a.callback=function(){Mi(e,t)},a}function qf(e){return e=ea(e),e.tag=3,e}function Hf(e,t,a,n){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var i=n.value;e.payload=function(){return l(i)},e.callback=function(){su(t,a,n)}}var r=a.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){su(t,a,n),typeof l!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var c=n.stack;this.componentDidCatch(n.value,{componentStack:c!==null?c:""})})}function hg(e,t,a,n,l){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&_l(t,a,l,!0),a=nt.current,a!==null){switch(a.tag){case 13:return pt===null?Gr():a.alternate===null&&oe===0&&(oe=3),a.flags&=-257,a.flags|=65536,a.lanes=l,n===_r?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),Zs(e,n,l)),!1;case 22:return a.flags|=65536,n===_r?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),Zs(e,n,l)),!1}throw Error(_(435,a.tag))}return Zs(e,n,l),Gr(),!1}if(I)return t=nt.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=l,n!==Er&&(e=Error(_(422),{cause:n}),ul(tt(e,a)))):(n!==Er&&(t=Error(_(423),{cause:n}),ul(tt(t,a))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,n=tt(n,a),l=Lr(e.stateNode,n,l),Us(e,l),oe!==4&&(oe=2)),!1;var i=Error(_(520),{cause:n});if(i=tt(i,a),nl===null?nl=[i]:nl.push(i),oe!==4&&(oe=2),t===null)return!0;n=tt(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=l&-l,a.lanes|=e,e=Lr(a.stateNode,n,e),Us(a,e),!1;case 1:if(t=a.type,i=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(aa===null||!aa.has(i))))return a.flags|=65536,l&=-l,a.lanes|=l,l=qf(l),Hf(l,e,a,n),Us(a,l),!1}a=a.return}while(a!==null);return!1}var Pf=Error(_(461)),Ee=!1;function Te(e,t,a,n){t.child=e===null?zf(t,null,a,n):mn(t,e.child,a,n)}function ru(e,t,a,n,l){a=a.render;var i=t.ref;if("ref"in n){var r={};for(var c in n)c!=="ref"&&(r[c]=n[c])}else r=n;return Ca(t),n=zc(e,t,a,r,i,l),c=Uc(),e!==null&&!Ee?(Mc(e,t,l),Ut(e,t,l)):(I&&c&&Cc(t),t.flags|=1,Te(e,t,n,l),t.child)}function cu(e,t,a,n,l){if(e===null){var i=a.type;return typeof i=="function"&&!Tc(i)&&i.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=i,Vf(e,t,i,n,l)):(e=si(a.type,null,n,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!Gc(e,l)){var r=i.memoizedProps;if(a=a.compare,a=a!==null?a:ol,a(r,n)&&e.ref===t.ref)return Ut(e,t,l)}return t.flags|=1,e=At(i,n),e.ref=t.ref,e.return=t,t.child=e}function Vf(e,t,a,n,l){if(e!==null){var i=e.memoizedProps;if(ol(i,n)&&e.ref===t.ref)if(Ee=!1,t.pendingProps=n=i,Gc(e,l))e.flags&131072&&(Ee=!0);else return t.lanes=e.lanes,Ut(e,t,l)}return Br(e,t,a,n,l)}function kf(e,t,a){var n=t.pendingProps,l=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if(t.flags&128){if(n=i!==null?i.baseLanes|a:a,e!==null){for(l=t.child=e.child,i=0;l!==null;)i=i|l.lanes|l.childLanes,l=l.sibling;t.childLanes=i&~n}else t.childLanes=0,t.child=null;return ou(e,t,n,a)}if(a&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ri(t,i!==null?i.cachePool:null),i!==null?$o(t,i):Or(),Uf(t);else return t.lanes=t.childLanes=536870912,ou(e,t,i!==null?i.baseLanes|a:a,a)}else i!==null?(ri(t,i.cachePool),$o(t,i),Zt(),t.memoizedState=null):(e!==null&&ri(t,null),Or(),Zt());return Te(e,t,l,a),t.child}function ou(e,t,a,n){var l=Ac();return l=l===null?null:{parent:ge._currentValue,pool:l},t.memoizedState={baseLanes:a,cachePool:l},e!==null&&ri(t,null),Or(),Uf(t),e!==null&&_l(e,t,n,!0),null}function ui(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(_(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Br(e,t,a,n,l){return Ca(t),a=zc(e,t,a,n,void 0,l),n=Uc(),e!==null&&!Ee?(Mc(e,t,l),Ut(e,t,l)):(I&&n&&Cc(t),t.flags|=1,Te(e,t,a,l),t.child)}function uu(e,t,a,n,l,i){return Ca(t),t.updateQueue=null,a=ef(t,n,a,l),Fd(e),n=Uc(),e!==null&&!Ee?(Mc(e,t,i),Ut(e,t,i)):(I&&n&&Cc(t),t.flags|=1,Te(e,t,a,i),t.child)}function du(e,t,a,n,l){if(Ca(t),t.stateNode===null){var i=Za,r=a.contextType;typeof r=="object"&&r!==null&&(i=Ae(r)),i=new a(n,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Mr,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=n,i.state=t.memoizedState,i.refs={},Rc(t),r=a.contextType,i.context=typeof r=="object"&&r!==null?Ae(r):Za,i.state=t.memoizedState,r=a.getDerivedStateFromProps,typeof r=="function"&&(Ls(t,a,r,n),i.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(r=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),r!==i.state&&Mr.enqueueReplaceState(i,i.state,null),Fn(t,n,i,l),Wn(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){i=t.stateNode;var c=t.memoizedProps,o=_a(a,c);i.props=o;var u=i.context,f=a.contextType;r=Za,typeof f=="object"&&f!==null&&(r=Ae(f));var m=a.getDerivedStateFromProps;f=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function",c=t.pendingProps!==c,f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c||u!==r)&&iu(t,i,n,r),Gt=!1;var d=t.memoizedState;i.state=d,Fn(t,n,i,l),Wn(),u=t.memoizedState,c||d!==u||Gt?(typeof m=="function"&&(Ls(t,a,m,n),u=t.memoizedState),(o=Gt||lu(t,a,o,n,d,u,r))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),i.props=n,i.state=u,i.context=r,n=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Ar(e,t),r=t.memoizedProps,f=_a(a,r),i.props=f,m=t.pendingProps,d=i.context,u=a.contextType,o=Za,typeof u=="object"&&u!==null&&(o=Ae(u)),c=a.getDerivedStateFromProps,(u=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(r!==m||d!==o)&&iu(t,i,n,o),Gt=!1,d=t.memoizedState,i.state=d,Fn(t,n,i,l),Wn();var h=t.memoizedState;r!==m||d!==h||Gt||e!==null&&e.dependencies!==null&&_i(e.dependencies)?(typeof c=="function"&&(Ls(t,a,c,n),h=t.memoizedState),(f=Gt||lu(t,a,f,n,d,h,o)||e!==null&&e.dependencies!==null&&_i(e.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,h,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,h,o)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=h),i.props=n,i.state=h,i.context=o,n=f):(typeof i.componentDidUpdate!="function"||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return i=n,ui(e,t),n=(t.flags&128)!==0,i||n?(i=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&n?(t.child=mn(t,e.child,null,l),t.child=mn(t,null,a,l)):Te(e,t,a,l),t.memoizedState=i.state,e=t.child):e=Ut(e,t,l),e}function fu(e,t,a,n){return wl(),t.flags|=256,Te(e,t,a,n),t.child}var Bs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qs(e){return{baseLanes:e,cachePool:Id()}}function Hs(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=at),e}function Yf(e,t,a){var n=t.pendingProps,l=!1,i=(t.flags&128)!==0,r;if((r=i)||(r=e!==null&&e.memoizedState===null?!1:(ye.current&2)!==0),r&&(l=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(I){if(l?Qt(t):Zt(),I){var c=ce,o;if(o=c){e:{for(o=c,c=dt;o.nodeType!==8;){if(!c){c=null;break e}if(o=st(o.nextSibling),o===null){c=null;break e}}c=o}c!==null?(t.memoizedState={dehydrated:c,treeContext:ba!==null?{id:Tt,overflow:Ct}:null,retryLane:536870912,hydrationErrors:null},o=Ye(18,null,null,0),o.stateNode=c,o.return=t,t.child=o,Re=t,ce=null,o=!0):o=!1}o||Ta(t)}if(c=t.memoizedState,c!==null&&(c=c.dehydrated,c!==null))return Jr(c)?t.lanes=32:t.lanes=536870912,null;_t(t)}return c=n.children,n=n.fallback,l?(Zt(),l=t.mode,c=Li({mode:"hidden",children:c},l),n=xa(n,l,a,null),c.return=t,n.return=t,c.sibling=n,t.child=c,l=t.child,l.memoizedState=qs(a),l.childLanes=Hs(e,r,a),t.memoizedState=Bs,n):(Qt(t),qr(t,c))}if(o=e.memoizedState,o!==null&&(c=o.dehydrated,c!==null)){if(i)t.flags&256?(Qt(t),t.flags&=-257,t=Ps(e,t,a)):t.memoizedState!==null?(Zt(),t.child=e.child,t.flags|=128,t=null):(Zt(),l=n.fallback,c=t.mode,n=Li({mode:"visible",children:n.children},c),l=xa(l,c,a,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,mn(t,e.child,null,a),n=t.child,n.memoizedState=qs(a),n.childLanes=Hs(e,r,a),t.memoizedState=Bs,t=l);else if(Qt(t),Jr(c)){if(r=c.nextSibling&&c.nextSibling.dataset,r)var u=r.dgst;r=u,n=Error(_(419)),n.stack="",n.digest=r,ul({value:n,source:null,stack:null}),t=Ps(e,t,a)}else if(Ee||_l(e,t,a,!1),r=(a&e.childLanes)!==0,Ee||r){if(r=te,r!==null&&(n=a&-a,n=n&42?1:hc(n),n=n&(r.suspendedLanes|a)?0:n,n!==0&&n!==o.retryLane))throw o.retryLane=n,Sn(e,n),Ze(r,e,n),Pf;c.data==="$?"||Gr(),t=Ps(e,t,a)}else c.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,ce=st(c.nextSibling),Re=t,I=!0,Sa=null,dt=!1,e!==null&&(We[Fe++]=Tt,We[Fe++]=Ct,We[Fe++]=ba,Tt=e.id,Ct=e.overflow,ba=t),t=qr(t,n.children),t.flags|=4096);return t}return l?(Zt(),l=n.fallback,c=t.mode,o=e.child,u=o.sibling,n=At(o,{mode:"hidden",children:n.children}),n.subtreeFlags=o.subtreeFlags&65011712,u!==null?l=At(u,l):(l=xa(l,c,a,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,c=e.child.memoizedState,c===null?c=qs(a):(o=c.cachePool,o!==null?(u=ge._currentValue,o=o.parent!==u?{parent:u,pool:u}:o):o=Id(),c={baseLanes:c.baseLanes|a,cachePool:o}),l.memoizedState=c,l.childLanes=Hs(e,r,a),t.memoizedState=Bs,n):(Qt(t),a=e.child,e=a.sibling,a=At(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a)}function qr(e,t){return t=Li({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Li(e,t){return e=Ye(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ps(e,t,a){return mn(t,e.child,null,a),e=qr(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mu(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Tr(e.return,t,a)}function Vs(e,t,a,n,l){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:l}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=a,i.tailMode=l)}function Gf(e,t,a){var n=t.pendingProps,l=n.revealOrder,i=n.tail;if(Te(e,t,n.children,a),n=ye.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mu(e,a,t);else if(e.tag===19)mu(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(ie(ye,n),l){case"forwards":for(a=t.child,l=null;a!==null;)e=a.alternate,e!==null&&zi(e)===null&&(l=a),a=a.sibling;a=l,a===null?(l=t.child,t.child=null):(l=a.sibling,a.sibling=null),Vs(t,!1,l,a,i);break;case"backwards":for(a=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&zi(e)===null){t.child=l;break}e=l.sibling,l.sibling=a,a=l,l=e}Vs(t,!0,a,null,i);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ut(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),oa|=t.lanes,!(a&t.childLanes))if(e!==null){if(_l(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(_(153));if(t.child!==null){for(e=t.child,a=At(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=At(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Gc(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&_i(e)))}function pg(e,t,a){switch(t.tag){case 3:bi(t,t.stateNode.containerInfo),Xt(t,ge,e.memoizedState.cache),wl();break;case 27:case 5:mr(t);break;case 4:bi(t,t.stateNode.containerInfo);break;case 10:Xt(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Qt(t),t.flags|=128,null):a&t.child.childLanes?Yf(e,t,a):(Qt(t),e=Ut(e,t,a),e!==null?e.sibling:null);Qt(t);break;case 19:var l=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(_l(e,t,a,!1),n=(a&t.childLanes)!==0),l){if(n)return Gf(e,t,a);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ie(ye,ye.current),n)break;return null;case 22:case 23:return t.lanes=0,kf(e,t,a);case 24:Xt(t,ge,e.memoizedState.cache)}return Ut(e,t,a)}function Xf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ee=!0;else{if(!Gc(e,a)&&!(t.flags&128))return Ee=!1,pg(e,t,a);Ee=!!(e.flags&131072)}else Ee=!1,I&&t.flags&1048576&&Qd(t,wi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,l=n._init;if(n=l(n._payload),t.type=n,typeof n=="function")Tc(n)?(e=_a(n,e),t.tag=1,t=du(null,t,n,e,a)):(t.tag=0,t=Br(null,t,n,e,a));else{if(n!=null){if(l=n.$$typeof,l===dc){t.tag=11,t=ru(null,t,n,e,a);break e}else if(l===fc){t.tag=14,t=cu(null,t,n,e,a);break e}}throw t=dr(n)||n,Error(_(306,t,""))}}return t;case 0:return Br(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,l=_a(n,t.pendingProps),du(e,t,n,l,a);case 3:e:{if(bi(t,t.stateNode.containerInfo),e===null)throw Error(_(387));n=t.pendingProps;var i=t.memoizedState;l=i.element,Ar(e,t),Fn(t,n,null,a);var r=t.memoizedState;if(n=r.cache,Xt(t,ge,n),n!==i.cache&&Cr(t,[ge],a,!0),Wn(),n=r.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=fu(e,t,n,a);break e}else if(n!==l){l=tt(Error(_(424)),t),ul(l),t=fu(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ce=st(e.firstChild),Re=t,I=!0,Sa=null,dt=!0,a=zf(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(wl(),n===l){t=Ut(e,t,a);break e}Te(e,t,n,a)}t=t.child}return t;case 26:return ui(e,t),e===null?(a=Ru(t.type,null,t.pendingProps,null))?t.memoizedState=a:I||(a=t.type,e=t.pendingProps,n=Yi(Ft.current).createElement(a),n[_e]=t,n[Be]=e,we(n,a,e),je(n),t.stateNode=n):t.memoizedState=Ru(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return mr(t),e===null&&I&&(n=t.stateNode=Om(t.type,t.pendingProps,Ft.current),Re=t,dt=!0,l=ce,da(t.type)?(Wr=l,ce=st(n.firstChild)):ce=l),Te(e,t,t.pendingProps.children,a),ui(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&I&&((l=n=ce)&&(n=Yg(n,t.type,t.pendingProps,dt),n!==null?(t.stateNode=n,Re=t,ce=st(n.firstChild),dt=!1,l=!0):l=!1),l||Ta(t)),mr(t),l=t.type,i=t.pendingProps,r=e!==null?e.memoizedProps:null,n=i.children,Kr(l,i)?n=null:r!==null&&Kr(l,r)&&(t.flags|=32),t.memoizedState!==null&&(l=zc(e,t,rg,null,null,a),gl._currentValue=l),ui(e,t),Te(e,t,n,a),t.child;case 6:return e===null&&I&&((e=a=ce)&&(a=Gg(a,t.pendingProps,dt),a!==null?(t.stateNode=a,Re=t,ce=null,e=!0):e=!1),e||Ta(t)),null;case 13:return Yf(e,t,a);case 4:return bi(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=mn(t,null,n,a):Te(e,t,n,a),t.child;case 11:return ru(e,t,t.type,t.pendingProps,a);case 7:return Te(e,t,t.pendingProps,a),t.child;case 8:return Te(e,t,t.pendingProps.children,a),t.child;case 12:return Te(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,Xt(t,t.type,n.value),Te(e,t,n.children,a),t.child;case 9:return l=t.type._context,n=t.pendingProps.children,Ca(t),l=Ae(l),n=n(l),t.flags|=1,Te(e,t,n,a),t.child;case 14:return cu(e,t,t.type,t.pendingProps,a);case 15:return Vf(e,t,t.type,t.pendingProps,a);case 19:return Gf(e,t,a);case 31:return n=t.pendingProps,a=t.mode,n={mode:n.mode,children:n.children},e===null?(a=Li(n,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=At(e.child,n),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return kf(e,t,a);case 24:return Ca(t),n=Ae(ge),e===null?(l=Ac(),l===null&&(l=te,i=_c(),l.pooledCache=i,i.refCount++,i!==null&&(l.pooledCacheLanes|=a),l=i),t.memoizedState={parent:n,cache:l},Rc(t),Xt(t,ge,l)):(e.lanes&a&&(Ar(e,t),Fn(t,null,null,a),Wn()),l=e.memoizedState,i=t.memoizedState,l.parent!==n?(l={parent:n,cache:n},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),Xt(t,ge,n)):(n=i.cache,Xt(t,ge,n),n!==l.cache&&Cr(t,[ge],a,!0))),Te(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(_(156,t.tag))}function St(e){e.flags|=4}function hu(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Um(t)){if(t=nt.current,t!==null&&((X&4194048)===X?pt!==null:(X&62914560)!==X&&!(X&536870912)||t!==pt))throw $n=_r,Kd;e.flags|=8192}}function $l(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?gd():536870912,e.lanes|=t,hn|=t)}function Mn(e,t){if(!I)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function re(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags&65011712,n|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function gg(e,t,a){var n=t.pendingProps;switch(wc(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(t),null;case 1:return re(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Rt(ge),rn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(zn(t)?St(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Go())),re(t),null;case 26:return a=t.memoizedState,e===null?(St(t),a!==null?(re(t),hu(t,a)):(re(t),t.flags&=-16777217)):a?a!==e.memoizedState?(St(t),re(t),hu(t,a)):(re(t),t.flags&=-16777217):(e.memoizedProps!==n&&St(t),re(t),t.flags&=-16777217),null;case 27:Si(t),a=Ft.current;var l=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&St(t);else{if(!n){if(t.stateNode===null)throw Error(_(166));return re(t),null}e=mt.current,zn(t)?ko(t):(e=Om(l,n,a),t.stateNode=e,St(t))}return re(t),null;case 5:if(Si(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&St(t);else{if(!n){if(t.stateNode===null)throw Error(_(166));return re(t),null}if(e=mt.current,zn(t))ko(t);else{switch(l=Yi(Ft.current),e){case 1:e=l.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=l.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=l.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=l.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?l.createElement("select",{is:n.is}):l.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?l.createElement(a,{is:n.is}):l.createElement(a)}}e[_e]=t,e[Be]=n;e:for(l=t.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.tag!==27&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===t)break e;for(;l.sibling===null;){if(l.return===null||l.return===t)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}t.stateNode=e;e:switch(we(e,a,n),a){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&St(t)}}return re(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&St(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(_(166));if(e=Ft.current,zn(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,l=Re,l!==null)switch(l.tag){case 27:case 5:n=l.memoizedProps}e[_e]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||_m(e.nodeValue,a)),e||Ta(t)}else e=Yi(e).createTextNode(n),e[_e]=t,t.stateNode=e}return re(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=zn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(_(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(_(317));l[_e]=t}else wl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;re(t),l=!1}else l=Go(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(_t(t),t):(_t(t),null)}if(_t(t),t.flags&128)return t.lanes=a,t;if(a=n!==null,e=e!==null&&e.memoizedState!==null,a){n=t.child,l=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(l=n.alternate.memoizedState.cachePool.pool);var i=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==l&&(n.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),$l(t,t.updateQueue),re(t),null;case 4:return rn(),e===null&&Wc(t.stateNode.containerInfo),re(t),null;case 10:return Rt(t.type),re(t),null;case 19:if(Ne(ye),l=t.memoizedState,l===null)return re(t),null;if(n=(t.flags&128)!==0,i=l.rendering,i===null)if(n)Mn(l,!1);else{if(oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=zi(e),i!==null){for(t.flags|=128,Mn(l,!1),e=i.updateQueue,t.updateQueue=e,$l(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Xd(a,e),a=a.sibling;return ie(ye,ye.current&1|2),t.child}e=e.sibling}l.tail!==null&&ht()>qi&&(t.flags|=128,n=!0,Mn(l,!1),t.lanes=4194304)}else{if(!n)if(e=zi(i),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,$l(t,e),Mn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!I)return re(t),null}else 2*ht()-l.renderingStartTime>qi&&a!==536870912&&(t.flags|=128,n=!0,Mn(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(e=l.last,e!==null?e.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ht(),t.sibling=null,e=ye.current,ie(ye,n?e&1|2:e&1),t):(re(t),null);case 22:case 23:return _t(t),Oc(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?a&536870912&&!(t.flags&128)&&(re(t),t.subtreeFlags&6&&(t.flags|=8192)):re(t),a=t.updateQueue,a!==null&&$l(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&Ne(ja),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Rt(ge),re(t),null;case 25:return null;case 30:return null}throw Error(_(156,t.tag))}function yg(e,t){switch(wc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rt(ge),rn(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Si(t),null;case 13:if(_t(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_(340));wl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(ye),null;case 4:return rn(),null;case 10:return Rt(t.type),null;case 22:case 23:return _t(t),Oc(),e!==null&&Ne(ja),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Rt(ge),null;case 25:return null;default:return null}}function Qf(e,t){switch(wc(t),t.tag){case 3:Rt(ge),rn();break;case 26:case 27:case 5:Si(t);break;case 4:rn();break;case 13:_t(t);break;case 19:Ne(ye);break;case 10:Rt(t.type);break;case 22:case 23:_t(t),Oc(),e!==null&&Ne(ja);break;case 24:Rt(ge)}}function zl(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var l=n.next;a=l;do{if((a.tag&e)===e){n=void 0;var i=a.create,r=a.inst;n=i(),r.destroy=n}a=a.next}while(a!==l)}}catch(c){ee(t,t.return,c)}}function ca(e,t,a){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var i=l.next;n=i;do{if((n.tag&e)===e){var r=n.inst,c=r.destroy;if(c!==void 0){r.destroy=void 0,l=t;var o=a,u=c;try{u()}catch(f){ee(l,o,f)}}}n=n.next}while(n!==i)}}catch(f){ee(t,t.return,f)}}function Zf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Wd(t,a)}catch(n){ee(e,e.return,n)}}}function If(e,t,a){a.props=_a(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){ee(e,t,n)}}function tl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(l){ee(e,t,l)}}function ft(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(l){ee(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){ee(e,t,l)}else a.current=null}function Kf(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(l){ee(e,e.return,l)}}function ks(e,t,a){try{var n=e.stateNode;qg(n,e.type,a,t),n[Be]=t}catch(l){ee(e,e.return,l)}}function $f(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&da(e.type)||e.tag===4}function Ys(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$f(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&da(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hr(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ms));else if(n!==4&&(n===27&&da(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Hr(e,t,a),e=e.sibling;e!==null;)Hr(e,t,a),e=e.sibling}function Bi(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&da(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Bi(e,t,a),e=e.sibling;e!==null;)Bi(e,t,a),e=e.sibling}function Jf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);we(t,n,a),t[_e]=e,t[Be]=a}catch(i){ee(e,e.return,i)}}var Et=!1,fe=!1,Gs=!1,pu=typeof WeakSet=="function"?WeakSet:Set,Se=null;function vg(e,t){if(e=e.containerInfo,Zr=Zi,e=Bd(e),jc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var l=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break e}var r=0,c=-1,o=-1,u=0,f=0,m=e,d=null;t:for(;;){for(var h;m!==a||l!==0&&m.nodeType!==3||(c=r+l),m!==i||n!==0&&m.nodeType!==3||(o=r+n),m.nodeType===3&&(r+=m.nodeValue.length),(h=m.firstChild)!==null;)d=m,m=h;for(;;){if(m===e)break t;if(d===a&&++u===l&&(c=r),d===i&&++f===n&&(o=r),(h=m.nextSibling)!==null)break;m=d,d=m.parentNode}m=h}a=c===-1||o===-1?null:{start:c,end:o}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ir={focusedElem:e,selectionRange:a},Zi=!1,Se=t;Se!==null;)if(t=Se,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Se=e;else for(;Se!==null;){switch(t=Se,i=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&i!==null){e=void 0,a=t,l=i.memoizedProps,i=i.memoizedState,n=a.stateNode;try{var b=_a(a.type,l,a.elementType===a.type);e=n.getSnapshotBeforeUpdate(b,i),n.__reactInternalSnapshotBeforeUpdate=e}catch(j){ee(a,a.return,j)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)$r(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":$r(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(_(163))}if(e=t.sibling,e!==null){e.return=t.return,Se=e;break}Se=t.return}}function Wf(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:Vt(e,a),n&4&&zl(5,a);break;case 1:if(Vt(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(r){ee(a,a.return,r)}else{var l=_a(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){ee(a,a.return,r)}}n&64&&Zf(a),n&512&&tl(a,a.return);break;case 3:if(Vt(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Wd(e,t)}catch(r){ee(a,a.return,r)}}break;case 27:t===null&&n&4&&Jf(a);case 26:case 5:Vt(e,a),t===null&&n&4&&Kf(a),n&512&&tl(a,a.return);break;case 12:Vt(e,a);break;case 13:Vt(e,a),n&4&&tm(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=wg.bind(null,a),Xg(e,a))));break;case 22:if(n=a.memoizedState!==null||Et,!n){t=t!==null&&t.memoizedState!==null||fe,l=Et;var i=fe;Et=n,(fe=t)&&!i?kt(e,a,(a.subtreeFlags&8772)!==0):Vt(e,a),Et=l,fe=i}break;case 30:break;default:Vt(e,a)}}function Ff(e){var t=e.alternate;t!==null&&(e.alternate=null,Ff(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&gc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ne=null,Me=!1;function jt(e,t,a){for(a=a.child;a!==null;)em(e,t,a),a=a.sibling}function em(e,t,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(jl,a)}catch{}switch(a.tag){case 26:fe||ft(a,t),jt(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:fe||ft(a,t);var n=ne,l=Me;da(a.type)&&(ne=a.stateNode,Me=!1),jt(e,t,a),il(a.stateNode),ne=n,Me=l;break;case 5:fe||ft(a,t);case 6:if(n=ne,l=Me,ne=null,jt(e,t,a),ne=n,Me=l,ne!==null)if(Me)try{(ne.nodeType===9?ne.body:ne.nodeName==="HTML"?ne.ownerDocument.body:ne).removeChild(a.stateNode)}catch(i){ee(a,t,i)}else try{ne.removeChild(a.stateNode)}catch(i){ee(a,t,i)}break;case 18:ne!==null&&(Me?(e=ne,wu(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),xl(e)):wu(ne,a.stateNode));break;case 4:n=ne,l=Me,ne=a.stateNode.containerInfo,Me=!0,jt(e,t,a),ne=n,Me=l;break;case 0:case 11:case 14:case 15:fe||ca(2,a,t),fe||ca(4,a,t),jt(e,t,a);break;case 1:fe||(ft(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&If(a,t,n)),jt(e,t,a);break;case 21:jt(e,t,a);break;case 22:fe=(n=fe)||a.memoizedState!==null,jt(e,t,a),fe=n;break;default:jt(e,t,a)}}function tm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{xl(e)}catch(a){ee(t,t.return,a)}}function xg(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new pu),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new pu),t;default:throw Error(_(435,e.tag))}}function Xs(e,t){var a=xg(e);t.forEach(function(n){var l=_g.bind(null,e,n);a.has(n)||(a.add(n),n.then(l,l))})}function Pe(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var l=a[n],i=e,r=t,c=r;e:for(;c!==null;){switch(c.tag){case 27:if(da(c.type)){ne=c.stateNode,Me=!1;break e}break;case 5:ne=c.stateNode,Me=!1;break e;case 3:case 4:ne=c.stateNode.containerInfo,Me=!0;break e}c=c.return}if(ne===null)throw Error(_(160));em(i,r,l),ne=null,Me=!1,i=l.alternate,i!==null&&(i.return=null),l.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)am(t,e),t=t.sibling}var it=null;function am(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pe(t,e),Ve(e),n&4&&(ca(3,e,e.return),zl(3,e),ca(5,e,e.return));break;case 1:Pe(t,e),Ve(e),n&512&&(fe||a===null||ft(a,a.return)),n&64&&Et&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var l=it;if(Pe(t,e),Ve(e),n&512&&(fe||a===null||ft(a,a.return)),n&4){var i=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,l=l.ownerDocument||l;t:switch(n){case"title":i=l.getElementsByTagName("title")[0],(!i||i[Tl]||i[_e]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=l.createElement(n),l.head.insertBefore(i,l.querySelector("head > title"))),we(i,n,a),i[_e]=e,je(i),n=i;break e;case"link":var r=Du("link","href",l).get(n+(a.href||""));if(r){for(var c=0;c<r.length;c++)if(i=r[c],i.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&i.getAttribute("rel")===(a.rel==null?null:a.rel)&&i.getAttribute("title")===(a.title==null?null:a.title)&&i.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){r.splice(c,1);break t}}i=l.createElement(n),we(i,n,a),l.head.appendChild(i);break;case"meta":if(r=Du("meta","content",l).get(n+(a.content||""))){for(c=0;c<r.length;c++)if(i=r[c],i.getAttribute("content")===(a.content==null?null:""+a.content)&&i.getAttribute("name")===(a.name==null?null:a.name)&&i.getAttribute("property")===(a.property==null?null:a.property)&&i.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&i.getAttribute("charset")===(a.charSet==null?null:a.charSet)){r.splice(c,1);break t}}i=l.createElement(n),we(i,n,a),l.head.appendChild(i);break;default:throw Error(_(468,n))}i[_e]=e,je(i),n=i}e.stateNode=n}else zu(l,e.type,e.stateNode);else e.stateNode=Ou(l,n,e.memoizedProps);else i!==n?(i===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):i.count--,n===null?zu(l,e.type,e.stateNode):Ou(l,n,e.memoizedProps)):n===null&&e.stateNode!==null&&ks(e,e.memoizedProps,a.memoizedProps)}break;case 27:Pe(t,e),Ve(e),n&512&&(fe||a===null||ft(a,a.return)),a!==null&&n&4&&ks(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Pe(t,e),Ve(e),n&512&&(fe||a===null||ft(a,a.return)),e.flags&32){l=e.stateNode;try{on(l,"")}catch(h){ee(e,e.return,h)}}n&4&&e.stateNode!=null&&(l=e.memoizedProps,ks(e,l,a!==null?a.memoizedProps:l)),n&1024&&(Gs=!0);break;case 6:if(Pe(t,e),Ve(e),n&4){if(e.stateNode===null)throw Error(_(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(h){ee(e,e.return,h)}}break;case 3:if(mi=null,l=it,it=Gi(t.containerInfo),Pe(t,e),it=l,Ve(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{xl(t.containerInfo)}catch(h){ee(e,e.return,h)}Gs&&(Gs=!1,nm(e));break;case 4:n=it,it=Gi(e.stateNode.containerInfo),Pe(t,e),Ve(e),it=n;break;case 12:Pe(t,e),Ve(e);break;case 13:Pe(t,e),Ve(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Kc=ht()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Xs(e,n)));break;case 22:l=e.memoizedState!==null;var o=a!==null&&a.memoizedState!==null,u=Et,f=fe;if(Et=u||l,fe=f||o,Pe(t,e),fe=f,Et=u,Ve(e),n&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(a===null||o||Et||fe||ya(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){o=a=t;try{if(i=o.stateNode,l)r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{c=o.stateNode;var m=o.memoizedProps.style,d=m!=null&&m.hasOwnProperty("display")?m.display:null;c.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(h){ee(o,o.return,h)}}}else if(t.tag===6){if(a===null){o=t;try{o.stateNode.nodeValue=l?"":o.memoizedProps}catch(h){ee(o,o.return,h)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Xs(e,a))));break;case 19:Pe(t,e),Ve(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Xs(e,n)));break;case 30:break;case 21:break;default:Pe(t,e),Ve(e)}}function Ve(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if($f(n)){a=n;break}n=n.return}if(a==null)throw Error(_(160));switch(a.tag){case 27:var l=a.stateNode,i=Ys(e);Bi(e,i,l);break;case 5:var r=a.stateNode;a.flags&32&&(on(r,""),a.flags&=-33);var c=Ys(e);Bi(e,c,r);break;case 3:case 4:var o=a.stateNode.containerInfo,u=Ys(e);Hr(e,u,o);break;default:throw Error(_(161))}}catch(f){ee(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;nm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Vt(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Wf(e,t.alternate,t),t=t.sibling}function ya(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ca(4,t,t.return),ya(t);break;case 1:ft(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&If(t,t.return,a),ya(t);break;case 27:il(t.stateNode);case 26:case 5:ft(t,t.return),ya(t);break;case 22:t.memoizedState===null&&ya(t);break;case 30:ya(t);break;default:ya(t)}e=e.sibling}}function kt(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,l=e,i=t,r=i.flags;switch(i.tag){case 0:case 11:case 15:kt(l,i,a),zl(4,i);break;case 1:if(kt(l,i,a),n=i,l=n.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(u){ee(n,n.return,u)}if(n=i,l=n.updateQueue,l!==null){var c=n.stateNode;try{var o=l.shared.hiddenCallbacks;if(o!==null)for(l.shared.hiddenCallbacks=null,l=0;l<o.length;l++)Jd(o[l],c)}catch(u){ee(n,n.return,u)}}a&&r&64&&Zf(i),tl(i,i.return);break;case 27:Jf(i);case 26:case 5:kt(l,i,a),a&&n===null&&r&4&&Kf(i),tl(i,i.return);break;case 12:kt(l,i,a);break;case 13:kt(l,i,a),a&&r&4&&tm(l,i);break;case 22:i.memoizedState===null&&kt(l,i,a),tl(i,i.return);break;case 30:break;default:kt(l,i,a)}t=t.sibling}}function Xc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Al(a))}function Qc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Al(e))}function ut(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lm(e,t,a,n),t=t.sibling}function lm(e,t,a,n){var l=t.flags;switch(t.tag){case 0:case 11:case 15:ut(e,t,a,n),l&2048&&zl(9,t);break;case 1:ut(e,t,a,n);break;case 3:ut(e,t,a,n),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Al(e)));break;case 12:if(l&2048){ut(e,t,a,n),e=t.stateNode;try{var i=t.memoizedProps,r=i.id,c=i.onPostCommit;typeof c=="function"&&c(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(o){ee(t,t.return,o)}}else ut(e,t,a,n);break;case 13:ut(e,t,a,n);break;case 23:break;case 22:i=t.stateNode,r=t.alternate,t.memoizedState!==null?i._visibility&2?ut(e,t,a,n):al(e,t):i._visibility&2?ut(e,t,a,n):(i._visibility|=2,Ba(e,t,a,n,(t.subtreeFlags&10256)!==0)),l&2048&&Xc(r,t);break;case 24:ut(e,t,a,n),l&2048&&Qc(t.alternate,t);break;default:ut(e,t,a,n)}}function Ba(e,t,a,n,l){for(l=l&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var i=e,r=t,c=a,o=n,u=r.flags;switch(r.tag){case 0:case 11:case 15:Ba(i,r,c,o,l),zl(8,r);break;case 23:break;case 22:var f=r.stateNode;r.memoizedState!==null?f._visibility&2?Ba(i,r,c,o,l):al(i,r):(f._visibility|=2,Ba(i,r,c,o,l)),l&&u&2048&&Xc(r.alternate,r);break;case 24:Ba(i,r,c,o,l),l&&u&2048&&Qc(r.alternate,r);break;default:Ba(i,r,c,o,l)}t=t.sibling}}function al(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,l=n.flags;switch(n.tag){case 22:al(a,n),l&2048&&Xc(n.alternate,n);break;case 24:al(a,n),l&2048&&Qc(n.alternate,n);break;default:al(a,n)}t=t.sibling}}var Gn=8192;function za(e){if(e.subtreeFlags&Gn)for(e=e.child;e!==null;)im(e),e=e.sibling}function im(e){switch(e.tag){case 26:za(e),e.flags&Gn&&e.memoizedState!==null&&ly(it,e.memoizedState,e.memoizedProps);break;case 5:za(e);break;case 3:case 4:var t=it;it=Gi(e.stateNode.containerInfo),za(e),it=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Gn,Gn=16777216,za(e),Gn=t):za(e));break;default:za(e)}}function sm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ln(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Se=n,cm(n,e)}sm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)rm(e),e=e.sibling}function rm(e){switch(e.tag){case 0:case 11:case 15:Ln(e),e.flags&2048&&ca(9,e,e.return);break;case 3:Ln(e);break;case 12:Ln(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,di(e)):Ln(e);break;default:Ln(e)}}function di(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Se=n,cm(n,e)}sm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ca(8,t,t.return),di(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,di(t));break;default:di(t)}e=e.sibling}}function cm(e,t){for(;Se!==null;){var a=Se;switch(a.tag){case 0:case 11:case 15:ca(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Al(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Se=n;else e:for(a=e;Se!==null;){n=Se;var l=n.sibling,i=n.return;if(Ff(n),n===a){Se=null;break e}if(l!==null){l.return=i,Se=l;break e}Se=i}}}var bg={getCacheForType:function(e){var t=Ae(ge),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},Sg=typeof WeakMap=="function"?WeakMap:Map,J=0,te=null,k=null,X=0,$=0,ke=null,Jt=!1,jn=!1,Zc=!1,Mt=0,oe=0,oa=0,Ea=0,Ic=0,at=0,hn=0,nl=null,Le=null,Pr=!1,Kc=0,qi=1/0,Hi=null,aa=null,Ce=0,na=null,pn=null,ln=0,Vr=0,kr=null,om=null,ll=0,Yr=null;function Qe(){if(J&2&&X!==0)return X&-X;if(q.T!==null){var e=un;return e!==0?e:Jc()}return xd()}function um(){at===0&&(at=!(X&536870912)||I?pd():536870912);var e=nt.current;return e!==null&&(e.flags|=32),at}function Ze(e,t,a){(e===te&&($===2||$===9)||e.cancelPendingCommit!==null)&&(gn(e,0),Wt(e,X,at,!1)),Nl(e,a),(!(J&2)||e!==te)&&(e===te&&(!(J&2)&&(Ea|=a),oe===4&&Wt(e,X,at,!1)),yt(e))}function dm(e,t,a){if(J&6)throw Error(_(327));var n=!a&&(t&124)===0&&(t&e.expiredLanes)===0||El(e,t),l=n?Ng(e,t):Qs(e,t,!0),i=n;do{if(l===0){jn&&!n&&Wt(e,t,0,!1);break}else{if(a=e.current.alternate,i&&!jg(a)){l=Qs(e,t,!1),i=!1;continue}if(l===2){if(i=t,e.errorRecoveryDisabledLanes&i)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var c=e;l=nl;var o=c.current.memoizedState.isDehydrated;if(o&&(gn(c,r).flags|=256),r=Qs(c,r,!1),r!==2){if(Zc&&!o){c.errorRecoveryDisabledLanes|=i,Ea|=i,l=4;break e}i=Le,Le=l,i!==null&&(Le===null?Le=i:Le.push.apply(Le,i))}l=r}if(i=!1,l!==2)continue}}if(l===1){gn(e,0),Wt(e,t,0,!0);break}e:{switch(n=e,i=l,i){case 0:case 1:throw Error(_(345));case 4:if((t&4194048)!==t)break;case 6:Wt(n,t,at,!Jt);break e;case 2:Le=null;break;case 3:case 5:break;default:throw Error(_(329))}if((t&62914560)===t&&(l=Kc+300-ht(),10<l)){if(Wt(n,t,at,!Jt),es(n,0,!0)!==0)break e;n.timeoutHandle=Rm(gu.bind(null,n,a,Le,Hi,Pr,t,at,Ea,hn,Jt,i,2,-0,0),l);break e}gu(n,a,Le,Hi,Pr,t,at,Ea,hn,Jt,i,0,-0,0)}}break}while(!0);yt(e)}function gu(e,t,a,n,l,i,r,c,o,u,f,m,d,h){if(e.timeoutHandle=-1,m=t.subtreeFlags,(m&8192||(m&16785408)===16785408)&&(pl={stylesheets:null,count:0,unsuspend:ny},im(t),m=iy(),m!==null)){e.cancelPendingCommit=m(vu.bind(null,e,t,i,a,n,l,r,c,o,f,1,d,h)),Wt(e,i,r,!u);return}vu(e,t,i,a,n,l,r,c,o)}function jg(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var l=a[n],i=l.getSnapshot;l=l.value;try{if(!Ie(i(),l))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wt(e,t,a,n){t&=~Ic,t&=~Ea,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var l=t;0<l;){var i=31-Xe(l),r=1<<i;n[i]=-1,l&=~r}a!==0&&yd(e,a,t)}function us(){return J&6?!0:(Ul(0),!1)}function $c(){if(k!==null){if($===0)var e=k.return;else e=k,wt=Da=null,Lc(e),nn=null,fl=0,e=k;for(;e!==null;)Qf(e.alternate,e),e=e.return;k=null}}function gn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Pg(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),$c(),te=e,k=a=At(e.current,null),X=t,$=0,ke=null,Jt=!1,jn=El(e,t),Zc=!1,hn=at=Ic=Ea=oa=oe=0,Le=nl=null,Pr=!1,t&8&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var l=31-Xe(n),i=1<<l;t|=e[l],n&=~i}return Mt=t,ls(),a}function fm(e,t){P=null,q.H=Di,t===Rl||t===ss?(t=Io(),$=3):t===Kd?(t=Io(),$=4):$=t===Pf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ke=t,k===null&&(oe=1,Mi(e,tt(t,e.current)))}function mm(){var e=q.H;return q.H=Di,e===null?Di:e}function hm(){var e=q.A;return q.A=bg,e}function Gr(){oe=4,Jt||(X&4194048)!==X&&nt.current!==null||(jn=!0),!(oa&134217727)&&!(Ea&134217727)||te===null||Wt(te,X,at,!1)}function Qs(e,t,a){var n=J;J|=2;var l=mm(),i=hm();(te!==e||X!==t)&&(Hi=null,gn(e,t)),t=!1;var r=oe;e:do try{if($!==0&&k!==null){var c=k,o=ke;switch($){case 8:$c(),r=6;break e;case 3:case 2:case 9:case 6:nt.current===null&&(t=!0);var u=$;if($=0,ke=null,$a(e,c,o,u),a&&jn){r=0;break e}break;default:u=$,$=0,ke=null,$a(e,c,o,u)}}Eg(),r=oe;break}catch(f){fm(e,f)}while(!0);return t&&e.shellSuspendCounter++,wt=Da=null,J=n,q.H=l,q.A=i,k===null&&(te=null,X=0,ls()),r}function Eg(){for(;k!==null;)pm(k)}function Ng(e,t){var a=J;J|=2;var n=mm(),l=hm();te!==e||X!==t?(Hi=null,qi=ht()+500,gn(e,t)):jn=El(e,t);e:do try{if($!==0&&k!==null){t=k;var i=ke;t:switch($){case 1:$=0,ke=null,$a(e,t,i,1);break;case 2:case 9:if(Zo(i)){$=0,ke=null,yu(t);break}t=function(){$!==2&&$!==9||te!==e||($=7),yt(e)},i.then(t,t);break e;case 3:$=7;break e;case 4:$=5;break e;case 7:Zo(i)?($=0,ke=null,yu(t)):($=0,ke=null,$a(e,t,i,7));break;case 5:var r=null;switch(k.tag){case 26:r=k.memoizedState;case 5:case 27:var c=k;if(!r||Um(r)){$=0,ke=null;var o=c.sibling;if(o!==null)k=o;else{var u=c.return;u!==null?(k=u,ds(u)):k=null}break t}}$=0,ke=null,$a(e,t,i,5);break;case 6:$=0,ke=null,$a(e,t,i,6);break;case 8:$c(),oe=6;break e;default:throw Error(_(462))}}Tg();break}catch(f){fm(e,f)}while(!0);return wt=Da=null,q.H=n,q.A=l,J=a,k!==null?0:(te=null,X=0,ls(),oe)}function Tg(){for(;k!==null&&!Zh();)pm(k)}function pm(e){var t=Xf(e.alternate,e,Mt);e.memoizedProps=e.pendingProps,t===null?ds(e):k=t}function yu(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=uu(a,t,t.pendingProps,t.type,void 0,X);break;case 11:t=uu(a,t,t.pendingProps,t.type.render,t.ref,X);break;case 5:Lc(t);default:Qf(a,t),t=k=Xd(t,Mt),t=Xf(a,t,Mt)}e.memoizedProps=e.pendingProps,t===null?ds(e):k=t}function $a(e,t,a,n){wt=Da=null,Lc(t),nn=null,fl=0;var l=t.return;try{if(hg(e,l,t,a,X)){oe=1,Mi(e,tt(a,e.current)),k=null;return}}catch(i){if(l!==null)throw k=l,i;oe=1,Mi(e,tt(a,e.current)),k=null;return}t.flags&32768?(I||n===1?e=!0:jn||X&536870912?e=!1:(Jt=e=!0,(n===2||n===9||n===3||n===6)&&(n=nt.current,n!==null&&n.tag===13&&(n.flags|=16384))),gm(t,e)):ds(t)}function ds(e){var t=e;do{if(t.flags&32768){gm(t,Jt);return}e=t.return;var a=gg(t.alternate,t,Mt);if(a!==null){k=a;return}if(t=t.sibling,t!==null){k=t;return}k=t=e}while(t!==null);oe===0&&(oe=5)}function gm(e,t){do{var a=yg(e.alternate,e);if(a!==null){a.flags&=32767,k=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){k=e;return}k=e=a}while(e!==null);oe=6,k=null}function vu(e,t,a,n,l,i,r,c,o){e.cancelPendingCommit=null;do fs();while(Ce!==0);if(J&6)throw Error(_(327));if(t!==null){if(t===e.current)throw Error(_(177));if(i=t.lanes|t.childLanes,i|=Ec,np(e,a,i,r,c,o),e===te&&(k=te=null,X=0),pn=t,na=e,ln=a,Vr=i,kr=l,om=n,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Ag(ji,function(){return Sm(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,t.subtreeFlags&13878||n){n=q.T,q.T=null,l=K.p,K.p=2,r=J,J|=4;try{vg(e,t,a)}finally{J=r,K.p=l,q.T=n}}Ce=1,ym(),vm(),xm()}}function ym(){if(Ce===1){Ce=0;var e=na,t=pn,a=(t.flags&13878)!==0;if(t.subtreeFlags&13878||a){a=q.T,q.T=null;var n=K.p;K.p=2;var l=J;J|=4;try{am(t,e);var i=Ir,r=Bd(e.containerInfo),c=i.focusedElem,o=i.selectionRange;if(r!==c&&c&&c.ownerDocument&&Ld(c.ownerDocument.documentElement,c)){if(o!==null&&jc(c)){var u=o.start,f=o.end;if(f===void 0&&(f=u),"selectionStart"in c)c.selectionStart=u,c.selectionEnd=Math.min(f,c.value.length);else{var m=c.ownerDocument||document,d=m&&m.defaultView||window;if(d.getSelection){var h=d.getSelection(),b=c.textContent.length,j=Math.min(o.start,b),S=o.end===void 0?j:Math.min(o.end,b);!h.extend&&j>S&&(r=S,S=j,j=r);var g=Ho(c,j),p=Ho(c,S);if(g&&p&&(h.rangeCount!==1||h.anchorNode!==g.node||h.anchorOffset!==g.offset||h.focusNode!==p.node||h.focusOffset!==p.offset)){var y=m.createRange();y.setStart(g.node,g.offset),h.removeAllRanges(),j>S?(h.addRange(y),h.extend(p.node,p.offset)):(y.setEnd(p.node,p.offset),h.addRange(y))}}}}for(m=[],h=c;h=h.parentNode;)h.nodeType===1&&m.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<m.length;c++){var x=m[c];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}Zi=!!Zr,Ir=Zr=null}finally{J=l,K.p=n,q.T=a}}e.current=t,Ce=2}}function vm(){if(Ce===2){Ce=0;var e=na,t=pn,a=(t.flags&8772)!==0;if(t.subtreeFlags&8772||a){a=q.T,q.T=null;var n=K.p;K.p=2;var l=J;J|=4;try{Wf(e,t.alternate,t)}finally{J=l,K.p=n,q.T=a}}Ce=3}}function xm(){if(Ce===4||Ce===3){Ce=0,Ih();var e=na,t=pn,a=ln,n=om;t.subtreeFlags&10256||t.flags&10256?Ce=5:(Ce=0,pn=na=null,bm(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(aa=null),pc(a),t=t.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(jl,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=q.T,l=K.p,K.p=2,q.T=null;try{for(var i=e.onRecoverableError,r=0;r<n.length;r++){var c=n[r];i(c.value,{componentStack:c.stack})}}finally{q.T=t,K.p=l}}ln&3&&fs(),yt(e),l=e.pendingLanes,a&4194090&&l&42?e===Yr?ll++:(ll=0,Yr=e):ll=0,Ul(0)}}function bm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Al(t)))}function fs(e){return ym(),vm(),xm(),Sm()}function Sm(){if(Ce!==5)return!1;var e=na,t=Vr;Vr=0;var a=pc(ln),n=q.T,l=K.p;try{K.p=32>a?32:a,q.T=null,a=kr,kr=null;var i=na,r=ln;if(Ce=0,pn=na=null,ln=0,J&6)throw Error(_(331));var c=J;if(J|=4,rm(i.current),lm(i,i.current,r,a),J=c,Ul(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(jl,i)}catch{}return!0}finally{K.p=l,q.T=n,bm(e,t)}}function xu(e,t,a){t=tt(a,t),t=Lr(e.stateNode,t,2),e=ta(e,t,2),e!==null&&(Nl(e,2),yt(e))}function ee(e,t,a){if(e.tag===3)xu(e,e,a);else for(;t!==null;){if(t.tag===3){xu(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(aa===null||!aa.has(n))){e=tt(a,e),a=qf(2),n=ta(t,a,2),n!==null&&(Hf(a,n,t,e),Nl(n,2),yt(n));break}}t=t.return}}function Zs(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new Sg;var l=new Set;n.set(t,l)}else l=n.get(t),l===void 0&&(l=new Set,n.set(t,l));l.has(a)||(Zc=!0,l.add(a),e=Cg.bind(null,e,t,a),t.then(e,e))}function Cg(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,te===e&&(X&a)===a&&(oe===4||oe===3&&(X&62914560)===X&&300>ht()-Kc?!(J&2)&&gn(e,0):Ic|=a,hn===X&&(hn=0)),yt(e)}function jm(e,t){t===0&&(t=gd()),e=Sn(e,t),e!==null&&(Nl(e,t),yt(e))}function wg(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),jm(e,a)}function _g(e,t){var a=0;switch(e.tag){case 13:var n=e.stateNode,l=e.memoizedState;l!==null&&(a=l.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(_(314))}n!==null&&n.delete(t),jm(e,a)}function Ag(e,t){return mc(e,t)}var Pi=null,qa=null,Xr=!1,Vi=!1,Is=!1,Na=0;function yt(e){e!==qa&&e.next===null&&(qa===null?Pi=qa=e:qa=qa.next=e),Vi=!0,Xr||(Xr=!0,Og())}function Ul(e,t){if(!Is&&Vi){Is=!0;do for(var a=!1,n=Pi;n!==null;){if(e!==0){var l=n.pendingLanes;if(l===0)var i=0;else{var r=n.suspendedLanes,c=n.pingedLanes;i=(1<<31-Xe(42|e)+1)-1,i&=l&~(r&~c),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(a=!0,bu(n,i))}else i=X,i=es(n,n===te?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(i&3)||El(n,i)||(a=!0,bu(n,i));n=n.next}while(a);Is=!1}}function Rg(){Em()}function Em(){Vi=Xr=!1;var e=0;Na!==0&&(Hg()&&(e=Na),Na=0);for(var t=ht(),a=null,n=Pi;n!==null;){var l=n.next,i=Nm(n,t);i===0?(n.next=null,a===null?Pi=l:a.next=l,l===null&&(qa=a)):(a=n,(e!==0||i&3)&&(Vi=!0)),n=l}Ul(e)}function Nm(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var r=31-Xe(i),c=1<<r,o=l[r];o===-1?(!(c&a)||c&n)&&(l[r]=ap(c,t)):o<=t&&(e.expiredLanes|=c),i&=~c}if(t=te,a=X,a=es(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&($===2||$===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&bs(n),e.callbackNode=null,e.callbackPriority=0;if(!(a&3)||El(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&bs(n),pc(a)){case 2:case 8:a=md;break;case 32:a=ji;break;case 268435456:a=hd;break;default:a=ji}return n=Tm.bind(null,e),a=mc(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&bs(n),e.callbackPriority=2,e.callbackNode=null,2}function Tm(e,t){if(Ce!==0&&Ce!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(fs()&&e.callbackNode!==a)return null;var n=X;return n=es(e,e===te?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(dm(e,n,t),Nm(e,ht()),e.callbackNode!=null&&e.callbackNode===a?Tm.bind(null,e):null)}function bu(e,t){if(fs())return null;dm(e,t,!0)}function Og(){Vg(function(){J&6?mc(fd,Rg):Em()})}function Jc(){return Na===0&&(Na=pd()),Na}function Su(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ni(""+e)}function ju(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Dg(e,t,a,n,l){if(t==="submit"&&a&&a.stateNode===l){var i=Su((l[Be]||null).action),r=n.submitter;r&&(t=(t=r[Be]||null)?Su(t.formAction):r.getAttribute("formAction"),t!==null&&(i=t,r=null));var c=new ts("action","action",null,n,l);e.push({event:c,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Na!==0){var o=r?ju(l,r):new FormData(l);Ur(a,{pending:!0,data:o,method:l.method,action:i},null,o)}}else typeof i=="function"&&(c.preventDefault(),o=r?ju(l,r):new FormData(l),Ur(a,{pending:!0,data:o,method:l.method,action:i},i,o))},currentTarget:l}]})}}for(var Ks=0;Ks<jr.length;Ks++){var $s=jr[Ks],zg=$s.toLowerCase(),Ug=$s[0].toUpperCase()+$s.slice(1);ct(zg,"on"+Ug)}ct(Hd,"onAnimationEnd");ct(Pd,"onAnimationIteration");ct(Vd,"onAnimationStart");ct("dblclick","onDoubleClick");ct("focusin","onFocus");ct("focusout","onBlur");ct(Jp,"onTransitionRun");ct(Wp,"onTransitionStart");ct(Fp,"onTransitionCancel");ct(kd,"onTransitionEnd");cn("onMouseEnter",["mouseout","mouseover"]);cn("onMouseLeave",["mouseout","mouseover"]);cn("onPointerEnter",["pointerout","pointerover"]);cn("onPointerLeave",["pointerout","pointerover"]);Aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Aa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ml));function Cm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],l=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var r=n.length-1;0<=r;r--){var c=n[r],o=c.instance,u=c.currentTarget;if(c=c.listener,o!==i&&l.isPropagationStopped())break e;i=c,l.currentTarget=u;try{i(l)}catch(f){Ui(f)}l.currentTarget=null,i=o}else for(r=0;r<n.length;r++){if(c=n[r],o=c.instance,u=c.currentTarget,c=c.listener,o!==i&&l.isPropagationStopped())break e;i=c,l.currentTarget=u;try{i(l)}catch(f){Ui(f)}l.currentTarget=null,i=o}}}}function V(e,t){var a=t[pr];a===void 0&&(a=t[pr]=new Set);var n=e+"__bubble";a.has(n)||(wm(t,e,2,!1),a.add(n))}function Js(e,t,a){var n=0;t&&(n|=4),wm(a,e,n,t)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Wc(e){if(!e[Jl]){e[Jl]=!0,bd.forEach(function(a){a!=="selectionchange"&&(Mg.has(a)||Js(a,!1,e),Js(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jl]||(t[Jl]=!0,Js("selectionchange",!1,t))}}function wm(e,t,a,n){switch(Hm(t)){case 2:var l=cy;break;case 8:l=oy;break;default:l=ao}a=l.bind(null,t,a,e),l=void 0,!xr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),n?l!==void 0?e.addEventListener(t,a,{capture:!0,passive:l}):e.addEventListener(t,a,!0):l!==void 0?e.addEventListener(t,a,{passive:l}):e.addEventListener(t,a,!1)}function Ws(e,t,a,n,l){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var r=n.tag;if(r===3||r===4){var c=n.stateNode.containerInfo;if(c===l)break;if(r===4)for(r=n.return;r!==null;){var o=r.tag;if((o===3||o===4)&&r.stateNode.containerInfo===l)return;r=r.return}for(;c!==null;){if(r=Va(c),r===null)return;if(o=r.tag,o===5||o===6||o===26||o===27){n=i=r;continue e}c=c.parentNode}}n=n.return}_d(function(){var u=i,f=vc(a),m=[];e:{var d=Yd.get(e);if(d!==void 0){var h=ts,b=e;switch(e){case"keypress":if(ii(a)===0)break e;case"keydown":case"keyup":h=Ap;break;case"focusin":b="focus",h=_s;break;case"focusout":b="blur",h=_s;break;case"beforeblur":case"afterblur":h=_s;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=yp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Dp;break;case Hd:case Pd:case Vd:h=bp;break;case kd:h=Up;break;case"scroll":case"scrollend":h=pp;break;case"wheel":h=Lp;break;case"copy":case"cut":case"paste":h=jp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Oo;break;case"toggle":case"beforetoggle":h=qp}var j=(t&4)!==0,S=!j&&(e==="scroll"||e==="scrollend"),g=j?d!==null?d+"Capture":null:d;j=[];for(var p=u,y;p!==null;){var x=p;if(y=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||y===null||g===null||(x=rl(p,g),x!=null&&j.push(hl(p,x,y))),S)break;p=p.return}0<j.length&&(d=new h(d,b,null,a,f),m.push({event:d,listeners:j}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&a!==vr&&(b=a.relatedTarget||a.fromElement)&&(Va(b)||b[xn]))break e;if((h||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,h?(b=a.relatedTarget||a.toElement,h=u,b=b?Va(b):null,b!==null&&(S=Sl(b),j=b.tag,b!==S||j!==5&&j!==27&&j!==6)&&(b=null)):(h=null,b=u),h!==b)){if(j=Ao,x="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(j=Oo,x="onPointerLeave",g="onPointerEnter",p="pointer"),S=h==null?d:Yn(h),y=b==null?d:Yn(b),d=new j(x,p+"leave",h,a,f),d.target=S,d.relatedTarget=y,x=null,Va(f)===u&&(j=new j(g,p+"enter",b,a,f),j.target=y,j.relatedTarget=S,x=j),S=x,h&&b)t:{for(j=h,g=b,p=0,y=j;y;y=Ua(y))p++;for(y=0,x=g;x;x=Ua(x))y++;for(;0<p-y;)j=Ua(j),p--;for(;0<y-p;)g=Ua(g),y--;for(;p--;){if(j===g||g!==null&&j===g.alternate)break t;j=Ua(j),g=Ua(g)}j=null}else j=null;h!==null&&Eu(m,d,h,j,!1),b!==null&&S!==null&&Eu(m,S,b,j,!0)}}e:{if(d=u?Yn(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var T=Mo;else if(Uo(d))if(Ud)T=Ip;else{T=Qp;var N=Xp}else h=d.nodeName,!h||h.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?u&&yc(u.elementType)&&(T=Mo):T=Zp;if(T&&(T=T(e,u))){zd(m,T,a,f);break e}N&&N(e,d,u),e==="focusout"&&u&&d.type==="number"&&u.memoizedProps.value!=null&&yr(d,"number",d.value)}switch(N=u?Yn(u):window,e){case"focusin":(Uo(N)||N.contentEditable==="true")&&(Ga=N,br=u,In=null);break;case"focusout":In=br=Ga=null;break;case"mousedown":Sr=!0;break;case"contextmenu":case"mouseup":case"dragend":Sr=!1,Po(m,a,f);break;case"selectionchange":if($p)break;case"keydown":case"keyup":Po(m,a,f)}var C;if(Sc)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Ya?Od(e,a)&&(A="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(A="onCompositionStart");A&&(Rd&&a.locale!=="ko"&&(Ya||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ya&&(C=Ad()):($t=f,xc="value"in $t?$t.value:$t.textContent,Ya=!0)),N=ki(u,A),0<N.length&&(A=new Ro(A,e,null,a,f),m.push({event:A,listeners:N}),C?A.data=C:(C=Dd(a),C!==null&&(A.data=C)))),(C=Pp?Vp(e,a):kp(e,a))&&(A=ki(u,"onBeforeInput"),0<A.length&&(N=new Ro("onBeforeInput","beforeinput",null,a,f),m.push({event:N,listeners:A}),N.data=C)),Dg(m,e,u,a,f)}Cm(m,t)})}function hl(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ki(e,t){for(var a=t+"Capture",n=[];e!==null;){var l=e,i=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||i===null||(l=rl(e,a),l!=null&&n.unshift(hl(e,l,i)),l=rl(e,t),l!=null&&n.push(hl(e,l,i))),e.tag===3)return n;e=e.return}return[]}function Ua(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Eu(e,t,a,n,l){for(var i=t._reactName,r=[];a!==null&&a!==n;){var c=a,o=c.alternate,u=c.stateNode;if(c=c.tag,o!==null&&o===n)break;c!==5&&c!==26&&c!==27||u===null||(o=u,l?(u=rl(a,i),u!=null&&r.unshift(hl(a,u,o))):l||(u=rl(a,i),u!=null&&r.push(hl(a,u,o)))),a=a.return}r.length!==0&&e.push({event:t,listeners:r})}var Lg=/\r\n?/g,Bg=/\u0000|\uFFFD/g;function Nu(e){return(typeof e=="string"?e:""+e).replace(Lg,`
`).replace(Bg,"")}function _m(e,t){return t=Nu(t),Nu(e)===t}function ms(){}function W(e,t,a,n,l,i){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||on(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&on(e,""+n);break;case"className":Gl(e,"class",n);break;case"tabIndex":Gl(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Gl(e,a,n);break;case"style":wd(e,n,i);break;case"data":if(t!=="object"){Gl(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=ni(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(a==="formAction"?(t!=="input"&&W(e,t,"name",l.name,l,null),W(e,t,"formEncType",l.formEncType,l,null),W(e,t,"formMethod",l.formMethod,l,null),W(e,t,"formTarget",l.formTarget,l,null)):(W(e,t,"encType",l.encType,l,null),W(e,t,"method",l.method,l,null),W(e,t,"target",l.target,l,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=ni(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=ms);break;case"onScroll":n!=null&&V("scroll",e);break;case"onScrollEnd":n!=null&&V("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(_(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(_(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=ni(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":V("beforetoggle",e),V("toggle",e),ai(e,"popover",n);break;case"xlinkActuate":bt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":bt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":bt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":bt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":bt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":bt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":bt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":bt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":bt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":ai(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mp.get(a)||a,ai(e,a,n))}}function Qr(e,t,a,n,l,i){switch(a){case"style":wd(e,n,i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(_(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(_(60));e.innerHTML=a}}break;case"children":typeof n=="string"?on(e,n):(typeof n=="number"||typeof n=="bigint")&&on(e,""+n);break;case"onScroll":n!=null&&V("scroll",e);break;case"onScrollEnd":n!=null&&V("scrollend",e);break;case"onClick":n!=null&&(e.onclick=ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),t=a.slice(2,l?a.length-7:void 0),i=e[Be]||null,i=i!=null?i[a]:null,typeof i=="function"&&e.removeEventListener(t,i,l),typeof n=="function")){typeof i!="function"&&i!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,l);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):ai(e,a,n)}}}function we(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":V("error",e),V("load",e);var n=!1,l=!1,i;for(i in a)if(a.hasOwnProperty(i)){var r=a[i];if(r!=null)switch(i){case"src":n=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(_(137,t));default:W(e,t,i,r,a,null)}}l&&W(e,t,"srcSet",a.srcSet,a,null),n&&W(e,t,"src",a.src,a,null);return;case"input":V("invalid",e);var c=i=r=l=null,o=null,u=null;for(n in a)if(a.hasOwnProperty(n)){var f=a[n];if(f!=null)switch(n){case"name":l=f;break;case"type":r=f;break;case"checked":o=f;break;case"defaultChecked":u=f;break;case"value":i=f;break;case"defaultValue":c=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(_(137,t));break;default:W(e,t,n,f,a,null)}}Nd(e,i,c,o,u,r,l,!1),Ei(e);return;case"select":V("invalid",e),n=r=i=null;for(l in a)if(a.hasOwnProperty(l)&&(c=a[l],c!=null))switch(l){case"value":i=c;break;case"defaultValue":r=c;break;case"multiple":n=c;default:W(e,t,l,c,a,null)}t=i,a=r,e.multiple=!!n,t!=null?Wa(e,!!n,t,!1):a!=null&&Wa(e,!!n,a,!0);return;case"textarea":V("invalid",e),i=l=n=null;for(r in a)if(a.hasOwnProperty(r)&&(c=a[r],c!=null))switch(r){case"value":n=c;break;case"defaultValue":l=c;break;case"children":i=c;break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(_(91));break;default:W(e,t,r,c,a,null)}Cd(e,n,l,i),Ei(e);return;case"option":for(o in a)if(a.hasOwnProperty(o)&&(n=a[o],n!=null))switch(o){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:W(e,t,o,n,a,null)}return;case"dialog":V("beforetoggle",e),V("toggle",e),V("cancel",e),V("close",e);break;case"iframe":case"object":V("load",e);break;case"video":case"audio":for(n=0;n<ml.length;n++)V(ml[n],e);break;case"image":V("error",e),V("load",e);break;case"details":V("toggle",e);break;case"embed":case"source":case"link":V("error",e),V("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in a)if(a.hasOwnProperty(u)&&(n=a[u],n!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(_(137,t));default:W(e,t,u,n,a,null)}return;default:if(yc(t)){for(f in a)a.hasOwnProperty(f)&&(n=a[f],n!==void 0&&Qr(e,t,f,n,a,void 0));return}}for(c in a)a.hasOwnProperty(c)&&(n=a[c],n!=null&&W(e,t,c,n,a,null))}function qg(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,i=null,r=null,c=null,o=null,u=null,f=null;for(h in a){var m=a[h];if(a.hasOwnProperty(h)&&m!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":o=m;default:n.hasOwnProperty(h)||W(e,t,h,null,n,m)}}for(var d in n){var h=n[d];if(m=a[d],n.hasOwnProperty(d)&&(h!=null||m!=null))switch(d){case"type":i=h;break;case"name":l=h;break;case"checked":u=h;break;case"defaultChecked":f=h;break;case"value":r=h;break;case"defaultValue":c=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(_(137,t));break;default:h!==m&&W(e,t,d,h,n,m)}}gr(e,r,c,o,u,f,i,l);return;case"select":h=r=c=d=null;for(i in a)if(o=a[i],a.hasOwnProperty(i)&&o!=null)switch(i){case"value":break;case"multiple":h=o;default:n.hasOwnProperty(i)||W(e,t,i,null,n,o)}for(l in n)if(i=n[l],o=a[l],n.hasOwnProperty(l)&&(i!=null||o!=null))switch(l){case"value":d=i;break;case"defaultValue":c=i;break;case"multiple":r=i;default:i!==o&&W(e,t,l,i,n,o)}t=c,a=r,n=h,d!=null?Wa(e,!!a,d,!1):!!n!=!!a&&(t!=null?Wa(e,!!a,t,!0):Wa(e,!!a,a?[]:"",!1));return;case"textarea":h=d=null;for(c in a)if(l=a[c],a.hasOwnProperty(c)&&l!=null&&!n.hasOwnProperty(c))switch(c){case"value":break;case"children":break;default:W(e,t,c,null,n,l)}for(r in n)if(l=n[r],i=a[r],n.hasOwnProperty(r)&&(l!=null||i!=null))switch(r){case"value":d=l;break;case"defaultValue":h=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(_(91));break;default:l!==i&&W(e,t,r,l,n,i)}Td(e,d,h);return;case"option":for(var b in a)if(d=a[b],a.hasOwnProperty(b)&&d!=null&&!n.hasOwnProperty(b))switch(b){case"selected":e.selected=!1;break;default:W(e,t,b,null,n,d)}for(o in n)if(d=n[o],h=a[o],n.hasOwnProperty(o)&&d!==h&&(d!=null||h!=null))switch(o){case"selected":e.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:W(e,t,o,d,n,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var j in a)d=a[j],a.hasOwnProperty(j)&&d!=null&&!n.hasOwnProperty(j)&&W(e,t,j,null,n,d);for(u in n)if(d=n[u],h=a[u],n.hasOwnProperty(u)&&d!==h&&(d!=null||h!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(_(137,t));break;default:W(e,t,u,d,n,h)}return;default:if(yc(t)){for(var S in a)d=a[S],a.hasOwnProperty(S)&&d!==void 0&&!n.hasOwnProperty(S)&&Qr(e,t,S,void 0,n,d);for(f in n)d=n[f],h=a[f],!n.hasOwnProperty(f)||d===h||d===void 0&&h===void 0||Qr(e,t,f,d,n,h);return}}for(var g in a)d=a[g],a.hasOwnProperty(g)&&d!=null&&!n.hasOwnProperty(g)&&W(e,t,g,null,n,d);for(m in n)d=n[m],h=a[m],!n.hasOwnProperty(m)||d===h||d==null&&h==null||W(e,t,m,d,n,h)}var Zr=null,Ir=null;function Yi(e){return e.nodeType===9?e:e.ownerDocument}function Tu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Am(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Kr(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fs=null;function Hg(){var e=window.event;return e&&e.type==="popstate"?e===Fs?!1:(Fs=e,!0):(Fs=null,!1)}var Rm=typeof setTimeout=="function"?setTimeout:void 0,Pg=typeof clearTimeout=="function"?clearTimeout:void 0,Cu=typeof Promise=="function"?Promise:void 0,Vg=typeof queueMicrotask=="function"?queueMicrotask:typeof Cu<"u"?function(e){return Cu.resolve(null).then(e).catch(kg)}:Rm;function kg(e){setTimeout(function(){throw e})}function da(e){return e==="head"}function wu(e,t){var a=t,n=0,l=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(0<n&&8>n){a=n;var r=e.ownerDocument;if(a&1&&il(r.documentElement),a&2&&il(r.body),a&4)for(a=r.head,il(a),r=a.firstChild;r;){var c=r.nextSibling,o=r.nodeName;r[Tl]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&r.rel.toLowerCase()==="stylesheet"||a.removeChild(r),r=c}}if(l===0){e.removeChild(i),xl(t);return}l--}else a==="$"||a==="$?"||a==="$!"?l++:n=a.charCodeAt(0)-48;else n=0;a=i}while(a);xl(t)}function $r(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$r(a),gc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Yg(e,t,a,n){for(;e.nodeType===1;){var l=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Tl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=st(e.nextSibling),e===null)break}return null}function Gg(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=st(e.nextSibling),e===null))return null;return e}function Jr(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Xg(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function st(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Wr=null;function _u(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function Om(e,t,a){switch(t=Yi(a),e){case"html":if(e=t.documentElement,!e)throw Error(_(452));return e;case"head":if(e=t.head,!e)throw Error(_(453));return e;case"body":if(e=t.body,!e)throw Error(_(454));return e;default:throw Error(_(451))}}function il(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);gc(e)}var lt=new Map,Au=new Set;function Gi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Bt=K.d;K.d={f:Qg,r:Zg,D:Ig,C:Kg,L:$g,m:Jg,X:Fg,S:Wg,M:ey};function Qg(){var e=Bt.f(),t=us();return e||t}function Zg(e){var t=bn(e);t!==null&&t.tag===5&&t.type==="form"?Nf(t):Bt.r(e)}var En=typeof document>"u"?null:document;function Dm(e,t,a){var n=En;if(n&&typeof t=="string"&&t){var l=et(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),Au.has(l)||(Au.add(l),e={rel:e,crossOrigin:a,href:t},n.querySelector(l)===null&&(t=n.createElement("link"),we(t,"link",e),je(t),n.head.appendChild(t)))}}function Ig(e){Bt.D(e),Dm("dns-prefetch",e,null)}function Kg(e,t){Bt.C(e,t),Dm("preconnect",e,t)}function $g(e,t,a){Bt.L(e,t,a);var n=En;if(n&&e&&t){var l='link[rel="preload"][as="'+et(t)+'"]';t==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+et(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+et(a.imageSizes)+'"]')):l+='[href="'+et(e)+'"]';var i=l;switch(t){case"style":i=yn(e);break;case"script":i=Nn(e)}lt.has(i)||(e=ae({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),lt.set(i,e),n.querySelector(l)!==null||t==="style"&&n.querySelector(Ml(i))||t==="script"&&n.querySelector(Ll(i))||(t=n.createElement("link"),we(t,"link",e),je(t),n.head.appendChild(t)))}}function Jg(e,t){Bt.m(e,t);var a=En;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+et(n)+'"][href="'+et(e)+'"]',i=l;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Nn(e)}if(!lt.has(i)&&(e=ae({rel:"modulepreload",href:e},t),lt.set(i,e),a.querySelector(l)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(i)))return}n=a.createElement("link"),we(n,"link",e),je(n),a.head.appendChild(n)}}}function Wg(e,t,a){Bt.S(e,t,a);var n=En;if(n&&e){var l=Ja(n).hoistableStyles,i=yn(e);t=t||"default";var r=l.get(i);if(!r){var c={loading:0,preload:null};if(r=n.querySelector(Ml(i)))c.loading=5;else{e=ae({rel:"stylesheet",href:e,"data-precedence":t},a),(a=lt.get(i))&&Fc(e,a);var o=r=n.createElement("link");je(o),we(o,"link",e),o._p=new Promise(function(u,f){o.onload=u,o.onerror=f}),o.addEventListener("load",function(){c.loading|=1}),o.addEventListener("error",function(){c.loading|=2}),c.loading|=4,fi(r,t,n)}r={type:"stylesheet",instance:r,count:1,state:c},l.set(i,r)}}}function Fg(e,t){Bt.X(e,t);var a=En;if(a&&e){var n=Ja(a).hoistableScripts,l=Nn(e),i=n.get(l);i||(i=a.querySelector(Ll(l)),i||(e=ae({src:e,async:!0},t),(t=lt.get(l))&&eo(e,t),i=a.createElement("script"),je(i),we(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(l,i))}}function ey(e,t){Bt.M(e,t);var a=En;if(a&&e){var n=Ja(a).hoistableScripts,l=Nn(e),i=n.get(l);i||(i=a.querySelector(Ll(l)),i||(e=ae({src:e,async:!0,type:"module"},t),(t=lt.get(l))&&eo(e,t),i=a.createElement("script"),je(i),we(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(l,i))}}function Ru(e,t,a,n){var l=(l=Ft.current)?Gi(l):null;if(!l)throw Error(_(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=yn(a.href),a=Ja(l).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=yn(a.href);var i=Ja(l).hoistableStyles,r=i.get(e);if(r||(l=l.ownerDocument||l,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,r),(i=l.querySelector(Ml(e)))&&!i._p&&(r.instance=i,r.state.loading=5),lt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},lt.set(e,a),i||ty(l,e,a,r.state))),t&&n===null)throw Error(_(528,""));return r}if(t&&n!==null)throw Error(_(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Nn(a),a=Ja(l).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(_(444,e))}}function yn(e){return'href="'+et(e)+'"'}function Ml(e){return'link[rel="stylesheet"]['+e+"]"}function zm(e){return ae({},e,{"data-precedence":e.precedence,precedence:null})}function ty(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),we(t,"link",a),je(t),e.head.appendChild(t))}function Nn(e){return'[src="'+et(e)+'"]'}function Ll(e){return"script[async]"+e}function Ou(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+et(a.href)+'"]');if(n)return t.instance=n,je(n),n;var l=ae({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),je(n),we(n,"style",l),fi(n,a.precedence,e),t.instance=n;case"stylesheet":l=yn(a.href);var i=e.querySelector(Ml(l));if(i)return t.state.loading|=4,t.instance=i,je(i),i;n=zm(a),(l=lt.get(l))&&Fc(n,l),i=(e.ownerDocument||e).createElement("link"),je(i);var r=i;return r._p=new Promise(function(c,o){r.onload=c,r.onerror=o}),we(i,"link",n),t.state.loading|=4,fi(i,a.precedence,e),t.instance=i;case"script":return i=Nn(a.src),(l=e.querySelector(Ll(i)))?(t.instance=l,je(l),l):(n=a,(l=lt.get(i))&&(n=ae({},a),eo(n,l)),e=e.ownerDocument||e,l=e.createElement("script"),je(l),we(l,"link",n),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(_(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(n=t.instance,t.state.loading|=4,fi(n,a.precedence,e));return t.instance}function fi(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=n.length?n[n.length-1]:null,i=l,r=0;r<n.length;r++){var c=n[r];if(c.dataset.precedence===t)i=c;else if(i!==l)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Fc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function eo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var mi=null;function Du(e,t,a){if(mi===null){var n=new Map,l=mi=new Map;l.set(a,n)}else l=mi,n=l.get(a),n||(n=new Map,l.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),l=0;l<a.length;l++){var i=a[l];if(!(i[Tl]||i[_e]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var r=i.getAttribute(t)||"";r=e+r;var c=n.get(r);c?c.push(i):n.set(r,[i])}}return n}function zu(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function ay(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Um(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var pl=null;function ny(){}function ly(e,t,a){if(pl===null)throw Error(_(475));var n=pl;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var l=yn(a.href),i=e.querySelector(Ml(l));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=Xi.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=i,je(i);return}i=e.ownerDocument||e,a=zm(a),(l=lt.get(l))&&Fc(a,l),i=i.createElement("link"),je(i);var r=i;r._p=new Promise(function(c,o){r.onload=c,r.onerror=o}),we(i,"link",a),t.instance=i}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(n.count++,t=Xi.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function iy(){if(pl===null)throw Error(_(475));var e=pl;return e.stylesheets&&e.count===0&&Fr(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Fr(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Xi(){if(this.count--,this.count===0){if(this.stylesheets)Fr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Qi=null;function Fr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Qi=new Map,t.forEach(sy,e),Qi=null,Xi.call(e))}function sy(e,t){if(!(t.state.loading&4)){var a=Qi.get(e);if(a)var n=a.get(null);else{a=new Map,Qi.set(e,a);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<l.length;i++){var r=l[i];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(a.set(r.dataset.precedence,r),n=r)}n&&a.set(null,n)}l=t.instance,r=l.getAttribute("data-precedence"),i=a.get(r)||n,i===n&&a.set(null,l),a.set(r,l),this.count++,n=Xi.bind(this),l.addEventListener("load",n),l.addEventListener("error",n),i?i.parentNode.insertBefore(l,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var gl={$$typeof:Nt,Provider:null,Consumer:null,_currentValue:va,_currentValue2:va,_threadCount:0};function ry(e,t,a,n,l,i,r,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ss(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ss(0),this.hiddenUpdates=Ss(null),this.identifierPrefix=n,this.onUncaughtError=l,this.onCaughtError=i,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function Mm(e,t,a,n,l,i,r,c,o,u,f,m){return e=new ry(e,t,a,r,c,o,u,m),t=1,i===!0&&(t|=24),i=Ye(3,null,null,t),e.current=i,i.stateNode=e,t=_c(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:n,isDehydrated:a,cache:t},Rc(i),e}function Lm(e){return e?(e=Za,e):Za}function Bm(e,t,a,n,l,i){l=Lm(l),n.context===null?n.context=l:n.pendingContext=l,n=ea(t),n.payload={element:a},i=i===void 0?null:i,i!==null&&(n.callback=i),a=ta(e,n,t),a!==null&&(Ze(a,e,t),Jn(a,e,t))}function Uu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function to(e,t){Uu(e,t),(e=e.alternate)&&Uu(e,t)}function qm(e){if(e.tag===13){var t=Sn(e,67108864);t!==null&&Ze(t,e,67108864),to(e,67108864)}}var Zi=!0;function cy(e,t,a,n){var l=q.T;q.T=null;var i=K.p;try{K.p=2,ao(e,t,a,n)}finally{K.p=i,q.T=l}}function oy(e,t,a,n){var l=q.T;q.T=null;var i=K.p;try{K.p=8,ao(e,t,a,n)}finally{K.p=i,q.T=l}}function ao(e,t,a,n){if(Zi){var l=ec(n);if(l===null)Ws(e,t,n,Ii,a),Mu(e,n);else if(dy(l,e,t,a,n))n.stopPropagation();else if(Mu(e,n),t&4&&-1<uy.indexOf(e)){for(;l!==null;){var i=bn(l);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var r=pa(i.pendingLanes);if(r!==0){var c=i;for(c.pendingLanes|=2,c.entangledLanes|=2;r;){var o=1<<31-Xe(r);c.entanglements[1]|=o,r&=~o}yt(i),!(J&6)&&(qi=ht()+500,Ul(0))}}break;case 13:c=Sn(i,2),c!==null&&Ze(c,i,2),us(),to(i,2)}if(i=ec(n),i===null&&Ws(e,t,n,Ii,a),i===l)break;l=i}l!==null&&n.stopPropagation()}else Ws(e,t,n,null,a)}}function ec(e){return e=vc(e),no(e)}var Ii=null;function no(e){if(Ii=null,e=Va(e),e!==null){var t=Sl(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=cd(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ii=e,null}function Hm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kh()){case fd:return 2;case md:return 8;case ji:case $h:return 32;case hd:return 268435456;default:return 32}default:return 32}}var tc=!1,la=null,ia=null,sa=null,yl=new Map,vl=new Map,It=[],uy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mu(e,t){switch(e){case"focusin":case"focusout":la=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":sa=null;break;case"pointerover":case"pointerout":yl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(t.pointerId)}}function Bn(e,t,a,n,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:i,targetContainers:[l]},t!==null&&(t=bn(t),t!==null&&qm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function dy(e,t,a,n,l){switch(t){case"focusin":return la=Bn(la,e,t,a,n,l),!0;case"dragenter":return ia=Bn(ia,e,t,a,n,l),!0;case"mouseover":return sa=Bn(sa,e,t,a,n,l),!0;case"pointerover":var i=l.pointerId;return yl.set(i,Bn(yl.get(i)||null,e,t,a,n,l)),!0;case"gotpointercapture":return i=l.pointerId,vl.set(i,Bn(vl.get(i)||null,e,t,a,n,l)),!0}return!1}function Pm(e){var t=Va(e.target);if(t!==null){var a=Sl(t);if(a!==null){if(t=a.tag,t===13){if(t=cd(a),t!==null){e.blockedOn=t,lp(e.priority,function(){if(a.tag===13){var n=Qe();n=hc(n);var l=Sn(a,n);l!==null&&Ze(l,a,n),to(a,n)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=ec(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);vr=n,a.target.dispatchEvent(n),vr=null}else return t=bn(a),t!==null&&qm(t),e.blockedOn=a,!1;t.shift()}return!0}function Lu(e,t,a){hi(e)&&a.delete(t)}function fy(){tc=!1,la!==null&&hi(la)&&(la=null),ia!==null&&hi(ia)&&(ia=null),sa!==null&&hi(sa)&&(sa=null),yl.forEach(Lu),vl.forEach(Lu)}function Wl(e,t){e.blockedOn===t&&(e.blockedOn=null,tc||(tc=!0,ve.unstable_scheduleCallback(ve.unstable_NormalPriority,fy)))}var Fl=null;function Bu(e){Fl!==e&&(Fl=e,ve.unstable_scheduleCallback(ve.unstable_NormalPriority,function(){Fl===e&&(Fl=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],l=e[t+2];if(typeof n!="function"){if(no(n||a)===null)continue;break}var i=bn(a);i!==null&&(e.splice(t,3),t-=3,Ur(i,{pending:!0,data:l,method:a.method,action:n},n,l))}}))}function xl(e){function t(o){return Wl(o,e)}la!==null&&Wl(la,e),ia!==null&&Wl(ia,e),sa!==null&&Wl(sa,e),yl.forEach(t),vl.forEach(t);for(var a=0;a<It.length;a++){var n=It[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<It.length&&(a=It[0],a.blockedOn===null);)Pm(a),a.blockedOn===null&&It.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var l=a[n],i=a[n+1],r=l[Be]||null;if(typeof i=="function")r||Bu(a);else if(r){var c=null;if(i&&i.hasAttribute("formAction")){if(l=i,r=i[Be]||null)c=r.formAction;else if(no(l)!==null)continue}else c=r.action;typeof c=="function"?a[n+1]=c:(a.splice(n,3),n-=3),Bu(a)}}}function lo(e){this._internalRoot=e}hs.prototype.render=lo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_(409));var a=t.current,n=Qe();Bm(a,n,e,t,null,null)};hs.prototype.unmount=lo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bm(e.current,2,null,e,null,null),us(),t[xn]=null}};function hs(e){this._internalRoot=e}hs.prototype.unstable_scheduleHydration=function(e){if(e){var t=xd();e={blockedOn:null,target:e,priority:t};for(var a=0;a<It.length&&t!==0&&t<It[a].priority;a++);It.splice(a,0,e),a===0&&Pm(e)}};var qu=sd.version;if(qu!=="19.1.1")throw Error(_(527,qu,"19.1.1"));K.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_(188)):(e=Object.keys(e).join(","),Error(_(268,e)));return e=kh(t),e=e!==null?od(e):null,e=e===null?null:e.stateNode,e};var my={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ei=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ei.isDisabled&&ei.supportsFiber)try{jl=ei.inject(my),Ge=ei}catch{}}Wi.createRoot=function(e,t){if(!rd(e))throw Error(_(299));var a=!1,n="",l=Mf,i=Lf,r=Bf,c=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(c=t.unstable_transitionCallbacks)),t=Mm(e,1,!1,null,null,a,n,l,i,r,c,null),e[xn]=t.current,Wc(e),new lo(t)};Wi.hydrateRoot=function(e,t,a){if(!rd(e))throw Error(_(299));var n=!1,l="",i=Mf,r=Lf,c=Bf,o=null,u=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(r=a.onCaughtError),a.onRecoverableError!==void 0&&(c=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(o=a.unstable_transitionCallbacks),a.formState!==void 0&&(u=a.formState)),t=Mm(e,1,!0,t,a??null,n,l,i,r,c,o,u),t.context=Lm(null),a=t.current,n=Qe(),n=hc(n),l=ea(n),l.callback=null,ta(a,l,n),a=n,t.current.lanes=a,Nl(t,a),yt(t),e[xn]=t.current,Wc(e),new hs(t)};Wi.version="19.1.1";function Vm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vm)}catch(e){console.error(e)}}Vm(),ed.exports=Wi;var hy=ed.exports;/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Hu="popstate";function py(e={}){function t(n,l){let{pathname:i,search:r,hash:c}=n.location;return ac("",{pathname:i,search:r,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(n,l){return typeof l=="string"?l:bl(l)}return yy(t,a,null,e)}function se(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function rt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gy(){return Math.random().toString(36).substring(2,10)}function Pu(e,t){return{usr:e.state,key:e.key,idx:t}}function ac(e,t,a=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Tn(t):t,state:a,key:t&&t.key||n||gy()}}function bl({pathname:e="/",search:t="",hash:a=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Tn(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function yy(e,t,a,n={}){let{window:l=document.defaultView,v5Compat:i=!1}=n,r=l.history,c="POP",o=null,u=f();u==null&&(u=0,r.replaceState({...r.state,idx:u},""));function f(){return(r.state||{idx:null}).idx}function m(){c="POP";let S=f(),g=S==null?null:S-u;u=S,o&&o({action:c,location:j.location,delta:g})}function d(S,g){c="PUSH";let p=ac(j.location,S,g);u=f()+1;let y=Pu(p,u),x=j.createHref(p);try{r.pushState(y,"",x)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;l.location.assign(x)}i&&o&&o({action:c,location:j.location,delta:1})}function h(S,g){c="REPLACE";let p=ac(j.location,S,g);u=f();let y=Pu(p,u),x=j.createHref(p);r.replaceState(y,"",x),i&&o&&o({action:c,location:j.location,delta:0})}function b(S){return vy(S)}let j={get action(){return c},get location(){return e(l,r)},listen(S){if(o)throw new Error("A history only accepts one active listener");return l.addEventListener(Hu,m),o=S,()=>{l.removeEventListener(Hu,m),o=null}},createHref(S){return t(l,S)},createURL:b,encodeLocation(S){let g=b(S);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:h,go(S){return r.go(S)}};return j}function vy(e,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),se(a,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:bl(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=a+n),new URL(n,a)}function km(e,t,a="/"){return xy(e,t,a,!1)}function xy(e,t,a,n){let l=typeof t=="string"?Tn(t):t,i=Lt(l.pathname||"/",a);if(i==null)return null;let r=Ym(e);by(r);let c=null;for(let o=0;c==null&&o<r.length;++o){let u=Oy(i);c=Ay(r[o],u,n)}return c}function Ym(e,t=[],a=[],n="",l=!1){let i=(r,c,o=l,u)=>{let f={relativePath:u===void 0?r.path||"":u,caseSensitive:r.caseSensitive===!0,childrenIndex:c,route:r};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&o)return;se(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let m=Ot([n,f.relativePath]),d=a.concat(f);r.children&&r.children.length>0&&(se(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Ym(r.children,t,d,m,o)),!(r.path==null&&!r.index)&&t.push({path:m,score:wy(m,r.index),routesMeta:d})};return e.forEach((r,c)=>{var o;if(r.path===""||!((o=r.path)!=null&&o.includes("?")))i(r,c);else for(let u of Gm(r.path))i(r,c,!0,u)}),t}function Gm(e){let t=e.split("/");if(t.length===0)return[];let[a,...n]=t,l=a.endsWith("?"),i=a.replace(/\?$/,"");if(n.length===0)return l?[i,""]:[i];let r=Gm(n.join("/")),c=[];return c.push(...r.map(o=>o===""?i:[i,o].join("/"))),l&&c.push(...r),c.map(o=>e.startsWith("/")&&o===""?"/":o)}function by(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:_y(t.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}var Sy=/^:[\w-]+$/,jy=3,Ey=2,Ny=1,Ty=10,Cy=-2,Vu=e=>e==="*";function wy(e,t){let a=e.split("/"),n=a.length;return a.some(Vu)&&(n+=Cy),t&&(n+=Ey),a.filter(l=>!Vu(l)).reduce((l,i)=>l+(Sy.test(i)?jy:i===""?Ny:Ty),n)}function _y(e,t){return e.length===t.length&&e.slice(0,-1).every((n,l)=>n===t[l])?e[e.length-1]-t[t.length-1]:0}function Ay(e,t,a=!1){let{routesMeta:n}=e,l={},i="/",r=[];for(let c=0;c<n.length;++c){let o=n[c],u=c===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",m=Ki({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},f),d=o.route;if(!m&&u&&a&&!n[n.length-1].route.index&&(m=Ki({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},f)),!m)return null;Object.assign(l,m.params),r.push({params:l,pathname:Ot([i,m.pathname]),pathnameBase:My(Ot([i,m.pathnameBase])),route:d}),m.pathnameBase!=="/"&&(i=Ot([i,m.pathnameBase]))}return r}function Ki(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,n]=Ry(e.path,e.caseSensitive,e.end),l=t.match(a);if(!l)return null;let i=l[0],r=i.replace(/(.)\/+$/,"$1"),c=l.slice(1);return{params:n.reduce((u,{paramName:f,isOptional:m},d)=>{if(f==="*"){let b=c[d]||"";r=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const h=c[d];return m&&!h?u[f]=void 0:u[f]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:r,pattern:e}}function Ry(e,t=!1,a=!0){rt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,c,o)=>(n.push({paramName:c,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),n]}function Oy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return rt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Lt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,n=e.charAt(a);return n&&n!=="/"?null:e.slice(a)||"/"}function Dy(e,t="/"){let{pathname:a,search:n="",hash:l=""}=typeof e=="string"?Tn(e):e;return{pathname:a?a.startsWith("/")?a:zy(a,t):t,search:Ly(n),hash:By(l)}}function zy(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?a.length>1&&a.pop():l!=="."&&a.push(l)}),a.length>1?a.join("/"):"/"}function er(e,t,a,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Uy(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function io(e){let t=Uy(e);return t.map((a,n)=>n===t.length-1?a.pathname:a.pathnameBase)}function so(e,t,a,n=!1){let l;typeof e=="string"?l=Tn(e):(l={...e},se(!l.pathname||!l.pathname.includes("?"),er("?","pathname","search",l)),se(!l.pathname||!l.pathname.includes("#"),er("#","pathname","hash",l)),se(!l.search||!l.search.includes("#"),er("#","search","hash",l)));let i=e===""||l.pathname==="",r=i?"/":l.pathname,c;if(r==null)c=a;else{let m=t.length-1;if(!n&&r.startsWith("..")){let d=r.split("/");for(;d[0]==="..";)d.shift(),m-=1;l.pathname=d.join("/")}c=m>=0?t[m]:"/"}let o=Dy(l,c),u=r&&r!=="/"&&r.endsWith("/"),f=(i||r===".")&&a.endsWith("/");return!o.pathname.endsWith("/")&&(u||f)&&(o.pathname+="/"),o}var Ot=e=>e.join("/").replace(/\/\/+/g,"/"),My=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ly=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,By=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Xm=["POST","PUT","PATCH","DELETE"];new Set(Xm);var Hy=["GET",...Xm];new Set(Hy);var Cn=v.createContext(null);Cn.displayName="DataRouter";var ps=v.createContext(null);ps.displayName="DataRouterState";v.createContext(!1);var Qm=v.createContext({isTransitioning:!1});Qm.displayName="ViewTransition";var Py=v.createContext(new Map);Py.displayName="Fetchers";var Vy=v.createContext(null);Vy.displayName="Await";var ot=v.createContext(null);ot.displayName="Navigation";var Bl=v.createContext(null);Bl.displayName="Location";var vt=v.createContext({outlet:null,matches:[],isDataRoute:!1});vt.displayName="Route";var ro=v.createContext(null);ro.displayName="RouteError";function ky(e,{relative:t}={}){se(wn(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:n}=v.useContext(ot),{hash:l,pathname:i,search:r}=ql(e,{relative:t}),c=i;return a!=="/"&&(c=i==="/"?a:Ot([a,i])),n.createHref({pathname:c,search:r,hash:l})}function wn(){return v.useContext(Bl)!=null}function qt(){return se(wn(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Bl).location}var Zm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Im(e){v.useContext(ot).static||v.useLayoutEffect(e)}function gs(){let{isDataRoute:e}=v.useContext(vt);return e?tv():Yy()}function Yy(){se(wn(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(Cn),{basename:t,navigator:a}=v.useContext(ot),{matches:n}=v.useContext(vt),{pathname:l}=qt(),i=JSON.stringify(io(n)),r=v.useRef(!1);return Im(()=>{r.current=!0}),v.useCallback((o,u={})=>{if(rt(r.current,Zm),!r.current)return;if(typeof o=="number"){a.go(o);return}let f=so(o,JSON.parse(i),l,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ot([t,f.pathname])),(u.replace?a.replace:a.push)(f,u.state,u)},[t,a,i,l,e])}v.createContext(null);function ql(e,{relative:t}={}){let{matches:a}=v.useContext(vt),{pathname:n}=qt(),l=JSON.stringify(io(a));return v.useMemo(()=>so(e,JSON.parse(l),n,t==="path"),[e,l,n,t])}function Gy(e,t){return Km(e,t)}function Km(e,t,a,n,l){var p;se(wn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(ot),{matches:r}=v.useContext(vt),c=r[r.length-1],o=c?c.params:{},u=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let y=m&&m.path||"";$m(u,!m||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let d=qt(),h;if(t){let y=typeof t=="string"?Tn(t):t;se(f==="/"||((p=y.pathname)==null?void 0:p.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${y.pathname}" was given in the \`location\` prop.`),h=y}else h=d;let b=h.pathname||"/",j=b;if(f!=="/"){let y=f.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(y.length).join("/")}let S=km(e,{pathname:j});rt(m||S!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),rt(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=Ky(S&&S.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:Ot([f,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?f:Ot([f,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),r,a,n,l);return t&&g?v.createElement(Bl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},g):g}function Xy(){let e=ev(),t=qy(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},r=null;return console.error("Error handled by React Router default ErrorBoundary:",e),r=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),a?v.createElement("pre",{style:l},a):null,r)}var Qy=v.createElement(Xy,null),Zy=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(vt.Provider,{value:this.props.routeContext},v.createElement(ro.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Iy({routeContext:e,match:t,children:a}){let n=v.useContext(Cn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(vt.Provider,{value:e},a)}function Ky(e,t=[],a=null,n=null,l=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,r=a==null?void 0:a.errors;if(r!=null){let u=i.findIndex(f=>f.route.id&&(r==null?void 0:r[f.route.id])!==void 0);se(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,o=-1;if(a)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(o=u),f.route.id){let{loaderData:m,errors:d}=a,h=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!d||d[f.route.id]===void 0);if(f.route.lazy||h){c=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((u,f,m)=>{let d,h=!1,b=null,j=null;a&&(d=r&&f.route.id?r[f.route.id]:void 0,b=f.route.errorElement||Qy,c&&(o<0&&m===0?($m("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,j=null):o===m&&(h=!0,j=f.route.hydrateFallbackElement||null)));let S=t.concat(i.slice(0,m+1)),g=()=>{let p;return d?p=b:h?p=j:f.route.Component?p=v.createElement(f.route.Component,null):f.route.element?p=f.route.element:p=u,v.createElement(Iy,{match:f,routeContext:{outlet:u,matches:S,isDataRoute:a!=null},children:p})};return a&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?v.createElement(Zy,{location:a.location,revalidation:a.revalidation,component:b,error:d,children:g(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):g()},null)}function co(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $y(e){let t=v.useContext(Cn);return se(t,co(e)),t}function Jy(e){let t=v.useContext(ps);return se(t,co(e)),t}function Wy(e){let t=v.useContext(vt);return se(t,co(e)),t}function oo(e){let t=Wy(e),a=t.matches[t.matches.length-1];return se(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function Fy(){return oo("useRouteId")}function ev(){var n;let e=v.useContext(ro),t=Jy("useRouteError"),a=oo("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[a]}function tv(){let{router:e}=$y("useNavigate"),t=oo("useNavigate"),a=v.useRef(!1);return Im(()=>{a.current=!0}),v.useCallback(async(l,i={})=>{rt(a.current,Zm),a.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...i}))},[e,t])}var ku={};function $m(e,t,a){!t&&!ku[e]&&(ku[e]=!0,rt(!1,a))}v.memo(av);function av({routes:e,future:t,state:a,unstable_onError:n}){return Km(e,void 0,a,n,t)}function pi({to:e,replace:t,state:a,relative:n}){se(wn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=v.useContext(ot);rt(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(vt),{pathname:r}=qt(),c=gs(),o=so(e,io(i),r,n==="path"),u=JSON.stringify(o);return v.useEffect(()=>{c(JSON.parse(u),{replace:t,state:a,relative:n})},[c,u,n,t,a]),null}function de(e){se(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nv({basename:e="/",children:t=null,location:a,navigationType:n="POP",navigator:l,static:i=!1}){se(!wn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let r=e.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:r,navigator:l,static:i,future:{}}),[r,l,i]);typeof a=="string"&&(a=Tn(a));let{pathname:o="/",search:u="",hash:f="",state:m=null,key:d="default"}=a,h=v.useMemo(()=>{let b=Lt(o,r);return b==null?null:{location:{pathname:b,search:u,hash:f,state:m,key:d},navigationType:n}},[r,o,u,f,m,d,n]);return rt(h!=null,`<Router basename="${r}"> is not able to match the URL "${o}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:v.createElement(ot.Provider,{value:c},v.createElement(Bl.Provider,{children:t,value:h}))}function lv({children:e,location:t}){return Gy(nc(e),t)}function nc(e,t=[]){let a=[];return v.Children.forEach(e,(n,l)=>{if(!v.isValidElement(n))return;let i=[...t,l];if(n.type===v.Fragment){a.push.apply(a,nc(n.props.children,i));return}se(n.type===de,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),se(!n.props.index||!n.props.children,"An index route cannot have child routes.");let r={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(r.children=nc(n.props.children,i)),a.push(r)}),a}var gi="get",yi="application/x-www-form-urlencoded";function ys(e){return e!=null&&typeof e.tagName=="string"}function iv(e){return ys(e)&&e.tagName.toLowerCase()==="button"}function sv(e){return ys(e)&&e.tagName.toLowerCase()==="form"}function rv(e){return ys(e)&&e.tagName.toLowerCase()==="input"}function cv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ov(e,t){return e.button===0&&(!t||t==="_self")&&!cv(e)}var ti=null;function uv(){if(ti===null)try{new FormData(document.createElement("form"),0),ti=!1}catch{ti=!0}return ti}var dv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tr(e){return e!=null&&!dv.has(e)?(rt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yi}"`),null):e}function fv(e,t){let a,n,l,i,r;if(sv(e)){let c=e.getAttribute("action");n=c?Lt(c,t):null,a=e.getAttribute("method")||gi,l=tr(e.getAttribute("enctype"))||yi,i=new FormData(e)}else if(iv(e)||rv(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||c.getAttribute("action");if(n=o?Lt(o,t):null,a=e.getAttribute("formmethod")||c.getAttribute("method")||gi,l=tr(e.getAttribute("formenctype"))||tr(c.getAttribute("enctype"))||yi,i=new FormData(c,e),!uv()){let{name:u,type:f,value:m}=e;if(f==="image"){let d=u?`${u}.`:"";i.append(`${d}x`,"0"),i.append(`${d}y`,"0")}else u&&i.append(u,m)}}else{if(ys(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=gi,n=null,l=yi,r=e}return i&&l==="text/plain"&&(r=i,i=void 0),{action:n,method:a.toLowerCase(),encType:l,formData:i,body:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function mv(e,t,a){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${a}`:t&&Lt(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${a}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${a}`,n}async function hv(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pv(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function gv(e,t,a){let n=await Promise.all(e.map(async l=>{let i=t.routes[l.route.id];if(i){let r=await hv(i,a);return r.links?r.links():[]}return[]}));return bv(n.flat(1).filter(pv).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Yu(e,t,a,n,l,i){let r=(o,u)=>a[u]?o.route.id!==a[u].route.id:!0,c=(o,u)=>{var f;return a[u].pathname!==o.pathname||((f=a[u].route.path)==null?void 0:f.endsWith("*"))&&a[u].params["*"]!==o.params["*"]};return i==="assets"?t.filter((o,u)=>r(o,u)||c(o,u)):i==="data"?t.filter((o,u)=>{var m;let f=n.routes[o.route.id];if(!f||!f.hasLoader)return!1;if(r(o,u)||c(o,u))return!0;if(o.route.shouldRevalidate){let d=o.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((m=a[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:o.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function yv(e,t,{includeHydrateFallback:a}={}){return vv(e.map(n=>{let l=t.routes[n.route.id];if(!l)return[];let i=[l.module];return l.clientActionModule&&(i=i.concat(l.clientActionModule)),l.clientLoaderModule&&(i=i.concat(l.clientLoaderModule)),a&&l.hydrateFallbackModule&&(i=i.concat(l.hydrateFallbackModule)),l.imports&&(i=i.concat(l.imports)),i}).flat(1))}function vv(e){return[...new Set(e)]}function xv(e){let t={},a=Object.keys(e).sort();for(let n of a)t[n]=e[n];return t}function bv(e,t){let a=new Set;return new Set(t),e.reduce((n,l)=>{let i=JSON.stringify(xv(l));return a.has(i)||(a.add(i),n.push({key:i,link:l})),n},[])}function Jm(){let e=v.useContext(Cn);return uo(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Sv(){let e=v.useContext(ps);return uo(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var fo=v.createContext(void 0);fo.displayName="FrameworkContext";function Wm(){let e=v.useContext(fo);return uo(e,"You must render this element inside a <HydratedRouter> element"),e}function jv(e,t){let a=v.useContext(fo),[n,l]=v.useState(!1),[i,r]=v.useState(!1),{onFocus:c,onBlur:o,onMouseEnter:u,onMouseLeave:f,onTouchStart:m}=t,d=v.useRef(null);v.useEffect(()=>{if(e==="render"&&r(!0),e==="viewport"){let j=g=>{g.forEach(p=>{r(p.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return d.current&&S.observe(d.current),()=>{S.disconnect()}}},[e]),v.useEffect(()=>{if(n){let j=setTimeout(()=>{r(!0)},100);return()=>{clearTimeout(j)}}},[n]);let h=()=>{l(!0)},b=()=>{l(!1),r(!1)};return a?e!=="intent"?[i,d,{}]:[i,d,{onFocus:qn(c,h),onBlur:qn(o,b),onMouseEnter:qn(u,h),onMouseLeave:qn(f,b),onTouchStart:qn(m,h)}]:[!1,d,{}]}function qn(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function Ev({page:e,...t}){let{router:a}=Jm(),n=v.useMemo(()=>km(a.routes,e,a.basename),[a.routes,e,a.basename]);return n?v.createElement(Tv,{page:e,matches:n,...t}):null}function Nv(e){let{manifest:t,routeModules:a}=Wm(),[n,l]=v.useState([]);return v.useEffect(()=>{let i=!1;return gv(e,t,a).then(r=>{i||l(r)}),()=>{i=!0}},[e,t,a]),n}function Tv({page:e,matches:t,...a}){let n=qt(),{manifest:l,routeModules:i}=Wm(),{basename:r}=Jm(),{loaderData:c,matches:o}=Sv(),u=v.useMemo(()=>Yu(e,t,o,l,n,"data"),[e,t,o,l,n]),f=v.useMemo(()=>Yu(e,t,o,l,n,"assets"),[e,t,o,l,n]),m=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let b=new Set,j=!1;if(t.forEach(g=>{var y;let p=l.routes[g.route.id];!p||!p.hasLoader||(!u.some(x=>x.route.id===g.route.id)&&g.route.id in c&&((y=i[g.route.id])!=null&&y.shouldRevalidate)||p.hasClientLoader?j=!0:b.add(g.route.id))}),b.size===0)return[];let S=mv(e,r,"data");return j&&b.size>0&&S.searchParams.set("_routes",t.filter(g=>b.has(g.route.id)).map(g=>g.route.id).join(",")),[S.pathname+S.search]},[r,c,n,l,u,t,e,i]),d=v.useMemo(()=>yv(f,l),[f,l]),h=Nv(f);return v.createElement(v.Fragment,null,m.map(b=>v.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...a})),d.map(b=>v.createElement("link",{key:b,rel:"modulepreload",href:b,...a})),h.map(({key:b,link:j})=>v.createElement("link",{key:b,nonce:a.nonce,...j})))}function Cv(...e){return t=>{e.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var Fm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Fm&&(window.__reactRouterVersion="7.9.1")}catch{}function wv({basename:e,children:t,window:a}){let n=v.useRef();n.current==null&&(n.current=py({window:a,v5Compat:!0}));let l=n.current,[i,r]=v.useState({action:l.action,location:l.location}),c=v.useCallback(o=>{v.startTransition(()=>r(o))},[r]);return v.useLayoutEffect(()=>l.listen(c),[l,c]),v.createElement(nv,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:l})}var eh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mo=v.forwardRef(function({onClick:t,discover:a="render",prefetch:n="none",relative:l,reloadDocument:i,replace:r,state:c,target:o,to:u,preventScrollReset:f,viewTransition:m,...d},h){let{basename:b}=v.useContext(ot),j=typeof u=="string"&&eh.test(u),S,g=!1;if(typeof u=="string"&&j&&(S=u,Fm))try{let M=new URL(window.location.href),E=u.startsWith("//")?new URL(M.protocol+u):new URL(u),w=Lt(E.pathname,b);E.origin===M.origin&&w!=null?u=w+E.search+E.hash:g=!0}catch{rt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let p=ky(u,{relative:l}),[y,x,T]=jv(n,d),N=Ov(u,{replace:r,state:c,target:o,preventScrollReset:f,relative:l,viewTransition:m});function C(M){t&&t(M),M.defaultPrevented||N(M)}let A=v.createElement("a",{...d,...T,href:S||p,onClick:g||i?t:C,ref:Cv(h,x),target:o,"data-discover":!j&&a==="render"?"true":void 0});return y&&!j?v.createElement(v.Fragment,null,A,v.createElement(Ev,{page:p})):A});mo.displayName="Link";var _v=v.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:n="",end:l=!1,style:i,to:r,viewTransition:c,children:o,...u},f){let m=ql(r,{relative:u.relative}),d=qt(),h=v.useContext(ps),{navigator:b,basename:j}=v.useContext(ot),S=h!=null&&Lv(m)&&c===!0,g=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,p=d.pathname,y=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;a||(p=p.toLowerCase(),y=y?y.toLowerCase():null,g=g.toLowerCase()),y&&j&&(y=Lt(y,j)||y);const x=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let T=p===g||!l&&p.startsWith(g)&&p.charAt(x)==="/",N=y!=null&&(y===g||!l&&y.startsWith(g)&&y.charAt(g.length)==="/"),C={isActive:T,isPending:N,isTransitioning:S},A=T?t:void 0,M;typeof n=="function"?M=n(C):M=[n,T?"active":null,N?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let E=typeof i=="function"?i(C):i;return v.createElement(mo,{...u,"aria-current":A,className:M,ref:f,style:E,to:r,viewTransition:c},typeof o=="function"?o(C):o)});_v.displayName="NavLink";var Av=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:a,reloadDocument:n,replace:l,state:i,method:r=gi,action:c,onSubmit:o,relative:u,preventScrollReset:f,viewTransition:m,...d},h)=>{let b=Uv(),j=Mv(c,{relative:u}),S=r.toLowerCase()==="get"?"get":"post",g=typeof c=="string"&&eh.test(c),p=y=>{if(o&&o(y),y.defaultPrevented)return;y.preventDefault();let x=y.nativeEvent.submitter,T=(x==null?void 0:x.getAttribute("formmethod"))||r;b(x||y.currentTarget,{fetcherKey:t,method:T,navigate:a,replace:l,state:i,relative:u,preventScrollReset:f,viewTransition:m})};return v.createElement("form",{ref:h,method:S,action:j,onSubmit:n?o:p,...d,"data-discover":!g&&e==="render"?"true":void 0})});Av.displayName="Form";function Rv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function th(e){let t=v.useContext(Cn);return se(t,Rv(e)),t}function Ov(e,{target:t,replace:a,state:n,preventScrollReset:l,relative:i,viewTransition:r}={}){let c=gs(),o=qt(),u=ql(e,{relative:i});return v.useCallback(f=>{if(ov(f,t)){f.preventDefault();let m=a!==void 0?a:bl(o)===bl(u);c(e,{replace:m,state:n,preventScrollReset:l,relative:i,viewTransition:r})}},[o,c,u,a,n,t,e,l,i,r])}var Dv=0,zv=()=>`__${String(++Dv)}__`;function Uv(){let{router:e}=th("useSubmit"),{basename:t}=v.useContext(ot),a=Fy();return v.useCallback(async(n,l={})=>{let{action:i,method:r,encType:c,formData:o,body:u}=fv(n,t);if(l.navigate===!1){let f=l.fetcherKey||zv();await e.fetch(f,a,l.action||i,{preventScrollReset:l.preventScrollReset,formData:o,body:u,formMethod:l.method||r,formEncType:l.encType||c,flushSync:l.flushSync})}else await e.navigate(l.action||i,{preventScrollReset:l.preventScrollReset,formData:o,body:u,formMethod:l.method||r,formEncType:l.encType||c,replace:l.replace,state:l.state,fromRouteId:a,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,a])}function Mv(e,{relative:t}={}){let{basename:a}=v.useContext(ot),n=v.useContext(vt);se(n,"useFormAction must be used inside a RouteContext");let[l]=n.matches.slice(-1),i={...ql(e||".",{relative:t})},r=qt();if(e==null){i.search=r.search;let c=new URLSearchParams(i.search),o=c.getAll("index");if(o.some(f=>f==="")){c.delete("index"),o.filter(m=>m).forEach(m=>c.append("index",m));let f=c.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&l.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:Ot([a,i.pathname])),bl(i)}function Lv(e,{relative:t}={}){let a=v.useContext(Qm);se(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=th("useViewTransitionState"),l=ql(e,{relative:t});if(!a.isTransitioning)return!1;let i=Lt(a.currentLocation.pathname,n)||a.currentLocation.pathname,r=Lt(a.nextLocation.pathname,n)||a.nextLocation.pathname;return Ki(l.pathname,r)!=null||Ki(l.pathname,i)!=null}const ah=v.createContext(null),ze=()=>{const e=v.useContext(ah);if(!e)throw new Error("AppState provider missing");return e},Bv=({value:e,children:t})=>s.jsx(ah.Provider,{value:e,children:t}),qv=[{path:"/menu",label:"Menú",icon:"🍕",perm:"PRODUCT_VIEW"},{path:"/ventas",label:"Ventas",icon:"💰",perm:"SALE_VIEW"},{path:"/ordenes",label:"Órdenes",icon:"📋",perm:"SALE_VIEW"},{path:"/productos",label:"Productos",icon:"🛍️",perm:"PRODUCT_VIEW"},{path:"/promociones",label:"Promociones",icon:"🎁",perm:"PRODUCT_VIEW"},{path:"/promo-sim",label:"Simulación Promociones",icon:"🎯",perm:"PRODUCT_VIEW"},{path:"/price-experiments",label:"Experimentos Precios",icon:"📊",perm:"PRODUCT_VIEW"},{path:"/merma",label:"Gestión de Merma",icon:"🗑️",perm:"PRODUCT_VIEW"},{path:"/roles",label:"Roles",icon:"👥",perm:"ROLE_VIEW"},{path:"/usuarios",label:"Usuarios",icon:"👤",perm:"USER_VIEW"},{path:"/reportes",label:"Reportes",icon:"📊",perm:"REPORT_VIEW"},{path:"/audit",label:"Auditoría",icon:"🔍",perm:"AUDIT_VIEW"},{path:"/configuracion",label:"Configuración",icon:"⚙️",perm:"USER_VIEW"},{path:"/impuestos",label:"Impuestos",icon:"🧾",perm:"TAX_VIEW"},{path:"/form-demo",label:"Demo Formularios",icon:"🎨",perm:"PRODUCT_VIEW"},{path:"/components-demo",label:"Componentes",icon:"🧩",perm:"PRODUCT_VIEW"},{path:"/login-modern",label:"Login Moderno",icon:"🔐",perm:"PRODUCT_VIEW"},{path:"/sync",label:"Sync",icon:"🔄",perm:"SYNC_RUN"}],Hv=({isOpen:e,onClose:t})=>{var o,u,f,m,d;const{services:a}=ze(),n=qt(),l=((o=a==null?void 0:a.auth)==null?void 0:o.isAuthenticated())||!1,i=((f=(u=a==null?void 0:a.auth)==null?void 0:u.isFullyAuthenticated)==null?void 0:f.call(u))||!1,r=((d=(m=a==null?void 0:a.auth)==null?void 0:m.getUsername)==null?void 0:d.call(m))||null;v.useEffect(()=>{const h=b=>{b.key==="Escape"&&t()};return e?(document.addEventListener("keydown",h),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",h),document.body.style.overflow=""}},[e,t]);const c=()=>{var h;(h=a==null?void 0:a.auth)==null||h.logout(),t()};return l?s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"drawer-overlay",onClick:t}),s.jsxs("div",{className:`side-drawer ${e?"open":""}`,children:[s.jsxs("div",{className:"drawer-header",children:[s.jsx("h3",{children:"🍕 Pizzería del Barrio"}),s.jsx("button",{className:"drawer-close",onClick:t,children:"×"})]}),r&&s.jsx("div",{className:"drawer-user",children:s.jsxs("div",{className:"user-info",children:[s.jsx("span",{className:"user-name",children:r}),s.jsx("span",{className:"user-role",children:"Usuario activo"})]})}),s.jsxs("nav",{className:"drawer-nav",children:[s.jsx("ul",{children:qv.map(h=>{var j;if(h.perm&&(!i||!((j=a==null?void 0:a.auth)!=null&&j.hasPermission(h.perm))))return null;const b=n.pathname===h.path;return s.jsx("li",{children:s.jsxs(mo,{to:h.path,className:b?"active":"",onClick:t,children:[s.jsx("span",{className:"nav-icon",children:h.icon}),s.jsx("span",{className:"nav-label",children:h.label})]})},h.path)})}),s.jsx("div",{className:"drawer-footer",children:s.jsxs("button",{className:"logout-btn",onClick:c,children:[s.jsx("span",{className:"nav-icon",children:"🚪"}),s.jsx("span",{className:"nav-label",children:"Cerrar Sesión"})]})})]})]})]}):null},Pv=({onClick:e})=>s.jsxs("button",{className:"drawer-toggle",onClick:e,children:[s.jsx("span",{}),s.jsx("span",{}),s.jsx("span",{})]}),Vv=({onMenuToggle:e})=>{const{services:t}=ze(),a=gs(),[n,l]=v.useState({isAuth:!1,username:null});v.useEffect(()=>{if(!(t!=null&&t.auth))return;const r=()=>{var o,u;try{const f=t.auth.isAuthenticated(),m=((u=(o=t.auth).getUsername)==null?void 0:u.call(o))||null;l({isAuth:f,username:m})}catch(f){console.error("Error checking auth in NavBar:",f),l({isAuth:!1,username:null})}};r();const c=setInterval(()=>{t.auth.isAuthenticated()!==n.isAuth&&r()},300);return()=>clearInterval(c)},[t==null?void 0:t.auth,n.isAuth]);const i=()=>{var r;try{(r=t==null?void 0:t.auth)==null||r.logout(),l({isAuth:!1,username:null}),a("/login")}catch(c){console.error("Error during logout:",c)}};return s.jsx("div",{className:"header",children:s.jsxs("div",{className:"header__container",children:[s.jsxs("div",{className:"header__brand",children:[n.isAuth&&s.jsx(Pv,{onClick:e}),s.jsx("h1",{className:"header__brand-text",children:"🍕 Pizzería del Barrio"})]}),s.jsx("div",{className:"header__actions",children:n.isAuth&&n.username&&s.jsxs("div",{className:"header__user",children:[s.jsxs("span",{className:"header__username",children:["👤 ",n.username]}),s.jsx("button",{className:"header__logout-btn",onClick:i,children:"Salir"})]})})]})})};function kv(){const[e,t]=v.useState(typeof navigator<"u"?navigator.onLine:!0);return v.useEffect(()=>{const a=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",a),window.addEventListener("offline",n),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",n)}},[]),e}const Yv=()=>{const e=kv();return s.jsxs("div",{style:{position:"fixed",bottom:8,right:8,fontSize:".6rem",background:"#fff",padding:".3rem .6rem",borderRadius:6,boxShadow:"0 2px 4px rgba(0,0,0,.2)",display:"flex",gap:".4rem",alignItems:"center",zIndex:500},children:[s.jsx("span",{style:{display:"inline-block",width:8,height:8,borderRadius:"50%",background:e?"#2a9d8f":"#d62828"}}),e?"Online":"Offline"]})},nh=v.createContext(null),_n=()=>{const e=v.useContext(nh);if(!e)throw new Error("ToastProvider missing");return e},Gv=({children:e})=>{const[t,a]=v.useState([]),n=v.useCallback(i=>a(r=>r.filter(c=>c.id!==i)),[]),l=v.useCallback(i=>{const r=Math.random().toString(36).slice(2),c=i.ttl??4e3,o={id:r,...i};a(u=>[...u,o]),c>0&&setTimeout(()=>n(r),c)},[n]);return s.jsxs(nh.Provider,{value:{toasts:t,push:l,remove:n},children:[e,s.jsx("div",{style:{position:"fixed",top:10,right:10,display:"flex",flexDirection:"column",gap:".5rem",zIndex:2e3},children:t.map(i=>s.jsxs("div",{style:{minWidth:220,background:"#fff",borderLeft:`4px solid ${Xv(i.type)}`,boxShadow:"0 2px 6px rgba(0,0,0,.15)",padding:".6rem .8rem",fontSize:".7rem",borderRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{children:i.message}),s.jsx("button",{onClick:()=>n(i.id),style:{background:"transparent",border:"none",cursor:"pointer",fontSize:".75rem"},children:"×"})]},i.id))})]})};function Xv(e){switch(e){case"success":return"#2a9d8f";case"error":return"#d62828";case"warning":return"#f77f00";default:return"#264653"}}const $i=({open:e,title:t,onClose:a,children:n})=>e?s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{background:"#fff",padding:"1rem",borderRadius:8,minWidth:320,maxWidth:560},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:".5rem"},children:[s.jsx("h3",{style:{margin:0,fontSize:"1rem"},children:t}),s.jsx("button",{className:"btn-outline btn-sm",onClick:a,children:"X"})]}),s.jsx("div",{style:{fontSize:".75rem"},children:n})]})}):null,lh=v.createContext(null),Hl=()=>{const e=v.useContext(lh);if(!e)throw new Error("ConfirmProvider missing");return e},Qv=({children:e})=>{const[t,a]=v.useState({open:!1}),n=v.useCallback(i=>new Promise(r=>a({open:!0,...i,resolve:r})),[]),l=i=>{var r;(r=t.resolve)==null||r.call(t,i),a({open:!1})};return s.jsxs(lh.Provider,{value:{confirm:n},children:[e,s.jsxs($i,{open:t.open,title:t.title||"Confirmar",onClose:()=>l(!1),children:[s.jsx("p",{style:{fontSize:".75rem"},children:t.message}),s.jsxs("div",{style:{display:"flex",gap:".5rem",marginTop:".8rem"},children:[s.jsx("button",{className:"btn",onClick:()=>l(!0),children:"Aceptar"}),s.jsx("button",{className:"btn-outline",onClick:()=>l(!1),children:"Cancelar"})]})]})]})};function Zv({title:e,fields:t,initial:a,onSubmit:n,onClose:l,submitLabel:i="Guardar",busyLabel:r="Guardando...",validate:c}){const[o,u]=v.useState(()=>({...a||{}})),[f,m]=v.useState(null),[d,h]=v.useState(!1);function b(S,g){u(p=>({...p,[S]:g}))}async function j(S){S.preventDefault(),m(null);const g=o;if(c){const p=c(g);if(p){m(p);return}}try{h(!0),await n(g),l()}catch(p){m((p==null?void 0:p.message)||"Error guardando")}finally{h(!1)}}return s.jsx("div",{className:"modal-backdrop",children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:e}),s.jsx("button",{className:"close",onClick:()=>!d&&l(),children:"×"})]}),s.jsxs("form",{onSubmit:j,className:"form-modal-body",children:[t.map(S=>{const g=o[S.name]??"";return S.type==="textarea"?s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:S.label}),s.jsx("textarea",{rows:S.rows||3,required:S.required,value:g,placeholder:S.placeholder,onChange:p=>b(S.name,p.target.value)})]},S.name):S.type==="number"?s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:S.label}),s.jsx("input",{type:"number",required:S.required,value:g,placeholder:S.placeholder,min:S.min,max:S.max,step:S.step||"any",onChange:p=>b(S.name,p.target.value===""?"":Number(p.target.value))})]},S.name):S.type==="select"?s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:S.label}),s.jsxs("select",{required:S.required,value:g,onChange:p=>b(S.name,p.target.value),children:[s.jsx("option",{value:"",disabled:!0,children:S.placeholder||"Selecciona..."}),S.options.map(p=>s.jsx("option",{value:p.value,children:p.label},p.value))]})]},S.name):s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:S.label}),s.jsx("input",{type:S.type==="password"?"password":"text",required:S.required,value:g,placeholder:S.placeholder,onChange:p=>b(S.name,p.target.value)})]},S.name)}),f&&s.jsx("div",{className:"form-error",children:f}),s.jsxs("div",{className:"modal-footer",children:[s.jsx("button",{type:"button",disabled:d,onClick:l,children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:d,children:d?r:i})]})]})]})})}const ih=v.createContext(void 0);function Iv({children:e}){const[t,a]=v.useState([]),n=v.useCallback((l,i)=>new Promise(r=>{const c=Math.random().toString(36).slice(2),o=u=>{a(f=>f.filter(m=>m.id!==c)),r(u)};a(u=>[...u,{id:c,args:l,onSubmit:i,close:o}])}),[]);return s.jsxs(ih.Provider,{value:{showForm:n},children:[e,t.map(l=>{const{id:i,args:r,onSubmit:c,close:o}=l;return s.jsx(Zv,{title:r.title,fields:r.fields,initial:r.initial,submitLabel:r.submitLabel,busyLabel:r.busyLabel,validate:r.validate,onSubmit:async u=>{const f=await c(u);o(f)},onClose:()=>o(void 0)},i)})]})}function vs(){const e=v.useContext(ih);if(!e)throw new Error("useFormModal must be used inside FormModalProvider");return e.showForm}function Ht(){return ze().services}function sh(){return ze().repos}function rh(){var R;const e=Ht(),{cart:t,orders:a,pricing:n,auth:l}=e,i=sh(),[r,c]=v.useState([]),[o,u]=v.useState([]),[f,m]=v.useState(null),[d,h]=v.useState("idle"),b=t.toArray(),S=t.getSummary().subtotal,g=v.useMemo(()=>n.calculate(b,r),[b,r,n]),p=v.useMemo(()=>n.evaluatePaymentStatus(g.grandTotal,o),[g,o,n]),y=v.useCallback(async O=>{const U=await i.products.findById(O);U&&await t.addProduct(U.toJSON())},[t,i.products]),x=v.useCallback(async(O,U)=>{await t.changeQty(O,U)},[t]),T=v.useCallback(O=>{t.remove(O)},[t]),N=v.useCallback(()=>{t.clear()},[t]),C=O=>c(U=>[...U,O]),A=O=>c(U=>U.filter((Y,He)=>He!==O)),M=O=>u(U=>[...U,O]),E=O=>u(U=>U.filter((Y,He)=>He!==O)),w=()=>{c([]),u([])},D=async O=>{var Y;const U=await((Y=i.customers)==null?void 0:Y.findByPhone(O));return m(U||null),U||null},L=async O=>{var Y;const U=await((Y=i.customers)==null?void 0:Y.create(O));return U&&m(U),U},Q=async O=>{h("finalizing");try{const U=await a.finalizeSale({customerData:f||void 0,discounts:r,payments:o});return e.printing&&(e.printing.printInvoice(U,()=>{a.markPrinted(U.id,"invoice")}),O.printKitchen&&e.printing.printKitchen(U,()=>{a.markPrinted(U.id,"kitchen")})),w(),m(null),U}finally{h("idle")}},Z={subtotal:S||0,lineTaxes:[],globalTaxes:[],totalTax:0,total:S||0,lineCount:b.length,itemCount:b.reduce((O,U)=>O+(U.qty||0),0)},z=t.getSummary?t.getSummary():Z;return{lines:b,discounts:r,payments:o,subTotal:S,cartSummary:z,pricing:g,payment:p,addProduct:y,changeQty:x,removeLine:T,clear:N,addDiscount:C,removeDiscount:A,addPayment:M,removePayment:E,findCustomer:D,createCustomer:L,customer:f,finalize:Q,status:d,canSell:(R=l.hasPermission)==null?void 0:R.call(l,"SALE_CREATE")}}const Kv=()=>{var n,l,i,r,c,o;const e=ze(),t=Ht(),a=rh();return e?s.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",background:"rgba(0,0,0,0.8)",color:"white",padding:"10px",fontSize:"12px",borderRadius:"5px",zIndex:9999,maxWidth:"300px"},children:[s.jsx("h4",{children:"🔍 Estado del Sistema"}),s.jsx("div",{children:"✅ AppState: OK"}),s.jsxs("div",{children:[t!=null&&t.auth?"✅":"❌"," Auth Service: ",t!=null&&t.auth?"OK":"FALTA"]}),s.jsxs("div",{children:[(l=(n=t==null?void 0:t.auth)==null?void 0:n.isAuthenticated)!=null&&l.call(n)?"✅":"❌"," Usuario autenticado: ",(r=(i=t==null?void 0:t.auth)==null?void 0:i.isAuthenticated)!=null&&r.call(i)?"SÍ":"NO"]}),s.jsxs("div",{children:[a!=null&&a.canSell?"✅":"❌"," Puede vender: ",a!=null&&a.canSell?"SÍ":"NO"]}),s.jsxs("div",{children:["🛒 Items en carrito: ",((c=a==null?void 0:a.lines)==null?void 0:c.length)||0]}),s.jsxs("div",{children:["📦 Productos disponibles: ",(o=e.repos)!=null&&o.products?"SÍ":"NO"]})]}):s.jsx("div",{children:"❌ AppState no disponible"})},$v=()=>{const{repos:e,services:t}=ze(),{push:a}=_n(),{confirm:n}=Hl(),l=vs(),[i,r]=v.useState([]),c=t.auth.hasPermission("PRODUCT_CREATE"),o=c||t.auth.hasPermission("PRODUCT_EDIT"),u=async()=>{const d=await e.products.getAll();r(d)};v.useEffect(()=>{u()},[]);const f=async()=>{c&&await l({title:"Nuevo Producto",submitLabel:"Crear",fields:[{name:"name",label:"Nombre",required:!0},{name:"basePrice",label:"Precio",type:"number",required:!0,placeholder:"100"},{name:"category",label:"Categoría",required:!1,placeholder:"General"},{name:"img",label:"URL Imagen",required:!1,placeholder:"https://..."}],initial:{basePrice:100,category:"General",img:"https://via.placeholder.com/250x180?text=Nuevo"},validate:d=>d.name?d.basePrice==null||isNaN(d.basePrice)?"Precio inválido":null:"Nombre requerido"},async d=>{const h="p_"+Date.now();await e.products.col.insert({id:h,name:d.name,basePrice:d.basePrice,category:d.category,img:d.img,active:!0,createdAt:new Date().toISOString()}),a({type:"success",message:"Producto creado"}),u()})},m=async d=>{if(!o)return;const h=await e.products.findById(d);if(!h)return;const b=h.toJSON(),j=await n({message:"¿Mantener activo? (Cancelar = No)"});await l({title:"Editar Producto",submitLabel:"Actualizar",fields:[{name:"name",label:"Nombre",required:!0},{name:"basePrice",label:"Precio",type:"number",required:!0},{name:"category",label:"Categoría"}],initial:{name:b.name,basePrice:b.basePrice??0,category:b.category||""},validate:S=>S.name?S.basePrice==null||isNaN(S.basePrice)?"Precio inválido":null:"Nombre requerido"},async S=>{await h.incrementalPatch({name:S.name,basePrice:S.basePrice,category:S.category,active:j}),a({type:"success",message:"Producto actualizado"}),u()})};return s.jsxs("div",{children:[s.jsx("h2",{className:"section-title",children:"Productos"}),c&&s.jsx("button",{className:"btn",onClick:f,children:"Nuevo Producto"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:".75rem",marginTop:".6rem"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"#f77f00",color:"#fff"},children:[s.jsx("th",{children:"Nombre"}),s.jsx("th",{children:"Categoria"}),s.jsx("th",{children:"Precio"}),s.jsx("th",{children:"Activo"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:i.map(d=>{const h=d.toJSON?d.toJSON():d,b=h.basePrice!=null&&!isNaN(h.basePrice)?h.basePrice:0;return s.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[s.jsx("td",{children:h.name}),s.jsx("td",{children:h.category||""}),s.jsxs("td",{children:["$",b.toFixed(2)]}),s.jsx("td",{children:h.active!==!1?"Sí":"No"}),s.jsx("td",{children:o&&s.jsx("button",{className:"btn-outline btn-sm",onClick:()=>m(h.id),children:"Editar"})})]},h.id)})})]})]})},he=v.forwardRef(({label:e,error:t,success:a,variant:n="default",size:l="medium",leftIcon:i,rightIcon:r,helperText:c,className:o="",disabled:u,required:f,id:m,...d},h)=>{const[b,j]=v.useState(!1),[S,g]=v.useState(!!d.value||!!d.defaultValue),y=m||`input-${Math.random().toString(36).substr(2,9)}`,x=M=>{var E;j(!0),(E=d.onFocus)==null||E.call(d,M)},T=M=>{var E;j(!1),(E=d.onBlur)==null||E.call(d,M)},N=M=>{var E;g(!!M.target.value),(E=d.onChange)==null||E.call(d,M)},C=()=>{const M="input-modern",E={default:"input-default",floating:"input-floating",outline:"input-outline",filled:"input-filled"},w={small:"input-small",medium:"input-medium",large:"input-large"};let D=`${M} ${E[n]} ${w[l]}`;return t&&(D+=" input-error"),a&&(D+=" input-success"),u&&(D+=" input-disabled"),b&&(D+=" input-focused"),(S||b)&&(D+=" input-has-value"),i&&(D+=" input-with-left-icon"),r&&(D+=" input-with-right-icon"),`${D} ${o}`.trim()},A=()=>{let M="input-container";return n==="floating"&&(M+=" input-container-floating"),M};return n==="floating"?s.jsxs("div",{className:A(),children:[s.jsxs("div",{className:"input-wrapper",children:[i&&s.jsx("span",{className:"input-icon-left",children:i}),s.jsx("input",{...d,ref:h,id:y,className:C(),onFocus:x,onBlur:T,onChange:N,disabled:u,"aria-invalid":!!t,"aria-describedby":t?`${y}-error`:a?`${y}-success`:c?`${y}-helper`:void 0}),r&&s.jsx("span",{className:"input-icon-right",children:r}),e&&s.jsxs("label",{htmlFor:y,className:"input-label-floating",children:[e,f&&s.jsx("span",{className:"input-required",children:"*"})]})]}),t&&s.jsx("span",{id:`${y}-error`,className:"input-message input-error-message",children:t}),a&&!t&&s.jsx("span",{id:`${y}-success`,className:"input-message input-success-message",children:a}),c&&!t&&!a&&s.jsx("span",{id:`${y}-helper`,className:"input-message input-helper-text",children:c})]}):s.jsxs("div",{className:A(),children:[e&&s.jsxs("label",{htmlFor:y,className:"input-label",children:[e,f&&s.jsx("span",{className:"input-required",children:"*"})]}),s.jsxs("div",{className:"input-wrapper",children:[i&&s.jsx("span",{className:"input-icon-left",children:i}),s.jsx("input",{...d,ref:h,id:y,className:C(),onFocus:x,onBlur:T,onChange:N,disabled:u,"aria-invalid":!!t,"aria-describedby":t?`${y}-error`:a?`${y}-success`:c?`${y}-helper`:void 0}),r&&s.jsx("span",{className:"input-icon-right",children:r})]}),t&&s.jsx("span",{id:`${y}-error`,className:"input-message input-error-message",children:t}),a&&!t&&s.jsx("span",{id:`${y}-success`,className:"input-message input-success-message",children:a}),c&&!t&&!a&&s.jsx("span",{id:`${y}-helper`,className:"input-message input-helper-text",children:c})]})});he.displayName="Input";const lc=v.forwardRef(({label:e,error:t,success:a,variant:n="default",size:l="medium",helperText:i,resize:r="vertical",className:c="",disabled:o,required:u,id:f,...m},d)=>{const[h,b]=v.useState(!1),[j,S]=v.useState(!!m.value||!!m.defaultValue),p=f||`textarea-${Math.random().toString(36).substr(2,9)}`,y=M=>{var E;b(!0),(E=m.onFocus)==null||E.call(m,M)},x=M=>{var E;b(!1),(E=m.onBlur)==null||E.call(m,M)},T=M=>{var E;S(!!M.target.value),(E=m.onChange)==null||E.call(m,M)},N=()=>{const M="textarea-modern",E={default:"textarea-default",floating:"textarea-floating",outline:"textarea-outline",filled:"textarea-filled"},w={small:"textarea-small",medium:"textarea-medium",large:"textarea-large"};let D=`${M} ${E[n]} ${w[l]}`;return t&&(D+=" textarea-error"),a&&(D+=" textarea-success"),o&&(D+=" textarea-disabled"),h&&(D+=" textarea-focused"),(j||h)&&(D+=" textarea-has-value"),`${D} ${c}`.trim()},C=()=>{let M="textarea-container";return n==="floating"&&(M+=" textarea-container-floating"),M},A={resize:r,...m.style};return n==="floating"?s.jsxs("div",{className:C(),children:[s.jsxs("div",{className:"textarea-wrapper",children:[s.jsx("textarea",{...m,ref:d,id:p,className:N(),style:A,onFocus:y,onBlur:x,onChange:T,disabled:o,"aria-invalid":!!t,"aria-describedby":t?`${p}-error`:a?`${p}-success`:i?`${p}-helper`:void 0}),e&&s.jsxs("label",{htmlFor:p,className:"textarea-label-floating",children:[e,u&&s.jsx("span",{className:"textarea-required",children:"*"})]})]}),t&&s.jsx("span",{id:`${p}-error`,className:"textarea-message textarea-error-message",children:t}),a&&!t&&s.jsx("span",{id:`${p}-success`,className:"textarea-message textarea-success-message",children:a}),i&&!t&&!a&&s.jsx("span",{id:`${p}-helper`,className:"textarea-message textarea-helper-text",children:i})]}):s.jsxs("div",{className:C(),children:[e&&s.jsxs("label",{htmlFor:p,className:"textarea-label",children:[e,u&&s.jsx("span",{className:"textarea-required",children:"*"})]}),s.jsx("div",{className:"textarea-wrapper",children:s.jsx("textarea",{...m,ref:d,id:p,className:N(),style:A,onFocus:y,onBlur:x,onChange:T,disabled:o,"aria-invalid":!!t,"aria-describedby":t?`${p}-error`:a?`${p}-success`:i?`${p}-helper`:void 0})}),t&&s.jsx("span",{id:`${p}-error`,className:"textarea-message textarea-error-message",children:t}),a&&!t&&s.jsx("span",{id:`${p}-success`,className:"textarea-message textarea-success-message",children:a}),i&&!t&&!a&&s.jsx("span",{id:`${p}-helper`,className:"textarea-message textarea-helper-text",children:i})]})});lc.displayName="TextArea";const vi=v.forwardRef(({label:e,error:t,success:a,variant:n="default",size:l="medium",helperText:i,placeholder:r,options:c,children:o,className:u="",disabled:f,required:m,id:d,...h},b)=>{const[j,S]=v.useState(!1),[g,p]=v.useState(!!h.value||!!h.defaultValue),x=d||`select-${Math.random().toString(36).substr(2,9)}`,T=w=>{var D;S(!0),(D=h.onFocus)==null||D.call(h,w)},N=w=>{var D;S(!1),(D=h.onBlur)==null||D.call(h,w)},C=w=>{var D;p(!!w.target.value),(D=h.onChange)==null||D.call(h,w)},A=()=>{const w="select-modern",D={default:"select-default",floating:"select-floating",outline:"select-outline",filled:"select-filled"},L={small:"select-small",medium:"select-medium",large:"select-large"};let Q=`${w} ${D[n]} ${L[l]}`;return t&&(Q+=" select-error"),a&&(Q+=" select-success"),f&&(Q+=" select-disabled"),j&&(Q+=" select-focused"),(g||j)&&(Q+=" select-has-value"),`${Q} ${u}`.trim()},M=()=>{let w="select-container";return n==="floating"&&(w+=" select-container-floating"),w},E=()=>o||s.jsxs(s.Fragment,{children:[r&&!h.value&&!h.defaultValue&&s.jsx("option",{value:"",disabled:!0,children:r}),c==null?void 0:c.map(w=>s.jsx("option",{value:w.value,disabled:w.disabled,children:w.label},w.value))]});return n==="floating"?s.jsxs("div",{className:M(),children:[s.jsxs("div",{className:"select-wrapper",children:[s.jsx("select",{...h,ref:b,id:x,className:A(),onFocus:T,onBlur:N,onChange:C,disabled:f,"aria-invalid":!!t,"aria-describedby":t?`${x}-error`:a?`${x}-success`:i?`${x}-helper`:void 0,children:E()}),s.jsx("span",{className:"select-arrow",children:s.jsx("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:s.jsx("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e&&s.jsxs("label",{htmlFor:x,className:"select-label-floating",children:[e,m&&s.jsx("span",{className:"select-required",children:"*"})]})]}),t&&s.jsx("span",{id:`${x}-error`,className:"select-message select-error-message",children:t}),a&&!t&&s.jsx("span",{id:`${x}-success`,className:"select-message select-success-message",children:a}),i&&!t&&!a&&s.jsx("span",{id:`${x}-helper`,className:"select-message select-helper-text",children:i})]}):s.jsxs("div",{className:M(),children:[e&&s.jsxs("label",{htmlFor:x,className:"select-label",children:[e,m&&s.jsx("span",{className:"select-required",children:"*"})]}),s.jsxs("div",{className:"select-wrapper",children:[s.jsx("select",{...h,ref:b,id:x,className:A(),onFocus:T,onBlur:N,onChange:C,disabled:f,"aria-invalid":!!t,"aria-describedby":t?`${x}-error`:a?`${x}-success`:i?`${x}-helper`:void 0,children:E()}),s.jsx("span",{className:"select-arrow",children:s.jsx("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:s.jsx("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),t&&s.jsx("span",{id:`${x}-error`,className:"select-message select-error-message",children:t}),a&&!t&&s.jsx("span",{id:`${x}-success`,className:"select-message select-success-message",children:a}),i&&!t&&!a&&s.jsx("span",{id:`${x}-helper`,className:"select-message select-helper-text",children:i})]})});vi.displayName="Select";const be=v.forwardRef(({children:e,variant:t="primary",size:a="medium",loading:n=!1,leftIcon:l,rightIcon:i,fullWidth:r=!1,className:c="",disabled:o,...u},f)=>{const m="btn-modern",d={primary:"btn-modern-primary",secondary:"btn-modern-secondary",outline:"btn-modern-outline",ghost:"btn-modern-ghost",danger:"btn-modern-danger",success:"btn-modern-success",warning:"btn-modern-warning"},h={small:"btn-modern-sm",medium:"btn-modern-md",large:"btn-modern-lg"},b=[m,d[t],h[a],r&&"btn-modern-full-width",n&&"btn-modern-loading",c].filter(Boolean).join(" "),j=o||n;return s.jsxs("button",{ref:f,className:b,disabled:j,...u,children:[n&&s.jsx("span",{className:"btn-modern-spinner","aria-hidden":"true",children:"⏳"}),!n&&l&&s.jsx("span",{className:"btn-modern-left-icon","aria-hidden":"true",children:l}),s.jsx("span",{className:n?"btn-modern-text-loading":"",children:e}),!n&&i&&s.jsx("span",{className:"btn-modern-right-icon","aria-hidden":"true",children:i})]})});be.displayName="Button";const ar=({children:e,className:t="",variant:a="default",padding:n="medium",onClick:l,hoverable:i=!1})=>{const r="card-modern",c={default:"card-modern-default",elevated:"card-modern-elevated",outlined:"card-modern-outlined",filled:"card-modern-filled"},o={none:"card-modern-padding-none",small:"card-modern-padding-sm",medium:"card-modern-padding-md",large:"card-modern-padding-lg"},u=[r,c[a],o[n],i&&"card-modern-hoverable",l&&"card-modern-clickable",t].filter(Boolean).join(" "),f=l?"button":"div";return s.jsx(f,{className:u,onClick:l,type:l?"button":void 0,children:e})},nr=({children:e,className:t="",actions:a})=>s.jsxs("div",{className:`card-modern-header ${t}`,children:[s.jsx("div",{className:"card-modern-header-content",children:e}),a&&s.jsx("div",{className:"card-modern-header-actions",children:a})]}),lr=({children:e,className:t=""})=>s.jsx("div",{className:`card-modern-body ${t}`,children:e}),Jv=({children:e,variant:t="default",size:a="medium",className:n="",onClick:l,removable:i=!1,onRemove:r})=>{const c="badge-modern",o={default:"badge-modern-default",primary:"badge-modern-primary",secondary:"badge-modern-secondary",success:"badge-modern-success",warning:"badge-modern-warning",danger:"badge-modern-danger",info:"badge-modern-info"},u={small:"badge-modern-sm",medium:"badge-modern-md",large:"badge-modern-lg"},f=[c,o[t],u[a],l&&"badge-modern-clickable",n].filter(Boolean).join(" "),m=l?"button":"span";return s.jsxs(m,{className:f,onClick:l,type:l?"button":void 0,children:[e,i&&s.jsx("button",{className:"badge-modern-remove",onClick:d=>{d.stopPropagation(),r==null||r()},type:"button","aria-label":"Remover",children:"×"})]})},Wv=({status:e})=>{const t={completed:"success",fulfilled:"info",cancelled:"danger",pending:"warning",active:"primary",inactive:"secondary",draft:"default"},a={completed:"Completado",fulfilled:"Entregado",cancelled:"Cancelado",pending:"Pendiente",active:"Activo",inactive:"Inactivo",draft:"Borrador"};return s.jsx(Jv,{variant:t[e]||"default",children:a[e]||e})},Fv=({children:e,variant:t="info",size:a="medium",className:n="",dismissible:l=!1,onDismiss:i,icon:r,title:c})=>{const o="alert-modern",u={info:"alert-modern-info",success:"alert-modern-success",warning:"alert-modern-warning",danger:"alert-modern-danger"},f={small:"alert-modern-sm",medium:"alert-modern-md",large:"alert-modern-lg"},m={info:"ℹ️",success:"✅",warning:"⚠️",danger:"❌"},d=[o,u[t],f[a],n].filter(Boolean).join(" "),h=r||m[t];return s.jsxs("div",{className:d,role:"alert",children:[s.jsxs("div",{className:"alert-modern-content",children:[h&&s.jsx("div",{className:"alert-modern-icon",children:h}),s.jsxs("div",{className:"alert-modern-body",children:[c&&s.jsx("div",{className:"alert-modern-title",children:c}),s.jsx("div",{className:"alert-modern-text",children:e})]})]}),l&&s.jsx("button",{className:"alert-modern-dismiss",onClick:i,type:"button","aria-label":"Cerrar alerta",children:"×"})]})},ex=()=>{const{services:e}=ze(),t=gs(),[a,n]=v.useState(""),[l,i]=v.useState(""),[r,c]=v.useState(""),[o,u]=v.useState(!1),f=async()=>{if(!a||!l){c("Complete usuario y contraseña");return}u(!0),c("");try{await e.auth.login(a,l),c(""),t("/menu")}catch(d){c(d.message)}finally{u(!1)}},m=d=>{d.key==="Enter"&&f()};return s.jsxs("section",{className:"cliente-form",style:{maxWidth:420,margin:"2rem auto"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[s.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"🍕"}),s.jsx("h2",{children:"Iniciar Sesión"}),s.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem"},children:"Accede a tu cuenta del POS"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx(he,{label:"Usuario",placeholder:"Ingresa tu usuario",value:a,onChange:d=>n(d.target.value),onKeyPress:m,error:r&&!a?"El usuario es requerido":void 0,leftIcon:s.jsx("span",{children:"👤"}),required:!0,autoComplete:"username",disabled:o}),s.jsx(he,{type:"password",variant:"floating",label:"Contraseña",value:l,onChange:d=>i(d.target.value),onKeyPress:m,error:r&&!l?"La contraseña es requerida":void 0,rightIcon:s.jsx("span",{children:"🔒"}),required:!0,autoComplete:"current-password",disabled:o}),s.jsx(be,{variant:"primary",onClick:f,loading:o,fullWidth:!0,leftIcon:"🚀",className:"mt-2",children:o?"Ingresando...":"Ingresar"})]}),r&&!(!a||!l)&&s.jsxs("div",{style:{padding:"0.75rem 1rem",backgroundColor:"#fef2f2",border:"1px solid var(--color-danger)",borderRadius:"var(--radius)",color:"var(--color-danger)",fontSize:"0.875rem",marginTop:"1rem",textAlign:"center"},children:["⚠️ ",r]}),s.jsxs("div",{style:{fontSize:"0.7rem",color:"#6b7280",marginTop:"1.5rem",padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"var(--radius)",textAlign:"center"},children:[s.jsx("strong",{children:"Credenciales de prueba:"}),s.jsx("br",{}),"Demo: admin / admin123",s.jsx("br",{}),"Caja: caja / caja123"]}),s.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})};function tx({columns:e,rows:t,rowKey:a,emptyMessage:n="Sin datos"}){return s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:".7rem"},children:[s.jsx("thead",{children:s.jsx("tr",{style:{background:"#f77f00",color:"#fff"},children:e.map(l=>s.jsx("th",{children:l.header},l.key))})}),s.jsxs("tbody",{children:[t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:e.length,style:{textAlign:"center",padding:".6rem"},children:n})}),t.map(l=>s.jsx("tr",{style:{borderBottom:"1px solid #ddd"},children:e.map(i=>s.jsx("td",{children:i.render?i.render(l):l[i.key]},i.key))},a(l)))]})]})}const ax=()=>{const{audit:e,auth:t}=Ht(),[a,n]=v.useState([]);return v.useEffect(()=>{(async()=>{if(t.hasPermission("AUDIT_VIEW")&&e.list){const l=await e.list(150);n(l)}})()},[e,t]),s.jsxs("div",{children:[s.jsx("h2",{className:"section-title",children:"Auditoría"}),s.jsx(tx,{columns:[{key:"timestamp",header:"Fecha",render:l=>new Date(l.timestamp).toLocaleString()},{key:"user",header:"Usuario"},{key:"action",header:"Acción"},{key:"details",header:"Detalles",render:l=>s.jsx("pre",{style:{whiteSpace:"pre-wrap",margin:0},children:JSON.stringify(l.details||{},null,0)})}],rows:a,rowKey:l=>l.id||l.timestamp+l.action})]})},nx=()=>{const{reports:e,auth:t}=Ht(),[a,n]=v.useState(""),[l,i]=v.useState(""),[r,c]=v.useState(null),o=async()=>{if(!a||!l)return;const u=new Date(a+"T00:00:00").toISOString(),f=new Date(l+"T23:59:59").toISOString(),m=await e.salesByDateRange(u,f),d=await e.topProducts(u,f,5),h=await e.totalsByCategory(u,f);c({sales:m,top:d,cats:h})};return t.hasPermission("REPORT_VIEW")?s.jsxs("div",{children:[s.jsx("h2",{className:"section-title",children:"Reportes"}),s.jsxs("div",{className:"form-group",style:{maxWidth:600},children:[s.jsx(he,{type:"date",value:a,onChange:u=>n(u.target.value),variant:"outline"}),s.jsx(he,{type:"date",value:l,onChange:u=>i(u.target.value),variant:"outline"}),s.jsx(be,{variant:"primary",onClick:o,children:"Generar"})]}),s.jsx("div",{style:{marginTop:"1rem"},children:r&&s.jsxs("div",{style:{fontSize:".75rem"},children:[s.jsx("h3",{children:"Resumen Ventas"}),s.jsxs("p",{children:["Ventas: ",r.sales.count," | Total: $","{","out.sales.total","}"]}),s.jsx("h3",{children:"Top Productos"}),s.jsx("ul",{children:r.top.map(u=>s.jsxs("li",{children:[u.name," - Cant: ",u.qty," - $","{","t.revenue","}"]},u.id))}),s.jsx("h3",{children:"Por Categoría"}),s.jsx("ul",{children:r.cats.map(u=>s.jsxs("li",{children:[u.category,": Cant ",u.qty," - $","{","c.revenue","}"]},u.category))})]})})]}):s.jsx("p",{children:"No autorizado."})},lx=()=>{const{users:e,roles:t,auth:a}=Ht(),[n,l]=v.useState([]),[i,r]=v.useState([]),{push:c}=_n(),{confirm:o}=Hl(),u=vs(),f=async()=>{if(a.hasPermission("USER_VIEW")){const j=await e.list(),S=await t.list();l(j),r(S)}};v.useEffect(()=>{f()},[]);const m=async(j,S)=>{await e.changeRole(j,S),c({type:"success",message:"Rol actualizado"}),f()},d=async j=>{await u({title:"Resetear Contraseña",submitLabel:"Resetear",fields:[{name:"temp",label:"Nueva contraseña temporal",required:!0,placeholder:"Temp123"}],initial:{temp:"Temp123"},validate:S=>S.temp?null:"Requerido"},async S=>{var g;await((g=a.adminResetPassword)==null?void 0:g.call(a,j,S.temp)),c({type:"success",message:"Contraseña reseteada"})})},h=async j=>{await o({message:"¿Desactivar usuario?"})&&(await e.deactivate(j),c({type:"success",message:"Usuario desactivado"}),f())},b=async()=>{var j;await u({title:"Nuevo Usuario",submitLabel:"Crear",fields:[{name:"username",label:"Usuario",required:!0},{name:"roleId",label:"Rol",type:"select",required:!0,options:i.map(S=>({value:S.id,label:S.name}))},{name:"tempPassword",label:"Contraseña Temporal",required:!0,placeholder:"Temp123"}],initial:{tempPassword:"Temp123",roleId:(j=i[0])==null?void 0:j.id},validate:S=>S.username?S.roleId?S.tempPassword?null:"Contraseña requerida":"Rol requerido":"Usuario requerido"},async S=>{await e.create({username:S.username,roleId:S.roleId,tempPassword:S.tempPassword}),c({type:"success",message:"Usuario creado"}),f()})};return a.hasPermission("USER_VIEW")?s.jsxs("div",{children:[s.jsx("h2",{className:"section-title",children:"Usuarios"}),a.hasPermission("USER_CREATE")&&s.jsx("button",{className:"btn",onClick:b,children:"Nuevo Usuario"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:".7rem",marginTop:".6rem"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"#f77f00",color:"#fff"},children:[s.jsx("th",{children:"Usuario"}),s.jsx("th",{children:"Rol"}),s.jsx("th",{children:"Activo"}),s.jsx("th",{children:"Debe Cambiar Pass"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:n.map(j=>{const S=i.find(g=>g.id===j.roleId);return s.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[s.jsx("td",{children:j.username}),s.jsx("td",{children:a.hasPermission("USER_EDIT")?s.jsx("select",{value:j.roleId,onChange:g=>m(j.id,g.target.value),children:i.map(g=>s.jsx("option",{value:g.id,children:g.name},g.id))}):(S==null?void 0:S.name)||j.roleId}),s.jsx("td",{children:j.active!==!1?"Sí":"No"}),s.jsx("td",{children:j.mustChangePassword?"Sí":"No"}),s.jsxs("td",{style:{display:"flex",gap:".3rem"},children:[a.hasPermission("USER_PASSWORD_RESET")&&s.jsx("button",{className:"btn-outline btn-sm",onClick:()=>d(j.id),children:"Reset Pass"}),a.hasPermission("USER_EDIT")&&j.active!==!1&&s.jsx("button",{className:"btn-danger btn-sm",onClick:()=>h(j.id),children:"Desactivar"})]})]},j.id)})})]})]}):s.jsx("p",{children:"No autorizado."})},ix=({children:e,color:t="#eee"})=>s.jsx("span",{style:{background:t,padding:".15rem .4rem",borderRadius:4,fontSize:".55rem"},children:e}),sx=()=>{const{roles:e,auth:t}=Ht(),[a,n]=v.useState([]),[l,i]=v.useState(null),[r,c]=v.useState(""),{push:o}=_n(),u=vs(),f=async()=>{if(t.hasPermission("ROLE_VIEW")){const b=await e.list();n(b)}};v.useEffect(()=>{f()},[]);const m=b=>{i(b),c(b.permissions.join(","))},d=async()=>{if(!l)return;const b=r.split(",").map(j=>j.trim()).filter(Boolean);await e.updateRole(l.id,{permissions:b},t.getUsername()),i(null),o({type:"success",message:"Rol actualizado"}),f()},h=async()=>{await u({title:"Nuevo Rol",submitLabel:"Crear",fields:[{name:"name",label:"Nombre",required:!0},{name:"description",label:"Descripción"},{name:"permissions",label:"Permisos (coma)",placeholder:"PRODUCT_VIEW,PRODUCT_EDIT"}],validate:b=>b.name?null:"Nombre requerido"},async b=>{const j=b.permissions?b.permissions.split(",").map(S=>S.trim()).filter(Boolean):[];await e.createRole({name:b.name,description:b.description,permissions:j},t.getUsername()),o({type:"success",message:"Rol creado"}),f()})};return t.hasPermission("ROLE_VIEW")?s.jsxs("div",{children:[s.jsx("h2",{className:"section-title",children:"Roles"}),t.hasPermission("ROLE_EDIT")&&s.jsx("button",{className:"btn",onClick:h,children:"Nuevo Rol"}),s.jsx("div",{style:{display:"grid",gap:"1rem",marginTop:"1rem"},children:a.map(b=>s.jsxs("div",{style:{background:"#fff",padding:".8rem",borderRadius:8,boxShadow:"0 2px 4px rgba(0,0,0,.1)"},children:[s.jsx("strong",{children:b.name})," - ",s.jsx("small",{children:b.description}),s.jsx("div",{style:{margin:".5rem 0",fontSize:".55rem",display:"flex",flexWrap:"wrap",gap:".3rem"},children:b.permissions.map(j=>s.jsx(ix,{children:j},j))}),t.hasPermission("ROLE_EDIT")&&s.jsx("button",{className:"btn-outline btn-sm",onClick:()=>m(b),children:"Editar"})]},b.id))}),s.jsx($i,{open:!!l,title:`Editar Rol: ${l==null?void 0:l.name}`,onClose:()=>i(null),children:s.jsxs("div",{className:"form-group",children:[s.jsx("textarea",{value:r,onChange:b=>c(b.target.value),rows:4,style:{width:"100%"}}),s.jsx("button",{className:"btn",onClick:d,children:"Guardar"})]})})]}):s.jsx("p",{children:"No autorizado."})};function rx({items:e,summary:t,onChangeQty:a,onRemoveItem:n,onClear:l,disabled:i=!1}){if(e.length===0)return s.jsxs("div",{className:"cart-empty",children:[s.jsx("div",{className:"cart-empty-icon",children:"🛒"}),s.jsx("p",{children:"El carrito está vacío"}),s.jsx("span",{className:"cart-empty-hint",children:"Selecciona productos del menú para agregar"})]});const r=new Map;[...t.lineTaxes,...t.globalTaxes].forEach(o=>{const u=r.get(o.code);u?u.amount+=o.amount:r.set(o.code,{...o})});const c=Array.from(r.values());return s.jsxs("div",{className:"professional-cart",children:[s.jsxs("div",{className:"cart-header",children:[s.jsxs("div",{className:"cart-title",children:[s.jsx("h3",{children:"🛒 Pedido"}),s.jsxs("span",{className:"cart-items-count",children:["(",e.length," productos)"]})]}),s.jsx("button",{className:"cart-clear-btn",onClick:l,disabled:i,title:"Vaciar carrito",children:"🗑️"})]}),s.jsx("div",{className:"cart-items",children:e.map(o=>s.jsxs("div",{className:"cart-item",children:[s.jsxs("div",{className:"cart-item-main",children:[s.jsxs("div",{className:"cart-item-info",children:[s.jsx("h4",{className:"cart-item-name",children:o.name}),o.category&&s.jsx("span",{className:"cart-item-category",children:o.category})]}),s.jsxs("div",{className:"cart-item-controls",children:[s.jsxs("div",{className:"cart-item-qty",children:[s.jsx("button",{className:"qty-btn qty-decrease",onClick:async()=>{try{await a(o.id,-1)}catch(u){console.error("Error decreasing quantity:",u)}},disabled:i||o.qty<=1,children:"−"}),s.jsx("span",{className:"qty-display",children:o.qty}),s.jsx("button",{className:"qty-btn qty-increase",onClick:async()=>{try{await a(o.id,1)}catch(u){console.error("Error increasing quantity:",u)}},disabled:i,children:"+"})]}),s.jsxs("div",{className:"cart-item-price",children:[s.jsxs("div",{className:"unit-price",children:["$",o.unitPrice.toFixed(2)," c/u"]}),s.jsxs("div",{className:"line-total",children:["$",o.lineTotal.toFixed(2)]})]}),s.jsx("button",{className:"cart-item-remove",onClick:()=>n(o.id),disabled:i,title:"Eliminar producto",children:"✕"})]})]}),o.lineTaxes&&o.lineTaxes.length>0&&s.jsx("div",{className:"cart-item-taxes",children:o.lineTaxes.filter(u=>u.scope==="line"&&u.amount>0).map((u,f)=>s.jsxs("div",{className:"cart-item-tax",children:[s.jsxs("span",{children:[u.name," (",(u.rate*100).toFixed(1),"%)"]}),s.jsxs("span",{children:["+$",u.amount.toFixed(2)]})]},f))})]},o.id))}),s.jsx("div",{className:"cart-summary",children:s.jsxs("div",{className:"cart-summary-section",children:[s.jsxs("div",{className:"cart-summary-line",children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{className:"amount",children:["$",t.subtotal.toFixed(2)]})]}),c.length>0&&s.jsxs("div",{className:"cart-tax-section",children:[s.jsx("div",{className:"cart-tax-header",children:"Impuestos aplicados"}),c.map(o=>s.jsxs("div",{className:"cart-summary-line cart-tax-line",children:[s.jsxs("span",{className:"tax-detail",children:[o.name," (",(o.rate*100).toFixed(1),"%)",s.jsx("small",{className:`tax-scope tax-scope--${o.scope}`,children:o.scope==="line"?"por línea":"global"})]}),s.jsxs("span",{className:"amount",children:["+$",o.amount.toFixed(2)]})]},o.code))]}),s.jsxs("div",{className:"cart-summary-line cart-total-line",children:[s.jsx("span",{className:"total-label",children:"Total a Pagar"}),s.jsxs("span",{className:"total-amount",children:["$",t.total.toFixed(2)]})]})]})})]})}const cx=[{code:"PERCENT",label:"Descuento %"},{code:"FIXED",label:"Descuento Fijo"}],ox=[{code:"CASH",label:"Efectivo"},{code:"CARD",label:"Tarjeta"},{code:"QR",label:"Billetera QR"},{code:"ONLINE",label:"Online"}];function ux(e,t="$"){return Number.isNaN(e)?t+"0.00":t+e.toFixed(2)}const dx=()=>{var A,M;const e=sh(),t=Ht(),a=rh(),{push:n}=_n(),{confirm:l}=Hl(),i=vs(),[r,c]=v.useState([]),[o,u]=v.useState(!0),[f,m]=v.useState(""),[d,h]=v.useState(!1),[b,j]=v.useState(!1),[S,g]=v.useState("");if(v.useEffect(()=>{(async()=>{try{console.log("Cargando productos...");const E=await e.products.getAll();console.log("Productos obtenidos:",E);const w=E.map(D=>{const L=D.toJSON?D.toJSON():D;return console.log("Producto procesado:",L),L});c(w)}catch(E){console.error("Error cargando productos:",E),n({type:"error",message:"Error cargando productos"})}finally{u(!1)}})()},[e.products]),v.useEffect(()=>{(async()=>{try{console.log("Cargando productos...");const E=await e.products.getAll();console.log("Productos obtenidos:",E);const w=E.map(D=>{const L=D.toJSON?D.toJSON():D;return console.log("Producto procesado:",L),L});c(w)}catch(E){console.error("Error cargando productos:",E),n({type:"error",message:"Error cargando productos"})}finally{u(!1)}})()},[e.products]),o)return s.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Cargando productos..."});console.log("Cart canSell:",a.canSell),console.log("Auth isAuthenticated:",(M=(A=t.auth)==null?void 0:A.isAuthenticated)==null?void 0:M.call(A)),console.log("Cart lines:",a.lines),console.log("Products:",r.length);const p=r.filter(E=>E.name.toLowerCase().includes(f.toLowerCase())),y=E=>{const w=new FormData(E),D=w.get("type"),L=parseFloat(w.get("value")),Q=w.get("label");isNaN(L)||L<=0||(a.addDiscount({type:D,value:L,label:Q}),h(!1))},x=E=>{const w=new FormData(E),D=w.get("method"),L=parseFloat(w.get("amount"));isNaN(L)||L<=0||(a.addPayment({method:D,amount:L}),j(!1))},T=async()=>{S&&await a.findCustomer(S)},N=async()=>{S&&await i({title:"Nuevo Cliente",submitLabel:"Crear",fields:[{name:"name",label:"Nombre",required:!0},{name:"address",label:"Dirección"},{name:"barrio",label:"Barrio"}],validate:E=>E.name?null:"Nombre requerido"},async E=>{await a.createCustomer({phone:S,name:E.name,address:E.address,barrio:E.barrio}),n({type:"success",message:"Cliente creado"})})},C=async E=>{try{const w=await a.finalize({printKitchen:E});n({type:"success",message:"Venta registrada"})}catch(w){n({type:"error",message:w.message||"Error finalizando"})}};return s.jsxs("div",{className:"main-content",children:[s.jsxs("section",{className:"productos-section",children:[s.jsx("div",{className:"form-group",style:{marginTop:0},children:s.jsx(he,{placeholder:"Buscar producto...",value:f,onChange:E=>m(E.target.value),variant:"outline",leftIcon:"🔍"})}),s.jsx("h2",{className:"section-title",children:"Menú"}),s.jsxs("div",{className:"productos",children:[p.length===0&&!o&&s.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#666"},children:f?"No se encontraron productos":"No hay productos disponibles"}),p.map(E=>s.jsxs("article",{className:"producto",children:[s.jsx("img",{src:E.img||"/api/placeholder/250/180",alt:E.name,onError:w=>{const D=w.target;D.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDI1MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyNTAiIGhlaWdodD0iMTgwIiBmaWxsPSIjZjNmNGY2Ii8+Cjx0ZXh0IHg9IjEyNSIgeT0iOTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzllYTNhOCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlbiBubyBkaXNwb25pYmxlPC90ZXh0Pgo8L3N2Zz4K"}}),s.jsx("h3",{children:E.name}),s.jsx("div",{className:"precio",children:ux(E.price??E.basePrice??0)}),a.canSell&&s.jsx(be,{variant:"success",size:"small",onClick:async()=>{try{console.log("Agregando producto:",E.id),await a.addProduct(E.id),n({type:"success",message:`${E.name} agregado al carrito`})}catch(w){console.error("Error agregando producto:",w),n({type:"error",message:"Error agregando producto"})}},children:"Agregar"})]},E.id))]})]}),s.jsxs("aside",{className:"carrito",children:[s.jsx(rx,{items:a.lines.map(E=>({id:E.productId,productId:E.productId,name:E.name,qty:E.qty,unitPrice:E.unitPrice,lineTotal:E.lineTotal,category:void 0,lineTaxes:E.lineTaxes??[]})),summary:a.cartSummary,onChangeQty:async(E,w)=>{try{await a.changeQty(E,w)}catch(D){console.error("Error changing quantity:",D)}},onRemoveItem:E=>a.removeLine(E),onClear:async()=>{await l({message:"¿Vaciar carrito?"})&&a.clear()},disabled:!a.canSell}),s.jsxs("div",{className:"cart-actions",children:[s.jsxs("div",{className:"cart-action-row",children:[s.jsxs(be,{variant:"outline",size:"small",onClick:()=>h(!0),children:["Descuentos (",a.discounts.length,")"]}),s.jsxs(be,{variant:"outline",size:"small",onClick:()=>j(!0),children:["Pagos (",a.payments.length,")"]})]}),s.jsxs("div",{className:"cart-action-row",children:[s.jsx(be,{variant:"primary",size:"medium",disabled:!a.canSell||a.lines.length===0,onClick:()=>C(!1),style:{flex:1},children:"💰 Finalizar"}),t.auth.hasPermission("KITCHEN_PRINT")&&s.jsx(be,{variant:"outline",size:"medium",disabled:!a.canSell||a.lines.length===0,onClick:()=>C(!0),title:"Finalizar e imprimir comanda",children:"🍽️"})]})]}),s.jsxs("div",{className:"cart-customer-section",children:[s.jsx("h3",{className:"cart-customer-title",children:"👤 Cliente"}),s.jsxs("div",{className:"cart-customer-controls",children:[s.jsx("div",{className:"cart-customer-input-row",children:s.jsx(he,{placeholder:"Número de celular",value:S,onChange:E=>g(E.target.value),variant:"outline",size:"small"})}),s.jsxs("div",{className:"cart-customer-buttons-row",children:[s.jsx(be,{variant:"outline",size:"small",onClick:T,children:"Buscar"}),s.jsx(be,{variant:"outline",size:"small",onClick:N,children:"Nuevo"})]})]}),s.jsx("div",{className:"cart-customer-info",children:a.customer?s.jsxs("div",{className:"customer-details",children:[s.jsx("strong",{children:a.customer.name}),s.jsxs("span",{children:[a.customer.address," - ",a.customer.barrio]})]}):s.jsx("span",{className:"no-customer",children:"Sin cliente seleccionado"})})]})]}),s.jsxs($i,{open:d,title:"Descuentos",onClose:()=>h(!1),children:[s.jsxs("form",{onSubmit:E=>{E.preventDefault(),y(E.currentTarget),E.currentTarget.reset()},style:{display:"flex",flexDirection:"column",gap:".4rem"},children:[s.jsx("select",{name:"type",children:cx.map((E,w)=>s.jsx("option",{value:E.code||E,children:E.label||E.code||E},E.code||w))}),s.jsx(he,{name:"value",type:"number",min:0,step:.01,placeholder:"Valor",variant:"outline"}),s.jsx(he,{name:"label",placeholder:"Etiqueta",variant:"outline"}),s.jsx(be,{variant:"primary",type:"submit",children:"Agregar"})]}),s.jsxs("ul",{style:{marginTop:".6rem",fontSize:".6rem"},children:[a.discounts.length===0&&s.jsx("li",{children:"Sin descuentos"}),a.discounts.map((E,w)=>s.jsxs("li",{children:["#",w+1," ",E.type," ",E.value," (",E.label||"",") ",s.jsx(be,{variant:"outline",size:"small",onClick:()=>a.removeDiscount(w),children:"×"})]},w))]})]}),s.jsxs($i,{open:b,title:"Pagos",onClose:()=>j(!1),children:[s.jsxs("form",{onSubmit:E=>{E.preventDefault(),x(E.currentTarget),E.currentTarget.reset()},style:{display:"flex",flexDirection:"column",gap:".4rem"},children:[s.jsx("select",{name:"method",children:ox.map(E=>s.jsx("option",{value:E.code,children:E.label},E.code))}),s.jsx(he,{name:"amount",type:"number",min:0,step:.01,placeholder:"Monto",variant:"outline"}),s.jsx(be,{variant:"primary",type:"submit",children:"Agregar"})]}),s.jsxs("ul",{style:{marginTop:".6rem",fontSize:".6rem"},children:[a.payments.length===0&&s.jsx("li",{children:"Sin pagos"}),a.payments.map((E,w)=>s.jsxs("li",{children:["#",w+1," ",E.method,": ",E.amount.toFixed(2)," ",s.jsx(be,{variant:"outline",size:"small",onClick:()=>a.removePayment(w),children:"×"})]},w))]})]})]})};function fx(e=100){const{auth:t,orders:a,audit:n,printing:l}=Ht(),[i,r]=v.useState([]),c=t.hasPermission("SALE_VIEW"),o=t.hasPermission("INVOICE_PRINT"),u=t.hasPermission("SALE_CANCEL"),f=v.useCallback(async()=>{if(!c)return;const h=await a.orderRepository.listRecent(e);r(h)},[c,e,a]);return v.useEffect(()=>{f()},[f]),{list:i,reload:f,printInvoice:async h=>{if(!o)return;const b=await a.orderRepository.findById(h);b&&(l==null||l.printInvoice(b,()=>a.markPrinted(b.id,"invoice")))},cancel:async h=>{u&&(await a.cancelOrder(h),f())},perms:{canView:c,canPrint:o,canCancel:u}}}function mx(e=200){const{auth:t,orders:a,audit:n,printing:l}=Ht(),[i,r]=v.useState([]),c={view:t.hasPermission("SALE_VIEW"),printInv:t.hasPermission("INVOICE_PRINT"),printKitchen:t.hasPermission("KITCHEN_PRINT"),cancel:t.hasPermission("SALE_CANCEL"),fulfill:t.hasPermission("SALE_FULFILL")},o=v.useCallback(async()=>{if(!c.view)return;const h=await a.orderRepository.listRecent(e);r(h)},[c.view,e,a]);return v.useEffect(()=>{o()},[o]),{list:i,reload:o,printInvoice:async h=>{if(!c.printInv)return;const b=await a.orderRepository.findById(h);b&&(l==null||l.printInvoice(b,()=>a.markPrinted(h,"invoice")),n==null||n.log("PRINT_INVOICE",{orderId:h,user:t.getUsername()}))},printKitchen:async h=>{if(!c.printKitchen)return;const b=await a.orderRepository.findById(h);b&&(l==null||l.printKitchen(b,()=>a.markPrinted(h,"kitchen")),n==null||n.log("PRINT_KITCHEN",{orderId:h,user:t.getUsername()}))},cancel:async h=>{c.cancel&&(await a.cancelOrder(h),o())},fulfill:async h=>{c.fulfill&&(await a.fulfillOrder(h),o())},perms:c}}const hx=()=>{const{list:e,printInvoice:t,cancel:a,perms:n}=fx(),{confirm:l}=Hl(),{push:i}=_n();return n.canView?s.jsxs("div",{children:[s.jsx("h2",{className:"section-title",children:"Ventas Recientes"}),s.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"grid",gap:".5rem"},children:e.map(r=>{var c,o;return s.jsxs("li",{style:{border:"1px solid #eee",borderRadius:8,padding:".5rem",fontSize:".65rem"},children:[s.jsxs("header",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsxs("strong",{children:["#",r.id]}),s.jsx("span",{className:`tag ${r.status}`,children:r.status})]}),s.jsxs("div",{children:[s.jsx("small",{children:new Date(r.createdAt).toLocaleString()}),s.jsx("br",{}),((c=r.customer)==null?void 0:c.phone)&&s.jsxs("small",{children:["Cliente: ",((o=r.customer)==null?void 0:o.name)||""," (",r.customer.phone,")",s.jsx("br",{})]}),s.jsxs("small",{children:["Líneas: ",r.lines.length," | Total: $","{","o.total","}"]})]}),s.jsxs("div",{style:{display:"flex",gap:".3rem",marginTop:".3rem"},children:[n.canPrint&&s.jsx("button",{className:"btn-outline btn-sm",onClick:()=>t(r.id),children:"Factura"}),n.canCancel&&r.status==="completed"&&s.jsx("button",{className:"btn-outline btn-sm",onClick:async()=>{await l({message:"¿Anular venta?"})&&(await a(r.id),i({type:"success",message:"Venta anulada"}))},children:"Anular"})]})]},r.id)})})]}):s.jsx("p",{children:"No autorizado."})},px=()=>{const{list:e,printInvoice:t,printKitchen:a,cancel:n,fulfill:l,perms:i}=mx(),{confirm:r}=Hl(),{push:c}=_n(),[o,u]=v.useState("");if(!i.view)return s.jsx("p",{children:"No autorizado."});const f=v.useMemo(()=>e.filter(m=>{var j,S;const d=o.toLowerCase(),h=((j=m.customer)==null?void 0:j.name)||"",b=((S=m.customer)==null?void 0:S.phone)||"";return m.id.toLowerCase().includes(d)||h.toLowerCase().includes(d)||b.includes(d)}),[e,o]);return s.jsxs("div",{children:[s.jsx("h2",{className:"section-title",children:"Órdenes"}),s.jsx("div",{style:{margin:".5rem 0"},children:s.jsx(he,{placeholder:"Buscar por ID o cliente...",value:o,onChange:m=>u(m.target.value),variant:"outline",leftIcon:"🔍"})}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:".65rem"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"#f77f00",color:"#fff"},children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"Fecha"}),s.jsx("th",{children:"Estado"}),s.jsx("th",{children:"Total"}),s.jsx("th",{children:"Cliente"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:f.map(m=>{var d,h;return s.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[s.jsx("td",{children:m.id}),s.jsx("td",{children:new Date(m.createdAt).toLocaleString()}),s.jsx("td",{children:s.jsx(Wv,{status:m.status})}),s.jsxs("td",{children:["$",m.total||m.grandTotal||m.grandTotalBase||0]}),s.jsxs("td",{children:[((d=m.customer)==null?void 0:d.name)||""," ",(h=m.customer)!=null&&h.phone?`(${m.customer.phone})`:""]}),s.jsxs("td",{style:{display:"flex",flexWrap:"wrap",gap:".3rem"},children:[i.printInv&&s.jsx(be,{variant:"outline",size:"small",onClick:()=>t(m.id),leftIcon:"📄",children:"Factura"}),i.printKitchen&&s.jsx(be,{variant:"outline",size:"small",onClick:()=>a(m.id),leftIcon:"🍳",children:"Comanda"}),i.cancel&&m.status==="completed"&&s.jsx(be,{variant:"warning",size:"small",onClick:async()=>{await r({message:"¿Anular orden?"})&&(await n(m.id),c({type:"success",message:"Orden anulada"}))},children:"Anular"}),i.fulfill&&m.status==="completed"&&s.jsx(be,{variant:"success",size:"small",onClick:async()=>{await l(m.id),c({type:"success",message:"Orden entregada"})},children:"Entregar"})]})]},m.id)})})]})]})},gx=()=>{const{services:e}=ze(),[t,a]=v.useState({preferredMode:"auto",fallbackWindow:!0}),[n,l]=v.useState(!1),[i,r]=v.useState(null);v.useEffect(()=>{if(e!=null&&e.config){const f=e.config.getPrinterConfig();a(f)}},[e==null?void 0:e.config]);const c=async()=>{try{if(!(e!=null&&e.config))throw new Error("Servicio de configuración no disponible");e.config.updatePrinterConfig(t),e!=null&&e.printing&&(e.printing.setPreferredMode&&e.printing.setPreferredMode(t.preferredMode),e.printing.setFallbackWindow?e.printing.setFallbackWindow(t.fallbackWindow):e.printing.fallbackWindow!==void 0&&(e.printing.fallbackWindow=t.fallbackWindow)),r({type:"success",message:"Configuración guardada correctamente"}),setTimeout(()=>r(null),3e3)}catch(f){console.error("Error guardando configuración:",f),r({type:"error",message:"Error al guardar la configuración"}),setTimeout(()=>r(null),3e3)}},o=async()=>{if(!(e!=null&&e.printing)){r({type:"error",message:"Servicio de impresión no disponible"});return}l(!0),r({type:"info",message:"Enviando página de prueba..."});try{const f={id:`TEST-${Date.now()}`,createdAt:new Date().toISOString(),lines:[{qty:1,name:"Pizza Margherita",price:12.5,lineTotal:12.5},{qty:2,name:"Coca Cola",price:2.5,lineTotal:5}],subtotal:17.5,tax:1.75,total:19.25,customerName:"Cliente de Prueba",note:"Esta es una impresión de prueba"};await e.printing.printInvoice(f),r({type:"success",message:"Página de prueba enviada correctamente"})}catch(f){console.error("Error en impresión de prueba:",f),r({type:"error",message:"Error al enviar página de prueba"})}finally{l(!1),setTimeout(()=>r(null),3e3)}},u=(f,m)=>{a(d=>({...d,[f]:m}))};return s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h2",{children:"⚙️ Configuración"}),s.jsx("p",{children:"Administra las configuraciones del sistema"})]}),s.jsxs(ar,{variant:"outlined",padding:"large",className:"mb-4",children:[s.jsx(nr,{children:s.jsx("h3",{style:{margin:0,fontSize:"1.3rem"},children:"🖨️ Configuración de Impresoras"})}),s.jsxs(lr,{children:[s.jsxs("div",{className:"config-form",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Modo de Impresión Preferido"}),s.jsxs("select",{value:t.preferredMode,onChange:f=>u("preferredMode",f.target.value),className:"select-input",children:[s.jsx("option",{value:"auto",children:"Automático"}),s.jsx("option",{value:"escpos",children:"ESC/POS (Térmica)"}),s.jsx("option",{value:"window",children:"Ventana de Navegador"})]}),s.jsxs("small",{className:"form-help",children:["• ",s.jsx("strong",{children:"Automático:"})," Intenta ESC/POS → impresoras dedicadas → ventana (respaldo inteligente)",s.jsx("br",{}),"• ",s.jsx("strong",{children:"ESC/POS:"})," Solo impresora térmica ESC/POS (modo estricto, falla si no está disponible)",s.jsx("br",{}),"• ",s.jsx("strong",{children:"Ventana:"})," Siempre usa ventana del navegador (modo simple)"]})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("div",{className:"checkbox-container",children:[s.jsx("input",{type:"checkbox",id:"fallbackWindow",checked:t.fallbackWindow,onChange:f=>u("fallbackWindow",f.target.checked),className:"checkbox-input"}),s.jsxs("label",{htmlFor:"fallbackWindow",className:"checkbox-label",children:[s.jsx("span",{className:"checkbox-custom"}),s.jsx("span",{className:"checkbox-text",children:"Usar ventana como respaldo"})]})]}),s.jsxs("small",{className:"form-help",children:["Solo para ",s.jsx("strong",{children:"modo ESC/POS"}),": si la impresora térmica falla, abrir ventana automáticamente.",s.jsx("br",{}),"En modo ",s.jsx("strong",{children:"Automático"})," ya incluye respaldo inteligente."]})]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{className:"btn btn-primary",onClick:c,children:"💾 Guardar Configuración"}),s.jsx("button",{className:"btn btn-secondary",onClick:o,disabled:n,children:n?"⏳ Imprimiendo...":"🧪 Imprimir Prueba"})]})]}),i&&s.jsx(Fv,{variant:i.type==="success"?"success":i.type==="error"?"danger":"info",dismissible:!0,onDismiss:()=>r(null),children:i.message})]})]}),s.jsxs(ar,{variant:"filled",padding:"large",className:"mb-4",children:[s.jsx(nr,{children:s.jsx("h3",{style:{margin:0,fontSize:"1.3rem"},children:"📊 Estado del Sistema"})}),s.jsx(lr,{children:s.jsxs("div",{className:"system-status",children:[s.jsxs("div",{className:"status-item",children:[s.jsx("strong",{children:"Servicio de Impresión:"}),s.jsx("span",{className:e!=null&&e.printing?"status-ok":"status-error",children:e!=null&&e.printing?"✅ Activo":"❌ No Disponible"})]}),s.jsxs("div",{className:"status-item",children:[s.jsx("strong",{children:"Modo Actual:"}),s.jsx("span",{className:"status-info",children:t.preferredMode})]}),s.jsxs("div",{className:"status-item",children:[s.jsx("strong",{children:"Respaldo por Ventana:"}),s.jsx("span",{className:t.fallbackWindow?"status-ok":"status-warning",children:t.fallbackWindow?"✅ Habilitado":"⚠️ Deshabilitado"})]})]})})]}),s.jsxs(ar,{variant:"default",padding:"large",children:[s.jsx(nr,{children:s.jsx("h3",{style:{margin:0,fontSize:"1.3rem"},children:"ℹ️ Información Técnica"})}),s.jsx(lr,{children:s.jsxs("div",{className:"tech-info",children:[s.jsx("p",{children:s.jsx("strong",{children:"Tipos de Impresora Soportados:"})}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Window:"})," Abre una ventana del navegador con el documento a imprimir. Compatible con cualquier impresora."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"ESC/POS:"})," Protocolo estándar para impresoras térmicas. Ideal para tickets y facturas."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"USB:"})," Conexión directa vía WebUSB API (experimental, requiere navegador compatible)."]})]}),s.jsx("p",{children:s.jsx("strong",{children:"Recomendaciones:"})}),s.jsxs("ul",{children:[s.jsx("li",{children:'Para uso general: Mantén el modo "Automático" activado.'}),s.jsx("li",{children:'Para impresoras térmicas: Usa modo "ESC/POS".'}),s.jsx("li",{children:"Como respaldo: Siempre mantén habilitada la impresión por ventana."})]})]})})]})]})};function yx({}){const{services:e}=ze(),[t,a]=v.useState([]),[n,l]=v.useState(!0),[i,r]=v.useState(!1),[c,o]=v.useState(null),[u,f]=v.useState(null),[m,d]=v.useState({code:"",name:"",rate:0,scope:"line",appliesToCategories:[],active:!0});v.useEffect(()=>{h()},[]);const h=async()=>{try{l(!0);const N=await e.tax.getAllTaxes();a(N)}catch(N){console.error("Error loading taxes:",N),f({type:"error",message:"Error al cargar impuestos"})}finally{l(!1)}},b=()=>{d({code:"",name:"",rate:0,scope:"line",appliesToCategories:[],active:!0}),o(null),r(!1)},j=(N,C)=>{d(A=>({...A,[N]:C}))},S=async N=>{N.preventDefault();try{c?(await e.tax.updateTax(c.id,{...m,rate:m.rate}),f({type:"success",message:"Impuesto actualizado correctamente"})):(await e.tax.createTax(m),f({type:"success",message:"Impuesto creado correctamente"})),b(),h()}catch(C){console.error("Error saving tax:",C),f({type:"error",message:"Error al guardar impuesto"})}setTimeout(()=>f(null),3e3)},g=N=>{d({code:N.code,name:N.name,rate:N.rate*100,scope:N.scope,appliesToCategories:N.appliesToCategories,active:N.active}),o(N),r(!0)},p=async N=>{if(confirm(`¿Estás seguro de que deseas desactivar el impuesto "${N.name}"?`)){try{await e.tax.deleteTax(N.id),f({type:"success",message:"Impuesto desactivado correctamente"}),h()}catch(C){console.error("Error deleting tax:",C),f({type:"error",message:"Error al desactivar impuesto"})}setTimeout(()=>f(null),3e3)}},y=async N=>{if(confirm(`¿Deseas reactivar el impuesto "${N.name}"?`)){try{await e.tax.updateTax(N.id,{active:!0}),f({type:"success",message:"Impuesto reactivado correctamente"}),h()}catch(C){console.error("Error reactivating tax:",C),f({type:"error",message:"Error al reactivar impuesto"})}setTimeout(()=>f(null),3e3)}},x=async N=>{if(confirm(`¿Estás seguro de que deseas BORRAR PERMANENTEMENTE el impuesto "${N.name}"?

Esta acción no se puede deshacer.`)){try{await e.tax.permanentlyDeleteTax(N.id),f({type:"success",message:"Impuesto borrado permanentemente"}),h()}catch(C){console.error("Error permanently deleting tax:",C),f({type:"error",message:"Error al borrar impuesto permanentemente"})}setTimeout(()=>f(null),3e3)}},T=async()=>{try{await e.tax.createDefaultTaxes(),f({type:"success",message:"Impuestos predeterminados creados"}),h()}catch(N){console.error("Error creating default taxes:",N),f({type:"error",message:"Error al crear impuestos predeterminados"})}setTimeout(()=>f(null),3e3)};return n?s.jsxs("div",{className:"page",children:[s.jsx("div",{className:"page-header",children:s.jsx("h1",{children:"🧾 Gestión de Impuestos"})}),s.jsx("div",{className:"loading",children:"Cargando impuestos..."})]}):s.jsxs("div",{className:"page",children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h1",{children:"🧾 Gestión de Impuestos"}),s.jsxs("div",{className:"page-actions",children:[t.length===0&&s.jsx("button",{className:"btn btn-secondary",onClick:T,children:"➕ Crear Impuestos Predeterminados"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>r(!0),children:"➕ Nuevo Impuesto"})]})]}),u&&s.jsx("div",{className:`status-message status-${u.type}`,children:u.message}),s.jsxs("div",{className:"content-grid",children:[s.jsxs("div",{className:"tax-list",children:[s.jsx("h2",{children:"Impuestos Configurados"}),t.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"No hay impuestos configurados."}),s.jsx("p",{children:"Puedes crear impuestos predeterminados para Argentina o agregar uno personalizado."})]}):s.jsx("div",{className:"tax-cards",children:t.map(N=>s.jsxs("div",{className:`tax-card ${N.active?"":"tax-card--inactive"}`,children:[s.jsxs("div",{className:"tax-card__header",children:[s.jsxs("div",{className:"tax-card__title",children:[s.jsx("strong",{children:N.code}),s.jsx("span",{className:`tax-status ${N.active?"active":"inactive"}`,children:N.active?"Activo":"Inactivo"})]}),s.jsxs("div",{className:"tax-card__actions",children:[s.jsx("button",{className:"btn btn-small btn-outline",onClick:()=>g(N),title:"Editar impuesto",children:"✏️"}),N.active?s.jsx("button",{className:"btn btn-small btn-warning",onClick:()=>p(N),title:"Desactivar impuesto",children:"⏸️"}):s.jsx("button",{className:"btn btn-small btn-success",onClick:()=>y(N),title:"Reactivar impuesto",children:"▶️"}),s.jsx("button",{className:"btn btn-small btn-danger",onClick:()=>x(N),title:"Borrar permanentemente",children:"🗑️"})]})]}),s.jsxs("div",{className:"tax-card__content",children:[s.jsx("p",{children:s.jsx("strong",{children:N.name})}),s.jsxs("div",{className:"tax-details",children:[s.jsxs("span",{className:"tax-rate",children:[(N.rate*100).toFixed(2),"%"]}),s.jsx("span",{className:"tax-scope",children:N.scope==="line"?"📋 Por línea":"🌐 Global"})]}),N.appliesToCategories.length>0&&s.jsx("div",{className:"tax-categories",children:s.jsxs("small",{children:["Categorías: ",N.appliesToCategories.join(", ")]})})]})]},N.id))})]}),i&&s.jsx("div",{className:"tax-form-overlay",children:s.jsxs("div",{className:"tax-form-modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:c?"Editar Impuesto":"Nuevo Impuesto"}),s.jsx("button",{className:"btn btn-text",onClick:b,children:"✕"})]}),s.jsxs("form",{onSubmit:S,className:"tax-form",children:[s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Código *"}),s.jsx("input",{type:"text",value:m.code,onChange:N=>j("code",N.target.value.toUpperCase()),placeholder:"ej: IVA21",required:!0,maxLength:10}),s.jsx("small",{children:"Código único para identificar el impuesto"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Nombre *"}),s.jsx("input",{type:"text",value:m.name,onChange:N=>j("name",N.target.value),placeholder:"ej: IVA 21%",required:!0,maxLength:50})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Tasa (%) *"}),s.jsx("input",{type:"number",value:m.rate,onChange:N=>j("rate",parseFloat(N.target.value)||0),placeholder:"21",min:"0",max:"100",step:"0.01",required:!0}),s.jsx("small",{children:"Porcentaje del impuesto (ej: 21 para 21%)"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Ámbito *"}),s.jsxs("select",{value:m.scope,onChange:N=>j("scope",N.target.value),children:[s.jsx("option",{value:"line",children:"Por línea"}),s.jsx("option",{value:"global",children:"Global (sobre subtotal)"})]}),s.jsx("small",{children:"Por línea: se aplica a cada producto. Global: se aplica al total"})]})]}),s.jsx("div",{className:"form-group",children:s.jsxs("div",{className:"checkbox-container",children:[s.jsx("input",{type:"checkbox",id:"taxActive",checked:m.active,onChange:N=>j("active",N.target.checked),className:"checkbox-input"}),s.jsxs("label",{htmlFor:"taxActive",className:"checkbox-label",children:[s.jsx("span",{className:"checkbox-custom"}),s.jsx("span",{className:"checkbox-text",children:"Impuesto activo"})]})]})}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{type:"button",className:"btn btn-outline",onClick:b,children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"btn btn-primary",children:[c?"Actualizar":"Crear"," Impuesto"]})]})]})]})})]})]})}const vx=()=>{const[e,t]=v.useState({name:"",email:"",phone:"",category:"",message:"",newsletter:!1,notifications:"email"}),[a,n]=v.useState(!1),l=i=>{const{name:r,value:c,type:o}=i.target;t(u=>({...u,[r]:o==="checkbox"?i.target.checked:c}))};return s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h2",{children:"🎨 Formularios Modernos"}),s.jsx("p",{children:"Demostración de los nuevos estilos de inputs y formularios"})]}),s.jsxs("div",{className:"demo-section",children:[s.jsx("h3",{children:"📝 Formulario Básico"}),s.jsxs("div",{className:"cliente-form",children:[s.jsx("div",{className:"form-row",children:s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"name",className:"required",children:"Nombre completo"}),s.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:l,placeholder:"Ingresa tu nombre completo"})]})}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"email",children:"Correo electrónico"}),s.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:l,placeholder:"correo@ejemplo.com"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"phone",children:"Teléfono"}),s.jsx("input",{type:"tel",id:"phone",name:"phone",value:e.phone,onChange:l,placeholder:"+54 11 1234-5678"})]})]}),s.jsx("div",{className:"form-row",children:s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"category",children:"Categoría"}),s.jsxs("select",{id:"category",name:"category",value:e.category,onChange:l,children:[s.jsx("option",{value:"",children:"Selecciona una categoría"}),s.jsx("option",{value:"cliente",children:"Cliente"}),s.jsx("option",{value:"proveedor",children:"Proveedor"}),s.jsx("option",{value:"empleado",children:"Empleado"})]})]})}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"message",children:"Mensaje"}),s.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:l,placeholder:"Escribe tu mensaje aquí...",rows:4})]})]})]}),s.jsxs("div",{className:"demo-section",children:[s.jsx("h3",{children:"✨ Etiquetas Flotantes"}),s.jsxs("div",{className:"cliente-form",children:[s.jsxs("button",{className:"btn btn-ghost",onClick:()=>n(!a),children:[a?"👆 Ocultar":"👇 Mostrar"," Floating Labels"]}),a&&s.jsxs("div",{style:{marginTop:"1rem"},children:[s.jsxs("div",{className:"floating-label",children:[s.jsx("input",{type:"text",placeholder:" "}),s.jsx("label",{children:"Nombre de usuario"})]}),s.jsxs("div",{className:"floating-label",children:[s.jsx("input",{type:"email",placeholder:" "}),s.jsx("label",{children:"Correo electrónico"})]}),s.jsxs("div",{className:"floating-label",children:[s.jsxs("select",{defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0}),s.jsx("option",{value:"admin",children:"Administrador"}),s.jsx("option",{value:"user",children:"Usuario"}),s.jsx("option",{value:"guest",children:"Invitado"})]}),s.jsx("label",{children:"Rol de usuario"})]})]})]})]}),s.jsxs("div",{className:"demo-section",children:[s.jsx("h3",{children:"🔍 Inputs con Iconos"}),s.jsxs("div",{className:"cliente-form",children:[s.jsx("div",{className:"form-row",children:s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Búsqueda con ícono"}),s.jsxs("div",{className:"input-with-icon",children:[s.jsx("input",{type:"search",placeholder:"Buscar productos..."}),s.jsx("span",{className:"input-icon",children:"🔍"})]})]})}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Usuario"}),s.jsxs("div",{className:"input-with-icon",children:[s.jsx("input",{type:"text",placeholder:"Nombre de usuario"}),s.jsx("span",{className:"input-icon",children:"👤"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Contraseña"}),s.jsxs("div",{className:"input-with-icon",children:[s.jsx("input",{type:"password",placeholder:"Tu contraseña"}),s.jsx("span",{className:"input-icon",children:"🔒"})]})]})]})]})]}),s.jsxs("div",{className:"demo-section",children:[s.jsx("h3",{children:"🎯 Estados de Inputs"}),s.jsxs("div",{className:"cliente-form",children:[s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Input Normal"}),s.jsx("input",{type:"text",placeholder:"Estado normal"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Input con Error"}),s.jsx("input",{type:"text",className:"error",placeholder:"Estado de error"}),s.jsx("div",{className:"form-text text-error",children:"Este campo tiene un error"})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Input Exitoso"}),s.jsx("input",{type:"text",className:"success",placeholder:"Estado exitoso"}),s.jsx("div",{className:"form-text text-success",children:"✓ Campo validado correctamente"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Input Deshabilitado"}),s.jsx("input",{type:"text",disabled:!0,placeholder:"Campo deshabilitado"}),s.jsx("div",{className:"form-text",children:"Este campo está deshabilitado"})]})]})]})]}),s.jsxs("div",{className:"demo-section",children:[s.jsx("h3",{children:"☑️ Checkbox y Radio Buttons"}),s.jsxs("div",{className:"cliente-form",children:[s.jsxs("div",{className:"checkbox-group",children:[s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",name:"newsletter",checked:e.newsletter,onChange:l}),"Suscribirme al boletín de noticias"]}),s.jsxs("label",{children:[s.jsx("input",{type:"checkbox"}),"Acepto los términos y condiciones"]}),s.jsxs("label",{children:[s.jsx("input",{type:"checkbox"}),"Quiero recibir ofertas especiales"]})]}),s.jsxs("div",{className:"radio-group",style:{marginTop:"1rem"},children:[s.jsx("h4",{children:"Método de notificación preferido:"}),s.jsxs("label",{children:[s.jsx("input",{type:"radio",name:"notifications",value:"email",checked:e.notifications==="email",onChange:l}),"Correo electrónico"]}),s.jsxs("label",{children:[s.jsx("input",{type:"radio",name:"notifications",value:"sms",checked:e.notifications==="sms",onChange:l}),"SMS"]}),s.jsxs("label",{children:[s.jsx("input",{type:"radio",name:"notifications",value:"none",checked:e.notifications==="none",onChange:l}),"No recibir notificaciones"]})]})]})]}),s.jsxs("div",{className:"demo-section",children:[s.jsx("h3",{children:"🔘 Botones Modernos"}),s.jsxs("div",{className:"cliente-form",children:[s.jsx("h4",{children:"Botones básicos:"}),s.jsxs("div",{className:"form-actions",style:{gap:"1rem",flexWrap:"wrap"},children:[s.jsx("button",{className:"btn",children:"✨ Primario"}),s.jsx("button",{className:"btn btn-secondary",children:"📄 Secundario"}),s.jsx("button",{className:"btn btn-green",children:"✅ Éxito"}),s.jsx("button",{className:"btn btn-danger",children:"❌ Peligro"}),s.jsx("button",{className:"btn btn-outline",children:"🔳 Outline"}),s.jsx("button",{className:"btn btn-ghost",children:"👻 Ghost"})]}),s.jsx("h4",{children:"Tamaños:"}),s.jsxs("div",{className:"form-actions",style:{gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[s.jsx("button",{className:"btn btn-sm",children:"Pequeño"}),s.jsx("button",{className:"btn",children:"Normal"}),s.jsx("button",{className:"btn btn-lg",children:"Grande"}),s.jsx("button",{className:"btn btn-xl",children:"Extra Grande"})]}),s.jsx("h4",{children:"Estados:"}),s.jsxs("div",{className:"form-actions",style:{gap:"1rem",flexWrap:"wrap"},children:[s.jsx("button",{className:"btn",children:"Activo"}),s.jsx("button",{className:"btn",disabled:!0,children:"Deshabilitado"})]}),s.jsx("h4",{children:"Grupo de botones:"}),s.jsxs("div",{className:"btn-group",children:[s.jsx("button",{className:"btn",children:"Opción 1"}),s.jsx("button",{className:"btn",children:"Opción 2"}),s.jsx("button",{className:"btn",children:"Opción 3"})]})]})]}),s.jsx("button",{className:"btn btn-float",children:"➕"})]})};function xx(){const[e,t]=v.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",bio:"",country:"",city:"",experience:""}),[a,n]=v.useState({}),[l,i]=v.useState(!1),r=[{value:"ar",label:"Argentina"},{value:"mx",label:"México"},{value:"es",label:"España"},{value:"co",label:"Colombia"},{value:"cl",label:"Chile"}],c=[{value:"junior",label:"Junior (0-2 años)"},{value:"mid",label:"Middle (2-5 años)"},{value:"senior",label:"Senior (5+ años)"},{value:"lead",label:"Tech Lead"},{value:"manager",label:"Engineering Manager"}],o=d=>h=>{t(b=>({...b,[d]:h.target.value})),a[d]&&n(b=>({...b,[d]:""}))},u=()=>{const d={};return e.name.trim()||(d.name="El nombre es requerido"),e.email.trim()?/\S+@\S+\.\S+/.test(e.email)||(d.email="El email no es válido"):d.email="El email es requerido",e.password?e.password.length<8&&(d.password="La contraseña debe tener al menos 8 caracteres"):d.password="La contraseña es requerida",e.password!==e.confirmPassword&&(d.confirmPassword="Las contraseñas no coinciden"),e.country||(d.country="Selecciona un país"),n(d),Object.keys(d).length===0},f=d=>{d.preventDefault(),u()&&(i(!0),setTimeout(()=>i(!1),3e3),console.log("Form submitted:",e))},m=d=>{if(l&&!a[d]&&e[d])return"✓ Válido"};return s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:"form-container",children:[s.jsx("h1",{className:"form-title",children:"🎨 Componentes de Formulario"}),s.jsx("p",{style:{textAlign:"center",color:"#6b7280",marginBottom:"2rem"},children:"Demostración de Input, TextArea y Select estandarizados"}),s.jsxs("form",{onSubmit:f,children:[s.jsxs("section",{style:{marginBottom:"3rem"},children:[s.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"1.5rem",color:"#1f2937"},children:"📝 Inputs Básicos"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsx(he,{label:"Nombre completo",placeholder:"Ingresa tu nombre",value:e.name,onChange:o("name"),error:a.name,success:m("name"),required:!0,leftIcon:s.jsx("span",{children:"👤"})}),s.jsx(he,{type:"email",label:"Email",placeholder:"ejemplo@correo.com",value:e.email,onChange:o("email"),error:a.email,success:m("email"),required:!0,leftIcon:s.jsx("span",{children:"📧"})}),s.jsx(he,{type:"tel",label:"Teléfono",placeholder:"+54 9 11 1234-5678",value:e.phone,onChange:o("phone"),helperText:"Formato: código país + número",leftIcon:s.jsx("span",{children:"📱"})})]})]}),s.jsxs("section",{style:{marginBottom:"3rem"},children:[s.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"1.5rem",color:"#1f2937"},children:"🏷️ Floating Labels"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsx(he,{type:"password",variant:"floating",label:"Contraseña",value:e.password,onChange:o("password"),error:a.password,required:!0,rightIcon:s.jsx("span",{children:"🔒"})}),s.jsx(he,{type:"password",variant:"floating",label:"Confirmar Contraseña",value:e.confirmPassword,onChange:o("confirmPassword"),error:a.confirmPassword,success:e.confirmPassword&&!a.confirmPassword?"✓ Coinciden":void 0,required:!0,rightIcon:s.jsx("span",{children:"🔒"})})]})]}),s.jsxs("section",{style:{marginBottom:"3rem"},children:[s.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"1.5rem",color:"#1f2937"},children:"🎨 Variantes de Diseño"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsx(he,{variant:"outline",size:"small",label:"Input Outline (Pequeño)",placeholder:"Diseño outline pequeño"}),s.jsx(he,{variant:"filled",size:"large",label:"Input Filled (Grande)",placeholder:"Diseño filled grande"})]})]}),s.jsxs("section",{style:{marginBottom:"3rem"},children:[s.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"1.5rem",color:"#1f2937"},children:"📝 Área de Texto"}),s.jsx(lc,{label:"Biografía",placeholder:"Cuéntanos sobre ti...",value:e.bio,onChange:o("bio"),helperText:"Máximo 500 caracteres",rows:4,resize:"vertical"}),s.jsx(lc,{variant:"floating",label:"Descripción del Proyecto",placeholder:"Escribe aquí...",helperText:"Con floating label",rows:3,resize:"none"})]}),s.jsxs("section",{style:{marginBottom:"3rem"},children:[s.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"1.5rem",color:"#1f2937"},children:"📋 Selectores"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsx(vi,{label:"País",options:r,value:e.country,onChange:o("country"),placeholder:"Selecciona un país",error:a.country,success:m("country"),required:!0}),s.jsx(vi,{variant:"floating",label:"Experiencia",options:c,value:e.experience,onChange:o("experience"),placeholder:"Selecciona tu nivel",helperText:"Años de experiencia en desarrollo"}),s.jsxs(vi,{variant:"filled",size:"small",label:"Ciudad",value:e.city,onChange:o("city"),disabled:!0,helperText:"Se habilitará después de seleccionar el país",children:[s.jsx("option",{value:"",children:"Selecciona una ciudad"}),s.jsx("option",{value:"bsas",children:"Buenos Aires"}),s.jsx("option",{value:"cdmx",children:"Ciudad de México"}),s.jsx("option",{value:"madrid",children:"Madrid"})]})]})]}),s.jsxs("div",{className:"form-actions",style:{marginTop:"2rem"},children:[s.jsx("button",{type:"submit",className:"btn btn-primary",children:"💾 Guardar Información"}),s.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>{t({name:"",email:"",password:"",confirmPassword:"",phone:"",bio:"",country:"",city:"",experience:""}),n({})},children:"🗑️ Limpiar Formulario"})]}),l&&s.jsx("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f0fdf4",border:"2px solid var(--color-green)",borderRadius:"var(--radius)",color:"var(--color-green)",textAlign:"center",fontWeight:500},children:"✅ Formulario enviado exitosamente"})]})]}),s.jsxs("div",{style:{marginTop:"3rem",padding:"1.5rem",backgroundColor:"#f8fafc",borderRadius:"var(--radius)",border:"1px solid #e2e8f0"},children:[s.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",color:"#1f2937"},children:"📋 Características de los Componentes"}),s.jsxs("ul",{style:{color:"#6b7280",lineHeight:1.6},children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Input:"})," Soporte para iconos, múltiples variantes (default, floating, outline, filled), estados de validación"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"TextArea:"})," Redimensionamiento controlado, etiquetas flotantes, mismo sistema de validación"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Select:"})," Flecha personalizada, opciones como array o children, estados consistentes"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Accesibilidad:"})," ARIA labels, IDs únicos automáticos, navegación por teclado"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Responsive:"})," Adaptable a diferentes tamaños de pantalla"]})]})]})]})}function bx(){const{services:e}=ze(),[t,a]=v.useState(""),[n,l]=v.useState(""),[i,r]=v.useState(""),[c,o]=v.useState(!1),u=async f=>{var m;if(f.preventDefault(),r(""),!t.trim()){r("El usuario es requerido");return}if(!n){r("La contraseña es requerida");return}o(!0);try{await((m=e==null?void 0:e.auth)==null?void 0:m.login(t,n)),console.log("Login exitoso")}catch(d){r("Usuario o contraseña incorrectos"),console.error("Login failed:",d)}finally{o(!1)}};return s.jsx("div",{className:"container",children:s.jsxs("div",{className:"form-container",style:{maxWidth:"400px"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[s.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"🍕"}),s.jsx("h1",{className:"form-title",children:"Iniciar Sesión"}),s.jsx("p",{style:{color:"#6b7280"},children:"Accede a tu cuenta"})]}),s.jsxs("form",{onSubmit:u,children:[s.jsx(he,{type:"text",label:"Usuario",placeholder:"Ingresa tu usuario",value:t,onChange:f=>a(f.target.value),error:i&&!t?"El usuario es requerido":void 0,leftIcon:s.jsx("span",{children:"👤"}),required:!0,autoComplete:"username"}),s.jsx(he,{type:"password",variant:"floating",label:"Contraseña",value:n,onChange:f=>l(f.target.value),error:i&&!n?"La contraseña es requerida":void 0,rightIcon:s.jsx("span",{children:"🔒"}),required:!0,autoComplete:"current-password"}),i&&!(!t||!n)&&s.jsxs("div",{style:{padding:"0.75rem 1rem",backgroundColor:"#fef2f2",border:"1px solid var(--color-danger)",borderRadius:"var(--radius)",color:"var(--color-danger)",fontSize:"0.875rem",marginBottom:"1rem"},children:["⚠️ ",i]}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c,style:{width:"100%",justifyContent:"center",position:"relative"},children:c?s.jsxs(s.Fragment,{children:[s.jsx("span",{style:{display:"inline-block",width:"1rem",height:"1rem",border:"2px solid transparent",borderTop:"2px solid currentColor",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"0.5rem"}}),"Iniciando sesión..."]}):"🚀 Iniciar Sesión"})]}),s.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"#f8fafc",borderRadius:"var(--radius)",fontSize:"0.875rem",color:"#6b7280"},children:[s.jsx("h4",{style:{marginBottom:"0.5rem",color:"#374151"},children:"💡 Ejemplo de migración"}),s.jsx("p",{children:"Esta es una demostración de cómo migrar el formulario de login existente usando los nuevos componentes estandarizados:"}),s.jsxs("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Input con iconos personalizados"}),s.jsx("li",{children:"Variantes de diseño (floating labels)"}),s.jsx("li",{children:"Validación integrada con mensajes de error"}),s.jsx("li",{children:"Estados de carga y loading"}),s.jsx("li",{children:"Autocompletado y accesibilidad"})]})]}),s.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})})}const Sx=()=>{const{services:e,repos:t}=ze(),[a,n]=v.useState([]),[l,i]=v.useState([]),[r,c]=v.useState(""),[o,u]=v.useState(""),[f,m]=v.useState(""),[d,h]=v.useState(!1),[b,j]=v.useState("");v.useEffect(()=>{const g=async()=>{var y;try{if((y=t==null?void 0:t.ingredients)!=null&&y.col){const T=(await t.ingredients.col.find().exec()).map(N=>({id:N.get("id"),name:N.get("name"),unit:N.get("unit"),current:N.get("current")||0}));n(T)}}catch(x){console.error("Error loading ingredients:",x),j("Error al cargar ingredientes")}},p=async()=>{var y;try{if((y=t==null?void 0:t.waste)!=null&&y.col){const N=(await t.waste.col.find().sort("-timestamp").limit(50).exec()).map(C=>C.toJSON()).map(C=>{const A=a.find(M=>M.id===C.ingredientId);return{...C,ingredientName:(A==null?void 0:A.name)||"Ingrediente desconocido"}});i(N)}}catch(x){console.error("Error loading waste records:",x)}};g(),a.length>0&&p()},[t,a.length]);const S=async g=>{if(g.preventDefault(),!r||!o||parseFloat(o)<=0){j("Por favor complete todos los campos con valores válidos");return}h(!0),j("");try{if(e!=null&&e.waste){const p=await e.waste.reportWaste({ingredientId:r,qty:parseFloat(o),reason:f,notes:""});c(""),u(""),m(""),window.location.reload()}}catch(p){j(p.message||"Error al reportar merma")}finally{h(!1)}};return s.jsxs("div",{className:"waste-page",children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h1",{children:"🗑️ Gestión de Merma"}),s.jsx("p",{children:"Reporte y seguimiento de merma de ingredientes"})]}),b&&s.jsxs("div",{className:"alert alert--danger",children:[s.jsx("strong",{children:"Error:"})," ",b]}),s.jsxs("div",{className:"waste-content",children:[s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card__header",children:s.jsx("h2",{children:"Reportar Merma"})}),s.jsx("div",{className:"card__body",children:s.jsxs("form",{onSubmit:S,className:"form",children:[s.jsxs("div",{className:"form__group",children:[s.jsx("label",{htmlFor:"ingredient",className:"form__label",children:"Ingrediente *"}),s.jsxs("select",{id:"ingredient",value:r,onChange:g=>c(g.target.value),className:"form__select",required:!0,disabled:d,children:[s.jsx("option",{value:"",children:"Seleccionar ingrediente..."}),a.map(g=>s.jsxs("option",{value:g.id,children:[g.name," (",g.unit,") - Stock: ",g.current||0]},g.id))]})]}),s.jsxs("div",{className:"form__group",children:[s.jsx("label",{htmlFor:"qty",className:"form__label",children:"Cantidad *"}),s.jsx("input",{type:"number",id:"qty",value:o,onChange:g=>u(g.target.value),className:"form__input",placeholder:"Cantidad de merma",min:"0.01",step:"0.01",required:!0,disabled:d})]}),s.jsxs("div",{className:"form__group",children:[s.jsx("label",{htmlFor:"reason",className:"form__label",children:"Motivo"}),s.jsx("textarea",{id:"reason",value:f,onChange:g=>m(g.target.value),className:"form__textarea",placeholder:"Motivo de la merma (opcional)",rows:3,disabled:d})]}),s.jsx("div",{className:"form__actions",children:s.jsx("button",{type:"submit",className:"btn btn--primary",disabled:d||!r||!o,children:d?"Reportando...":"Reportar Merma"})})]})})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card__header",children:s.jsx("h2",{children:"Historial de Merma"})}),s.jsx("div",{className:"card__body",children:l.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"No hay registros de merma aún"})}):s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Fecha"}),s.jsx("th",{children:"Ingrediente"}),s.jsx("th",{children:"Cantidad"}),s.jsx("th",{children:"Motivo"}),s.jsx("th",{children:"Reportado por"})]})}),s.jsx("tbody",{children:l.map(g=>s.jsxs("tr",{children:[s.jsx("td",{children:new Date(g.timestamp).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),s.jsx("td",{children:s.jsx("strong",{children:g.ingredientName})}),s.jsx("td",{children:s.jsx("span",{className:"quantity-badge",children:g.qty})}),s.jsx("td",{children:g.reason||s.jsx("em",{children:"Sin especificar"})}),s.jsx("td",{children:g.reportedBy})]},g.id))})]})})})]})]})]})},jx=()=>{const{services:e,repos:t}=ze(),[a,n]=v.useState([]),[l,i]=v.useState(!1),[r,c]=v.useState(null),[o,u]=v.useState(!1),[f,m]=v.useState(""),[d,h]=v.useState({name:"",type:"PERCENT_CART",active:!0,priority:0,stackable:!0,config:{},dsl:""});v.useEffect(()=>{(async()=>{var T;try{if((T=t==null?void 0:t.promotions)!=null&&T.col){const C=(await t.promotions.col.find().sort("-priority").exec()).map(A=>A.toJSON());n(C)}}catch(N){console.error("Error loading promotions:",N),m("Error al cargar promociones")}})()},[t]);const b=async x=>{var T,N,C;if(x.preventDefault(),!d.name||!d.type){m("Por favor complete los campos obligatorios");return}u(!0),m("");try{if(r){if((T=t==null?void 0:t.promotions)!=null&&T.col){const A=await t.promotions.col.findOne(r.id).exec();A&&await A.incrementalPatch(d)}}else if((N=t==null?void 0:t.promotions)!=null&&N.col){const A={...d,id:`promo_${Date.now()}`};await t.promotions.col.insert(A)}if((C=t==null?void 0:t.promotions)!=null&&C.col){const M=(await t.promotions.col.find().sort("-priority").exec()).map(E=>E.toJSON());n(M)}p()}catch(A){m(A.message||"Error al guardar promoción")}finally{u(!1)}},j=x=>{c(x),h({...x}),i(!0)},S=async x=>{var T;if(window.confirm("¿Está seguro de eliminar esta promoción?"))try{if((T=t==null?void 0:t.promotions)!=null&&T.col){const N=await t.promotions.col.findOne(x).exec();N&&(await N.remove(),n(C=>C.filter(A=>A.id!==x)))}}catch{m("Error al eliminar promoción")}},g=async x=>{var T;try{if((T=t==null?void 0:t.promotions)!=null&&T.col){const N=await t.promotions.col.findOne(x.id).exec();N&&(await N.incrementalPatch({active:!x.active}),n(C=>C.map(A=>A.id===x.id?{...A,active:!A.active}:A)))}}catch{m("Error al cambiar estado de promoción")}},p=()=>{h({name:"",type:"PERCENT_CART",active:!0,priority:0,stackable:!0,config:{},dsl:""}),c(null),i(!1),m("")},y=x=>({BUY_X_GET_Y:"Compra X Lleva Y",SECOND_DISCOUNT:"Descuento Segunda Unidad",COMBO_FIXED:"Combo Precio Fijo",PERCENT_CART:"Descuento % Carrito",CUSTOM:"Personalizada"})[x]||x;return s.jsxs("div",{className:"promotions-page",children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h1",{children:"🎁 Promociones"}),s.jsx("p",{children:"Gestión de promociones y ofertas especiales"}),s.jsx("button",{className:"btn btn--primary",onClick:()=>i(!0),children:"+ Nueva Promoción"})]}),f&&s.jsxs("div",{className:"alert alert--danger",children:[s.jsx("strong",{children:"Error:"})," ",f]}),l&&s.jsx("div",{className:"modal-overlay",onClick:p,children:s.jsxs("div",{className:"modal",onClick:x=>x.stopPropagation(),children:[s.jsxs("div",{className:"modal__header",children:[s.jsx("h2",{children:r?"Editar Promoción":"Nueva Promoción"}),s.jsx("button",{className:"modal__close",onClick:p,children:"×"})]}),s.jsx("div",{className:"modal__body",children:s.jsxs("form",{onSubmit:b,className:"form",children:[s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"Nombre *"}),s.jsx("input",{type:"text",value:d.name||"",onChange:x=>h({...d,name:x.target.value}),className:"form__input",placeholder:"Ej: 2x1 en pizzas familiares",required:!0})]}),s.jsxs("div",{className:"form__row",children:[s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"Tipo *"}),s.jsxs("select",{value:d.type||"PERCENT_CART",onChange:x=>h({...d,type:x.target.value}),className:"form__select",required:!0,children:[s.jsx("option",{value:"PERCENT_CART",children:"Descuento % Carrito"}),s.jsx("option",{value:"BUY_X_GET_Y",children:"Compra X Lleva Y"}),s.jsx("option",{value:"SECOND_DISCOUNT",children:"Descuento 2da Unidad"}),s.jsx("option",{value:"COMBO_FIXED",children:"Combo Precio Fijo"}),s.jsx("option",{value:"CUSTOM",children:"Personalizada"})]})]}),s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"Prioridad"}),s.jsx("input",{type:"number",value:d.priority||0,onChange:x=>h({...d,priority:parseInt(x.target.value)}),className:"form__input",min:"0",max:"100"})]})]}),s.jsxs("div",{className:"form__row",children:[s.jsx("div",{className:"form__group",children:s.jsxs("label",{className:"form__checkbox",children:[s.jsx("input",{type:"checkbox",checked:d.active||!1,onChange:x=>h({...d,active:x.target.checked})}),"Activa"]})}),s.jsx("div",{className:"form__group",children:s.jsxs("label",{className:"form__checkbox",children:[s.jsx("input",{type:"checkbox",checked:d.stackable||!1,onChange:x=>h({...d,stackable:x.target.checked})}),"Apilable con otras promociones"]})})]}),s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"DSL/Lógica personalizada"}),s.jsx("textarea",{value:d.dsl||"",onChange:x=>h({...d,dsl:x.target.value}),className:"form__textarea",placeholder:"Ej: if cartTotal > 1000 then discountPercent 10",rows:4}),s.jsx("small",{className:"form__help",children:"Sintaxis DSL personalizada o deje vacío para usar configuración básica"})]}),s.jsxs("div",{className:"form__actions",children:[s.jsx("button",{type:"button",className:"btn btn--secondary",onClick:p,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn btn--primary",disabled:o,children:o?"Guardando...":r?"Actualizar":"Crear"})]})]})})]})}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card__header",children:s.jsx("h2",{children:"Promociones Configuradas"})}),s.jsx("div",{className:"card__body",children:a.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"No hay promociones configuradas aún"}),s.jsx("button",{className:"btn btn--primary",onClick:()=>i(!0),children:"Crear primera promoción"})]}):s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Nombre"}),s.jsx("th",{children:"Tipo"}),s.jsx("th",{children:"Prioridad"}),s.jsx("th",{children:"Estado"}),s.jsx("th",{children:"Apilable"}),s.jsx("th",{children:"DSL"}),s.jsx("th",{children:"Acciones"})]})}),s.jsx("tbody",{children:a.map(x=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:x.name})}),s.jsx("td",{children:s.jsx("span",{className:"badge badge--info",children:y(x.type)})}),s.jsx("td",{children:x.priority||0}),s.jsx("td",{children:s.jsx("button",{className:`badge badge--${x.active?"success":"secondary"}`,onClick:()=>g(x),style:{cursor:"pointer",border:"none"},children:x.active?"Activa":"Inactiva"})}),s.jsx("td",{children:x.stackable?"✅":"❌"}),s.jsx("td",{children:x.dsl?s.jsx("span",{title:x.dsl,className:"badge badge--warning",children:"DSL"}):s.jsx("span",{className:"text-muted",children:"Básica"})}),s.jsx("td",{children:s.jsxs("div",{className:"btn-group",children:[s.jsx("button",{className:"btn btn--small btn--secondary",onClick:()=>j(x),children:"✏️"}),s.jsx("button",{className:"btn btn--small btn--danger",onClick:()=>S(x.id),children:"🗑️"})]})})]},x.id))})]})})})]})]})},Ex=()=>{const{services:e,repos:t}=ze(),[a,n]=v.useState([]),[l,i]=v.useState([]),[r,c]=v.useState([]),[o,u]=v.useState([]),[f,m]=v.useState(!1),[d,h]=v.useState(""),[b,j]=v.useState(!1),[S,g]=v.useState(""),[p,y]=v.useState([]);v.useEffect(()=>{x()},[t]);const x=async()=>{var w,D;try{if((w=t==null?void 0:t.products)!=null&&w.col){const L=await t.products.col.find().limit(50).exec();n(L.map(Q=>Q.toJSON()))}if((D=t==null?void 0:t.promotions)!=null&&D.active){const L=await t.promotions.active("main");i(L)}}catch(L){console.error("Error loading data:",L),h("Error al cargar datos")}},T=()=>{y([...p,{productId:"",qty:1,price:0}])},N=(w,D,L)=>{const Q=[...p];if(Q[w]={...Q[w],[D]:L},D==="productId"){const Z=a.find(z=>z.id===L);Z&&(Q[w].price=Z.sellPrice||Z.price||0)}y(Q)},C=w=>{y(p.filter((D,L)=>L!==w))},A=()=>{if(!S.trim()){h("Por favor ingrese un nombre para el escenario");return}if(p.length===0||p.some(L=>!L.productId)){h("Por favor agregue al menos un producto válido");return}const w=p.map((L,Q)=>{const Z=a.find(z=>z.id===L.productId);return{id:`line_${Q}`,productId:L.productId,name:(Z==null?void 0:Z.name)||"Producto",category:(Z==null?void 0:Z.category)||"General",qty:L.qty,unitPrice:L.price,lineTotal:L.qty*L.price}}),D={id:`scenario_${Date.now()}`,name:S,params:{lines:w,branchId:"main"}};c([...r,D]),g(""),y([]),j(!1),h("")},M=async()=>{var w,D;if(r.length===0){h("No hay escenarios para simular");return}m(!0),h("");try{const L=[];for(const Q of r)try{let Z={subTotal:0,discountTotal:0,taxTotal:0,total:0,appliedPromotions:[]};if(Z.subTotal=Q.params.lines.reduce((z,R)=>z+R.lineTotal,0),(w=e==null?void 0:e.promotions)!=null&&w.applyPromotions){const z=await e.promotions.applyPromotions(Q.params.lines,l);Z.appliedPromotions=z.appliedPromotions,Z.discountTotal=z.promotionDiscountTotal||0}if((D=e==null?void 0:e.tax)!=null&&D.calculate){const z=await e.tax.calculate(Q.params.lines);Z.taxTotal=Array.isArray(z)?z.reduce((R,O)=>R+O.amount,0):0}else Z.taxTotal=0;Z.total=Z.subTotal-Z.discountTotal+Z.taxTotal,L.push({scenario:Q,result:Z})}catch(Z){L.push({scenario:Q,result:{subTotal:0,discountTotal:0,taxTotal:0,total:0,appliedPromotions:[],error:Z.message||"Error en simulación"}})}u(L)}catch(L){h(L.message||"Error en simulación")}finally{m(!1)}},E=()=>{c([]),u([])};return s.jsxs("div",{className:"promo-sim-page",children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h1",{children:"🎯 Simulación de Promociones"}),s.jsx("p",{children:"Pruebe diferentes escenarios para evaluar el impacto de sus promociones"})]}),d&&s.jsxs("div",{className:"alert alert--danger",children:[s.jsx("strong",{children:"Error:"})," ",d]}),s.jsxs("div",{className:"promo-sim-content",children:[s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"card__header",children:[s.jsx("h2",{children:"Panel de Control"}),s.jsxs("div",{className:"btn-group",children:[s.jsx("button",{className:"btn btn--primary",onClick:()=>j(!0),children:"+ Nuevo Escenario"}),s.jsx("button",{className:"btn btn--success",onClick:M,disabled:f||r.length===0,children:f?"Simulando...":"▶️ Ejecutar Simulación"}),s.jsx("button",{className:"btn btn--secondary",onClick:E,disabled:r.length===0,children:"🗑️ Limpiar"})]})]}),s.jsx("div",{className:"card__body",children:s.jsxs("div",{className:"stats-grid",children:[s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat__label",children:"Promociones Activas"}),s.jsx("div",{className:"stat__value",children:l.length})]}),s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat__label",children:"Escenarios"}),s.jsx("div",{className:"stat__value",children:r.length})]}),s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat__label",children:"Productos Disponibles"}),s.jsx("div",{className:"stat__value",children:a.length})]})]})})]}),b&&s.jsx("div",{className:"modal-overlay",onClick:()=>j(!1),children:s.jsxs("div",{className:"modal modal--large",onClick:w=>w.stopPropagation(),children:[s.jsxs("div",{className:"modal__header",children:[s.jsx("h2",{children:"Nuevo Escenario de Simulación"}),s.jsx("button",{className:"modal__close",onClick:()=>j(!1),children:"×"})]}),s.jsx("div",{className:"modal__body",children:s.jsxs("form",{onSubmit:w=>{w.preventDefault(),A()},children:[s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"Nombre del Escenario *"}),s.jsx("input",{type:"text",value:S,onChange:w=>g(w.target.value),className:"form__input",placeholder:"Ej: Carrito típico familia",required:!0})]}),s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"Productos en el Carrito"}),s.jsxs("div",{className:"product-selector",children:[p.map((w,D)=>s.jsxs("div",{className:"product-row",children:[s.jsxs("select",{value:w.productId,onChange:L=>N(D,"productId",L.target.value),className:"form__select",children:[s.jsx("option",{value:"",children:"Seleccionar producto..."}),a.map(L=>s.jsxs("option",{value:L.id,children:[L.name," - $",L.sellPrice||L.price||0]},L.id))]}),s.jsx("input",{type:"number",value:w.qty,onChange:L=>N(D,"qty",parseInt(L.target.value)||1),className:"form__input form__input--small",min:"1",placeholder:"Cant"}),s.jsx("input",{type:"number",value:w.price,onChange:L=>N(D,"price",parseFloat(L.target.value)||0),className:"form__input form__input--small",min:"0",step:"0.01",placeholder:"Precio"}),s.jsx("button",{type:"button",className:"btn btn--danger btn--small",onClick:()=>C(D),children:"×"})]},D)),s.jsx("button",{type:"button",className:"btn btn--secondary btn--small",onClick:T,children:"+ Agregar Producto"})]})]}),s.jsxs("div",{className:"form__actions",children:[s.jsx("button",{type:"button",className:"btn btn--secondary",onClick:()=>j(!1),children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn btn--primary",children:"Crear Escenario"})]})]})})]})}),r.length>0&&s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card__header",children:s.jsx("h2",{children:"Escenarios Configurados"})}),s.jsx("div",{className:"card__body",children:s.jsx("div",{className:"scenarios-grid",children:r.map(w=>s.jsxs("div",{className:"scenario-card",children:[s.jsx("h3",{children:w.name}),s.jsxs("div",{className:"scenario-details",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Productos:"})," ",w.params.lines.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Subtotal:"})," $",w.params.lines.reduce((D,L)=>D+L.lineTotal,0).toFixed(2)]})]}),s.jsx("div",{className:"scenario-products",children:w.params.lines.map((D,L)=>s.jsxs("div",{className:"product-line",children:[D.qty,"x ",D.name," @ $",D.unitPrice]},L))})]},w.id))})})]}),o.length>0&&s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card__header",children:s.jsx("h2",{children:"Resultados de Simulación"})}),s.jsx("div",{className:"card__body",children:s.jsx("div",{className:"results-table",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Escenario"}),s.jsx("th",{children:"Subtotal"}),s.jsx("th",{children:"Descuentos"}),s.jsx("th",{children:"Impuestos"}),s.jsx("th",{children:"Total"}),s.jsx("th",{children:"Promociones Aplicadas"})]})}),s.jsx("tbody",{children:o.map((w,D)=>s.jsxs("tr",{className:w.result.error?"error-row":"",children:[s.jsx("td",{children:s.jsx("strong",{children:w.scenario.name})}),s.jsxs("td",{children:["$",w.result.subTotal.toFixed(2)]}),s.jsxs("td",{className:"discount-amount",children:["-$",w.result.discountTotal.toFixed(2)]}),s.jsxs("td",{children:["$",w.result.taxTotal.toFixed(2)]}),s.jsx("td",{children:s.jsxs("strong",{children:["$",w.result.total.toFixed(2)]})}),s.jsx("td",{children:w.result.error?s.jsx("span",{className:"error-text",children:w.result.error}):w.result.appliedPromotions.length>0?s.jsx("ul",{className:"promo-list",children:w.result.appliedPromotions.map((L,Q)=>s.jsxs("li",{children:[L.description," (-$",L.discountAmount.toFixed(2),")"]},Q))}):s.jsx("em",{children:"Ninguna"})})]},D))})]})})})]})]})]})},Nx=()=>{const{services:e,repos:t}=ze(),[a,n]=v.useState([]),[l,i]=v.useState([]),[r,c]=v.useState(!1),[o,u]=v.useState(!1),[f,m]=v.useState(""),[d,h]=v.useState(""),[b,j]=v.useState(""),[S,g]=v.useState(""),[p,y]=v.useState("-1.5"),[x,T]=v.useState([.8,.9,1.1,1.2,1.5]),[N,C]=v.useState("");v.useEffect(()=>{A()},[t]);const A=async()=>{var R,O;try{if((R=t==null?void 0:t.products)!=null&&R.col){const U=await t.products.col.find().limit(100).exec();i(U.map(Y=>Y.toJSON()))}if((O=t==null?void 0:t.priceExperiments)!=null&&O.col){const U=await t.priceExperiments.col.find().sort("-createdAt").limit(50).exec();n(U.map(Y=>Y.toJSON()))}}catch(U){console.error("Error loading data:",U),m("Error al cargar datos")}},M=R=>{h(R);const O=l.find(U=>U.id===R);if(O){const U=O.sellPrice||O.price||0;j(U.toString())}},E=(R,O,U)=>x.map((Y,He)=>{const Ke=R*Y,fa=(Ke-R)/R,xt=U*fa,ma=Math.max(0,O*(1+xt)),oh=Ke*ma;return{id:`scenario_${He}`,price:Ke,estQuantity:Math.round(ma*100)/100,estRevenue:Math.round(oh*100)/100}}),w=async R=>{var He;if(R.preventDefault(),!d||!b||!S||!p){m("Por favor complete todos los campos obligatorios");return}const O=parseFloat(b),U=parseFloat(S),Y=parseFloat(p);if(isNaN(O)||isNaN(U)||isNaN(Y)||O<=0||U<=0){m("Por favor ingrese valores numéricos válidos");return}u(!0),m("");try{const Ke={price:O,quantity:U,elasticity:Y},fa=E(O,U,Y);(He=e==null?void 0:e.priceExperiments)!=null&&He.recordExperiment?(await e.priceExperiments.recordExperiment({productId:d,scenarios:fa,base:Ke}),await A(),D()):m("Servicio de experimentos no disponible")}catch(Ke){m(Ke.message||"Error al crear experimento")}finally{u(!1)}},D=()=>{h(""),j(""),g(""),y("-1.5"),C(""),c(!1),m("")},L=()=>{T([...x,1])},Q=(R,O)=>{const U=[...x];U[R]=O,T(U)},Z=R=>{T(x.filter((O,U)=>U!==R))},z=R=>{const O=l.find(U=>U.id===R);return(O==null?void 0:O.name)||"Producto desconocido"};return s.jsxs("div",{className:"price-experiments-page",children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h1",{children:"📊 Experimentos de Precios"}),s.jsx("p",{children:"Análisis de elasticidad de precios y proyecciones de demanda"}),s.jsx("button",{className:"btn btn--primary",onClick:()=>c(!0),children:"+ Nuevo Experimento"})]}),f&&s.jsxs("div",{className:"alert alert--danger",children:[s.jsx("strong",{children:"Error:"})," ",f]}),r&&s.jsx("div",{className:"modal-overlay",onClick:D,children:s.jsxs("div",{className:"modal modal--large",onClick:R=>R.stopPropagation(),children:[s.jsxs("div",{className:"modal__header",children:[s.jsx("h2",{children:"Nuevo Experimento de Precios"}),s.jsx("button",{className:"modal__close",onClick:D,children:"×"})]}),s.jsx("div",{className:"modal__body",children:s.jsxs("form",{onSubmit:w,className:"form",children:[s.jsx("div",{className:"form__row",children:s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"Producto *"}),s.jsxs("select",{value:d,onChange:R=>M(R.target.value),className:"form__select",required:!0,children:[s.jsx("option",{value:"",children:"Seleccionar producto..."}),l.map(R=>s.jsxs("option",{value:R.id,children:[R.name," - $",R.sellPrice||R.price||0]},R.id))]})]})}),s.jsxs("div",{className:"form__row",children:[s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"Precio Base Actual *"}),s.jsx("input",{type:"number",value:b,onChange:R=>j(R.target.value),className:"form__input",placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"Cantidad Base (mensual) *"}),s.jsx("input",{type:"number",value:S,onChange:R=>g(R.target.value),className:"form__input",placeholder:"100",min:"0",required:!0})]}),s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"Elasticidad de Precios *"}),s.jsx("input",{type:"number",value:p,onChange:R=>y(R.target.value),className:"form__input",placeholder:"-1.5",step:"0.1",required:!0}),s.jsx("small",{className:"form__help",children:"Valores típicos: -0.5 (inelástico) a -2.5 (muy elástico)"})]})]}),s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"Variaciones de Precio (multiplicadores)"}),s.jsxs("div",{className:"price-variations",children:[x.map((R,O)=>s.jsxs("div",{className:"variation-row",children:[s.jsx("input",{type:"number",value:R,onChange:U=>Q(O,parseFloat(U.target.value)||1),className:"form__input form__input--small",min:"0.1",max:"10",step:"0.1"}),s.jsxs("span",{className:"variation-preview",children:["$",b?(parseFloat(b)*R).toFixed(2):"0.00"]}),s.jsx("button",{type:"button",className:"btn btn--danger btn--small",onClick:()=>Z(O),disabled:x.length<=1,children:"×"})]},O)),s.jsx("button",{type:"button",className:"btn btn--secondary btn--small",onClick:L,children:"+ Agregar Variación"})]})]}),s.jsxs("div",{className:"form__group",children:[s.jsx("label",{className:"form__label",children:"Notas"}),s.jsx("textarea",{value:N,onChange:R=>C(R.target.value),className:"form__textarea",placeholder:"Contexto del experimento, supuestos, etc.",rows:3})]}),s.jsxs("div",{className:"form__actions",children:[s.jsx("button",{type:"button",className:"btn btn--secondary",onClick:D,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn btn--primary",disabled:o,children:o?"Creando...":"Crear Experimento"})]})]})})]})}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card__header",children:s.jsx("h2",{children:"Experimentos Registrados"})}),s.jsx("div",{className:"card__body",children:a.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"No hay experimentos de precios registrados aún"}),s.jsx("button",{className:"btn btn--primary",onClick:()=>c(!0),children:"Crear primer experimento"})]}):s.jsx("div",{className:"experiments-grid",children:a.map(R=>s.jsxs("div",{className:"experiment-card",children:[s.jsxs("div",{className:"experiment-header",children:[s.jsx("h3",{children:z(R.productId)}),s.jsx("span",{className:"experiment-date",children:new Date(R.createdAt).toLocaleDateString("es-ES")})]}),s.jsx("div",{className:"experiment-base",children:s.jsxs("div",{className:"base-metrics",children:[s.jsxs("div",{className:"metric",children:[s.jsx("label",{children:"Precio Base"}),s.jsxs("div",{className:"metric-value",children:["$",R.base.price]})]}),s.jsxs("div",{className:"metric",children:[s.jsx("label",{children:"Cantidad Base"}),s.jsx("div",{className:"metric-value",children:R.base.quantity})]}),s.jsxs("div",{className:"metric",children:[s.jsx("label",{children:"Elasticidad"}),s.jsx("div",{className:"metric-value",children:R.base.elasticity})]})]})}),s.jsxs("div",{className:"experiment-scenarios",children:[s.jsx("h4",{children:"Escenarios de Precio"}),s.jsx("div",{className:"scenarios-table",children:s.jsxs("table",{className:"table table--compact",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Precio"}),s.jsx("th",{children:"Cantidad Est."}),s.jsx("th",{children:"Ingresos Est."}),s.jsx("th",{children:"Cambio %"})]})}),s.jsx("tbody",{children:R.scenarios.map(O=>{(O.price-R.base.price)/R.base.price*100;const U=(O.estRevenue-R.base.price*R.base.quantity)/(R.base.price*R.base.quantity)*100;return s.jsxs("tr",{className:U>0?"positive-change":U<0?"negative-change":"",children:[s.jsxs("td",{children:["$",O.price.toFixed(2)]}),s.jsx("td",{children:O.estQuantity}),s.jsxs("td",{children:["$",O.estRevenue.toFixed(2)]}),s.jsx("td",{children:s.jsxs("span",{className:`change-indicator ${U>0?"positive":U<0?"negative":"neutral"}`,children:[U>0?"+":"",U.toFixed(1),"%"]})})]},O.id)})})]})})]}),R.notes&&s.jsxs("div",{className:"experiment-notes",children:[s.jsx("h4",{children:"Notas"}),s.jsx("p",{children:R.notes})]}),s.jsx("div",{className:"experiment-meta",children:s.jsxs("small",{children:["Por: ",R.user||"Sistema"," | Modelo: ",R.modelVersion||"v1"," | ID: ",R.id]})})]},R.id))})})]})]})},xe=({children:e})=>{const{services:t}=ze();if(!(t!=null&&t.auth))return console.error("Auth service not available"),s.jsx(pi,{to:"/login",replace:!0});try{return t.auth.isAuthenticated()?(console.log("User is authenticated, rendering protected content"),s.jsx(s.Fragment,{children:e})):(console.log("User not authenticated, redirecting to login"),s.jsx(pi,{to:"/login",replace:!0}))}catch(a){return console.error("Error checking authentication:",a),s.jsx(pi,{to:"/login",replace:!0})}},Tx=({title:e})=>s.jsxs("div",{style:{padding:"1rem"},children:[s.jsx("h2",{children:e}),s.jsx("p",{style:{fontSize:".75rem",color:"#666"},children:"Vista aún no migrada a React. TODO."})]}),Cx=()=>{const[e,t]=v.useState(!1),a=()=>{t(!e)},n=()=>{t(!1)};return s.jsx(Gv,{children:s.jsx(Qv,{children:s.jsx(Iv,{children:s.jsxs("div",{className:`layout ${e?"drawer-open":""}`,children:[s.jsx(Hv,{isOpen:e,onClose:n}),s.jsx(Vv,{onMenuToggle:a}),s.jsx("main",{className:"main",children:s.jsxs(lv,{children:[s.jsx(de,{path:"/login",element:s.jsx(ex,{})}),s.jsx(de,{path:"/productos",element:s.jsx(xe,{children:s.jsx($v,{})})}),s.jsx(de,{path:"/menu",element:s.jsx(xe,{children:s.jsx(dx,{})})}),s.jsx(de,{path:"/ventas",element:s.jsx(xe,{children:s.jsx(hx,{})})}),s.jsx(de,{path:"/ordenes",element:s.jsx(xe,{children:s.jsx(px,{})})}),s.jsx(de,{path:"/promociones",element:s.jsx(xe,{children:s.jsx(jx,{})})}),s.jsx(de,{path:"/promo-sim",element:s.jsx(xe,{children:s.jsx(Ex,{})})}),s.jsx(de,{path:"/price-experiments",element:s.jsx(xe,{children:s.jsx(Nx,{})})}),s.jsx(de,{path:"/merma",element:s.jsx(xe,{children:s.jsx(Sx,{})})}),s.jsx(de,{path:"/roles",element:s.jsx(xe,{children:s.jsx(sx,{})})}),s.jsx(de,{path:"/usuarios",element:s.jsx(xe,{children:s.jsx(lx,{})})}),s.jsx(de,{path:"/reportes",element:s.jsx(xe,{children:s.jsx(nx,{})})}),s.jsx(de,{path:"/audit",element:s.jsx(xe,{children:s.jsx(ax,{})})}),s.jsx(de,{path:"/configuracion",element:s.jsx(xe,{children:s.jsx(gx,{})})}),s.jsx(de,{path:"/impuestos",element:s.jsx(xe,{children:s.jsx(yx,{})})}),s.jsx(de,{path:"/form-demo",element:s.jsx(xe,{children:s.jsx(vx,{})})}),s.jsx(de,{path:"/components-demo",element:s.jsx(xe,{children:s.jsx(xx,{})})}),s.jsx(de,{path:"/login-modern",element:s.jsx(xe,{children:s.jsx(bx,{})})}),s.jsx(de,{path:"/sync",element:s.jsx(xe,{children:s.jsx(Tx,{title:"Sync"})})}),s.jsx(de,{path:"*",element:s.jsx(pi,{to:"/menu",replace:!0})})]})}),s.jsx("footer",{children:"© 2025 Pizzería del Barrio | POS Offline"}),s.jsx(Yv,{}),s.jsx(Kv,{})]})})})})},wx={title:"order schema v7",version:7,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:64},createdAt:{type:"string",format:"date-time",maxLength:40},status:{type:"string",enum:["completed","canceled","fulfilled"]},branchId:{type:"string",maxLength:64},lines:{type:"array",minItems:1,items:{type:"object",properties:{productId:{type:"string",maxLength:64},name:{type:"string",maxLength:120},qty:{type:"number",minimum:1e-4,multipleOf:1e-4},unitPrice:{type:"number",minimum:0,multipleOf:.01},lineTotal:{type:"number",minimum:0,multipleOf:.01},category:{type:"string",maxLength:64},stdUnitCost:{type:"number",minimum:0,multipleOf:1e-4},realUnitCost:{type:"number",minimum:0,multipleOf:1e-4},varianceUnit:{type:"number"}},required:["productId","name","qty","unitPrice","lineTotal"]}},netBeforePromotions:{type:"number"},netAfterPromotions:{type:"number"},promotionDiscountTotal:{type:"number"},appliedPromotions:{type:"array",items:{type:"object",properties:{promoId:{type:"string",maxLength:64},description:{type:"string",maxLength:160},discountAmount:{type:"number",minimum:0,multipleOf:.01}},required:["promoId","discountAmount"]}},discountTotal:{type:"number",minimum:0,multipleOf:.01},subTotal:{type:"number",minimum:0,multipleOf:.01},taxLines:{type:"array",items:{type:"object",properties:{code:{type:"string",maxLength:32},base:{type:"number",minimum:0},rate:{type:"number",minimum:0},amount:{type:"number",minimum:0},scope:{type:"string",enum:["line","global"]}},required:["code","base","rate","amount","scope"]}},taxTotal:{type:"number",minimum:0},tipAmount:{type:"number",minimum:0},grandTotalBase:{type:"number",minimum:0},grandTotalTx:{type:"number",minimum:0},currencyUsed:{type:"string",maxLength:8},fxRate:{type:"number",minimum:0},payments:{type:"array",items:{type:"object",properties:{method:{type:"string",maxLength:32},amount:{type:"number",minimum:0,multipleOf:.01},currency:{type:"string",maxLength:8},amountBase:{type:"number",minimum:0,multipleOf:.01}},required:["method","amount","currency","amountBase"]}},amountPaidBase:{type:"number",minimum:0},changeDueBase:{type:"number"},paymentStatus:{type:"string",enum:["unpaid","partial","paid"]},customerPhone:{type:"string",maxLength:32},customerName:{type:"string",maxLength:120},costStdTotalBase:{type:"number",minimum:0},costRealTotalBase:{type:"number",minimum:0},costVarianceBase:{type:"number"},kitchenStatus:{type:"string",enum:["pending","in_progress","done"]},kitchenItems:{type:"array",items:{type:"object",properties:{lineId:{type:"string",maxLength:64},productName:{type:"string",maxLength:120},qty:{type:"number",minimum:0},doneQty:{type:"number",minimum:0}},required:["lineId","productName","qty"]}},sync:{type:"object",properties:{synced:{type:"boolean"},lastAttempt:{type:"string",format:"date-time",maxLength:40}}},invoicePrinted:{type:"boolean"},kitchenPrinted:{type:"boolean"}},required:["id","createdAt","status","lines"]},_x={title:"promotion schema v2",version:2,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:64},name:{type:"string",maxLength:160},type:{type:"string",enum:["BUY_X_GET_Y","SECOND_DISCOUNT","COMBO_FIXED","PERCENT_CART","CUSTOM"]},active:{type:"boolean"},priority:{type:"number",minimum:0},stackable:{type:"boolean"},excludes:{type:"array",items:{type:"string",maxLength:64}},config:{type:"object",additionalProperties:!0},appliesToBranchIds:{type:"array",items:{type:"string",maxLength:64}},validFrom:{type:"string",format:"date-time",maxLength:40},validTo:{type:"string",format:"date-time",maxLength:40},logic:{type:"object",additionalProperties:!0},dsl:{type:"string",maxLength:4e3}},required:["id","name","type","active"]},Ax={title:"product schema",version:0,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:64},name:{type:"string",maxLength:160},category:{type:"string",maxLength:64},sku:{type:"string",maxLength:64},barcode:{type:"string",maxLength:64},basePrice:{type:"number",minimum:0,multipleOf:1e-4},active:{type:"boolean"},taxCategory:{type:"string",maxLength:32},recipeId:{type:"string",maxLength:64},variantsEnabled:{type:"boolean"},createdAt:{type:"string",format:"date-time",maxLength:40},updatedAt:{type:"string",format:"date-time",maxLength:40}},required:["id","name","active","createdAt"]},Rx={title:"customer schema",version:0,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:64},name:{type:"string",maxLength:160},phone:{type:"string",maxLength:32},email:{type:"string",maxLength:120,pattern:"^.+@.+\\..+$"},segment:{type:"string",maxLength:32},createdAt:{type:"string",format:"date-time",maxLength:40},updatedAt:{type:"string",format:"date-time",maxLength:40},totalSpendBase:{type:"number",minimum:0},visits:{type:"number",minimum:0}},required:["id","name","createdAt"]},Ox={title:"user schema",version:1,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:64},username:{type:"string",maxLength:64},name:{type:"string",maxLength:120},roleId:{type:"string",maxLength:64},branchId:{type:"string",maxLength:64},active:{type:"boolean"},createdAt:{type:"string",format:"date-time",maxLength:40},passwordHash:{type:"string",maxLength:128},lastLoginAt:{type:"string",format:"date-time",maxLength:40},mustChangePassword:{type:"boolean"},passwordChangedAt:{type:"string",format:"date-time",maxLength:40}},required:["id","username","active","createdAt"]},Dx={title:"role schema",version:0,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:64},name:{type:"string",maxLength:64},permissions:{type:"array",items:{type:"string",maxLength:64}},createdAt:{type:"string",format:"date-time",maxLength:40},updatedAt:{type:"string",format:"date-time",maxLength:40}},required:["id","name","permissions","createdAt"]},zx={title:"audit log schema",version:0,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:80},at:{type:"string",format:"date-time",maxLength:40},user:{type:"string",maxLength:64},action:{type:"string",maxLength:64},entity:{type:"string",maxLength:64},entityId:{type:"string",maxLength:80},data:{type:"object",additionalProperties:!0},ip:{type:"string",maxLength:64}},required:["id","at","action"]},Ux={title:"sync queue schema",version:1,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:90},createdAt:{type:"string",format:"date-time",maxLength:40},entityCollection:{type:"string",maxLength:64},docId:{type:"string",maxLength:80},op:{type:"string",enum:["INSERT","UPDATE","DELETE"]},payload:{type:"object",additionalProperties:!0},retries:{type:"number",minimum:0},lastAttemptAt:{type:"string",format:"date-time",maxLength:40},status:{type:"string",enum:["pending","sent","failed"]}},required:["id","createdAt","entityCollection","docId","op"]},Mx={title:"ingredient schema",version:0,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:64},name:{type:"string",maxLength:120},category:{type:"string",maxLength:64},unit:{type:"string",maxLength:16},avgCost:{type:"number",minimum:0,multipleOf:1e-4},lastCost:{type:"number",minimum:0,multipleOf:1e-4},updatedAt:{type:"string",format:"date-time",maxLength:40},createdAt:{type:"string",format:"date-time",maxLength:40},active:{type:"boolean"}},required:["id","name","unit","avgCost","createdAt","active"]},Lx={title:"recipe schema",version:0,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:64},productId:{type:"string",maxLength:64},components:{type:"array",minItems:1,items:{type:"object",properties:{ingredientId:{type:"string",maxLength:64},qty:{type:"number",minimum:0,multipleOf:1e-4},wastagePct:{type:"number",minimum:0,maximum:100}},required:["ingredientId","qty"]}},yield:{type:"number",minimum:1e-4},createdAt:{type:"string",format:"date-time",maxLength:40},active:{type:"boolean"}},required:["id","productId","components","yield","createdAt","active"]},Bx={title:"recipe variant schema",version:0,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:64},recipeId:{type:"string",maxLength:64},name:{type:"string",maxLength:120},active:{type:"boolean"},components:{type:"array",items:{type:"object",properties:{ingredientId:{type:"string",maxLength:64},qty:{type:"number",minimum:0,multipleOf:1e-4}},required:["ingredientId","qty"]}},createdAt:{type:"string",format:"date-time",maxLength:40}},required:["id","recipeId","name","active","components","createdAt"]},qx={title:"stock movement schema",version:0,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:80},createdAt:{type:"string",format:"date-time",maxLength:40},type:{type:"string",enum:["CONSUMPTION","ADJUSTMENT","WASTE","PURCHASE"]},ingredientId:{type:"string",maxLength:64},productId:{type:"string",maxLength:64},qty:{type:"number",minimum:0,multipleOf:1e-4},unitCostBase:{type:"number",minimum:0,multipleOf:1e-4},branchId:{type:"string",maxLength:64},reference:{type:"string",maxLength:64},note:{type:"string",maxLength:240},source:{type:"string",maxLength:64}},required:["id","createdAt","type","qty"]},Hx={title:"product price history schema",version:0,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:100},productId:{type:"string",maxLength:64},currency:{type:"string",maxLength:8,pattern:"^[A-Z]{3,5}$"},price:{type:"number",minimum:0,multipleOf:1e-4},validFrom:{type:"string",format:"date-time",maxLength:40},validTo:{type:"string",format:"date-time",maxLength:40},source:{type:"string",enum:["manual","sync","import"]},note:{type:"string",maxLength:240}},required:["id","productId","currency","price","validFrom"]},Px={title:"simulation run schema",version:0,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:80},createdAt:{type:"string",format:"date-time",maxLength:40},scenarioHash:{type:"string",maxLength:64},scenarioInput:{type:"object",additionalProperties:!0},result:{type:"object",additionalProperties:!0},metrics:{type:"object",properties:{grandTotalBase:{type:"number"},discountTotal:{type:"number"},promotionDiscountTotal:{type:"number"},taxTotal:{type:"number"},tipAmount:{type:"number"},costVarianceBase:{type:"number"}}},tags:{type:"array",items:{type:"string",maxLength:48}},user:{type:"string",maxLength:64}},required:["id","createdAt","scenarioHash","scenarioInput","result"]},Vx={title:"price experiment schema",version:0,primaryKey:{key:"id",fields:["id"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:80},productId:{type:"string",maxLength:64},createdAt:{type:"string",format:"date-time",maxLength:40},base:{type:"object",properties:{price:{type:"number",minimum:0},quantity:{type:"number",minimum:0},elasticity:{type:"number"}},required:["price","quantity","elasticity"]},scenarios:{type:"array",items:{type:"object",properties:{id:{type:"string",maxLength:64},price:{type:"number",minimum:0},estQuantity:{type:"number",minimum:0},estRevenue:{type:"number",minimum:0}},required:["id","price","estQuantity","estRevenue"]}},modelVersion:{type:"string",maxLength:32},tags:{type:"array",items:{type:"string",maxLength:48}},notes:{type:"string",maxLength:240},user:{type:"string",maxLength:64}},required:["id","productId","createdAt","base","scenarios"]},kx={title:"tax schema",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string"},code:{type:"string"},name:{type:"string"},rate:{type:"number"},scope:{type:"string"},appliesToCategories:{type:"array",items:{type:"string"}},active:{type:"boolean"}},required:["id","code","rate","scope"]},Yx={0:e=>(e.invoicePrinted=e.invoicePrinted??!1,e.kitchenPrinted=e.kitchenPrinted??!1,e),1:e=>(e.subTotal=e.subTotal??e.total??0,e.discountTotal=e.discountTotal??0,e.taxTotal=e.taxTotal??0,e),2:e=>(e.appliedPromotions=e.appliedPromotions||[],e.promotionDiscountTotal=e.promotionDiscountTotal??0,e.netBeforePromotions=e.netBeforePromotions??e.subTotal??0,e.netAfterPromotions=e.netAfterPromotions??e.subTotal??0,e),3:e=>(e.branchId=e.branchId||"b_default",e),4:e=>(e.costStdTotalBase=e.costStdTotalBase??0,e.costRealTotalBase=e.costRealTotalBase??0,e.costVarianceBase=e.costVarianceBase??0,Array.isArray(e.lines)&&e.lines.forEach(t=>{t.stdUnitCost=t.stdUnitCost??0,t.realUnitCost=t.realUnitCost??0,t.varianceUnit=t.varianceUnit??0}),e),5:e=>(e.currencyUsed=e.currencyUsed||"BASE",e.fxRate=e.fxRate??1,e.grandTotalBase=e.grandTotalBase??(e.grossTotal||e.total||0),e.grandTotalTx=e.grandTotalTx??e.grandTotalBase,e),6:e=>(e.tipAmount=e.tipAmount??0,e.paymentStatus||((e.amountPaidBase??0)===0?e.paymentStatus="unpaid":(e.amountPaidBase??0)+.001<(e.grandTotalBase??0)?e.paymentStatus="partial":e.paymentStatus="paid"),e)},Gx={0:e=>(e.stackable=e.stackable??!0,e),1:e=>(e.excludes=e.excludes||[],e.logic=e.logic||null,e.dsl=e.dsl||"",e)},Xx={1:function(e){return{...e,mustChangePassword:!1,passwordChangedAt:e.createdAt||new Date().toISOString()}}};ic(ph);ic(gh);ic(yh);async function Qx(){console.log("[DB] Iniciando creación de base de datos...");try{const e=await mh({name:"pos_pizzeria_v8",storage:hh()});return console.log("[DB] RxDatabase creada exitosamente"),console.log("[DB] Agregando colecciones..."),await e.addCollections({products:{schema:Ax},customers:{schema:Rx},orders:{schema:wx,migrationStrategies:Yx},promotions:{schema:_x,migrationStrategies:Gx},users:{schema:Ox,migrationStrategies:Xx},roles:{schema:Dx},taxes:{schema:kx},audit_logs:{schema:zx},sync_queue:{schema:Ux},ingredients:{schema:Mx},recipes:{schema:Lx},recipe_variants:{schema:Bx},stock_movements:{schema:qx},product_price_history:{schema:Hx},simulation_runs:{schema:Px},price_experiments:{schema:Vx}}),console.log("[DB] Colecciones agregadas exitosamente"),e}catch(e){throw console.error("[DB] Error inicializando base de datos:",e),e}}class Zx{constructor(t){this.col=t.products}async getAll(){return this.col.find().sort({name:"asc"}).exec()}async findById(t){return this.col.findOne(t).exec()}async searchByName(t){const a=new RegExp(t,"i");return this.col.find({selector:{name:{$regex:a}}}).exec()}}class Ix{constructor(t){this.col=t.customers}async findByPhone(t){return this.col.findOne({selector:{phone:t}}).exec()}async create(t){const n={id:"c"+t.phone,...t};return await this.col.insert(n),n}}class Kx{constructor(t){this.col=t.orders}async create(t){return await this.col.insert(t),t}async list(t=50){return this.col.find().sort({createdAt:"desc"}).limit(t).exec()}async listRecent(t=100){return(await this.col.find().sort({createdAt:"desc"}).limit(t).exec()).map(n=>n.toJSON())}async findById(t){const a=await this.col.findOne(t).exec();return a?a.toJSON():null}async updateStatus(t,a){const n=await this.col.findOne(t).exec();return n?(await n.incrementalPatch({status:a}),n.toJSON()):null}}class $x{constructor(t){this.col=t.users}async findByUsername(t){const a=await this.col.findOne({selector:{username:t}}).exec();return(a==null?void 0:a.toJSON())||null}async findById(t){const a=await this.col.findOne(t).exec();return(a==null?void 0:a.toJSON())||null}async list(){return(await this.col.find().exec()).map(t=>t.toJSON())}async create(t){return await this.col.insert(t),t}async update(t,a){const n=await this.col.findOne(t).exec();return n?(await n.incrementalPatch(a),n.toJSON()):null}async setPassword(t,a){const n=await this.col.findOne(t).exec();return n?(await n.incrementalPatch({passwordHash:a,passwordChangedAt:new Date().toISOString(),mustChangePassword:!1}),n.toJSON()):null}}class Jx{constructor(t){this.col=t.roles}async getAll(){return(await this.col.find().exec()).map(t=>t.toJSON())}async findById(t){const a=await this.col.findOne(t).exec();return(a==null?void 0:a.toJSON())||null}async findByName(t){const a=await this.col.findOne({selector:{name:t}}).exec();return(a==null?void 0:a.toJSON())||null}async create(t){return await this.col.insert(t),t}async update(t,a){const n=await this.col.findOne(t).exec();return n?(await n.incrementalPatch(a),n.toJSON()):null}}class Wx{constructor(t){this.col=t.audit_logs}async log(t){await this.col.insert(t)}async list(t=200){return(await this.col.find().sort({timestamp:"desc"}).limit(t).exec()).map(a=>a.toJSON())}async filterByAction(t,a=100){return(await this.col.find({selector:{action:t}}).limit(a).exec()).map(n=>n.toJSON())}}class Fx{constructor(t){this.col=t.sync_queue}async enqueue(t){await this.col.insert(t)}async pending(t=50){return(await this.col.find().sort({createdAt:"asc"}).limit(t).exec()).map(a=>a.toJSON())}async remove(t){const a=await this.col.findOne(t).exec();a&&await a.remove()}async incrementTried(t){const a=await this.col.findOne(t).exec();a&&await a.incrementalPatch({retries:(a.get("retries")||0)+1,lastAttemptAt:new Date().toISOString()})}}class eb{constructor(t){this.col=t.taxes}async allActive(){return(await this.col.find({selector:{active:!0}}).exec()).map(t=>t.toJSON())}async all(){return(await this.col.find().exec()).map(t=>t.toJSON())}async create(t){return await this.col.insert(t),t}async update(t,a){const n=await this.col.findOne(t).exec();return n?(await n.incrementalPatch(a),n.toJSON()):null}async delete(t){const a=await this.col.findOne(t).exec();return a?(await a.remove(),!0):!1}}class tb{constructor(t){this.col=t.promotions}async active(t,a=new Date().toISOString()){return(await this.col.find({selector:{active:!0}}).exec()).map(l=>l.toJSON()).filter(l=>{const i=(!l.validFrom||l.validFrom<=a)&&(!l.validTo||l.validTo>=a),r=!l.appliesToBranchIds||l.appliesToBranchIds.length===0||l.appliesToBranchIds.includes(t);return i&&r}).sort((l,i)=>(l.priority||0)-(i.priority||0))}}function An(e=""){return e+Math.random().toString(36).substring(2,8)+Date.now().toString(36)}function sn(){return new Date().toISOString()}class ab{constructor(t){this.col=t}async create(t){const a=t.id||An("pexp_"),n={...t,id:a,createdAt:t.createdAt||sn()};return await this.col.insert(n),n}async recent(t=50){return(await this.col.find().sort({createdAt:"desc"}).limit(t).exec()).map(n=>n.toJSON())}async byProduct(t,a=50){return(await this.col.find({selector:{productId:t}}).sort({createdAt:"desc"}).limit(a).exec()).map(l=>l.toJSON())}}class nb{constructor(t="app_cart_v1",a=typeof localStorage<"u"?localStorage:null){G(this,"lines",new Map);G(this,"_storageKey");G(this,"_storage");G(this,"_taxService",null);G(this,"_taxes",[]);this._storageKey=t,this._storage=a,this._load()}setTaxService(t){this._taxService=t,this._loadTaxes()}async _loadTaxes(){if(this._taxService)try{this._taxes=await this._taxService.getActiveTaxes()}catch(t){console.error("Error loading taxes:",t),this._taxes=[]}}async addProduct(t){if(!t||!t.id)return;const a=this.lines.get(t.id),n=typeof t.unitPrice=="number"?t.unitPrice:typeof t.price=="number"?t.price:typeof t.basePrice=="number"?t.basePrice:0,l=t.name||t.title||t.id,i=t.categoryId||t.category;if(a)a.qty+=1,a.lineTotal=a.qty*a.unitPrice,await this._calculateLineTaxes(a);else{const r={productId:t.id,name:l,qty:1,unitPrice:n,lineTotal:n,categoryId:i,lineTaxes:[]};await this._calculateLineTaxes(r),this.lines.set(t.id,r)}this._persist()}async changeQty(t,a){const n=this.lines.get(t);n&&(n.qty+=a,n.qty<=0?this.lines.delete(t):(n.lineTotal=n.qty*n.unitPrice,await this._calculateLineTaxes(n)),this._persist())}remove(t){this.lines.delete(t),this._persist()}clear(){this.lines.clear(),this._persist()}toArray(){return Array.from(this.lines.values())}total(){return this.getSummary().total}getSummary(){const t=this.toArray(),a=t.reduce((r,c)=>r+c.lineTotal,0),n=[];t.forEach(r=>{r.lineTaxes&&n.push(...r.lineTaxes)});const l=this._taxService?this._taxService.calculateGlobalTaxes(a,this._taxes):[],i=[...n,...l].reduce((r,c)=>r+c.amount,0);return{subtotal:a,lineTaxes:n,globalTaxes:l,totalTax:i,total:a+i,lineCount:t.length,itemCount:t.reduce((r,c)=>r+c.qty,0)}}isEmpty(){return this.lines.size===0}async recalculateTaxes(){await this._loadTaxes();for(const t of this.lines.values())await this._calculateLineTaxes(t);this._persist()}async _calculateLineTaxes(t){if(!this._taxService){t.lineTaxes=[];return}try{this._taxes=await this._taxService.getActiveTaxes()}catch(a){console.error("Error loading taxes for calculation:",a),this._taxes=[]}t.lineTaxes=this._taxService.calculateLineTaxes(t.lineTotal,t.categoryId,this._taxes)}_persist(){if(this._storage)try{const t={lines:this.toArray(),timestamp:Date.now()},a=JSON.stringify(t);this._storage.setItem(this._storageKey,a)}catch(t){console.error("Error persisting cart:",t)}}_load(){if(this._storage)try{const t=this._storage.getItem(this._storageKey);if(t){const a=JSON.parse(t),n=a.lines||a;Array.isArray(n)&&n.forEach(l=>{l.lineTaxes||(l.lineTaxes=[]),this.lines.set(l.productId,l)})}}catch(t){console.error("Error loading cart:",t)}}toOrderData(t={}){const a=this.getSummary(),n=this.toArray(),l=new Map;[...a.lineTaxes,...a.globalTaxes].forEach(r=>{const c=l.get(r.code);c?(c.base+=r.base,c.amount+=r.amount):l.set(r.code,{code:r.code,name:r.name,rate:r.rate,base:r.base,amount:r.amount,scope:r.scope})});const i=Array.from(l.values());return{id:`order_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),status:"completed",lines:n.map(r=>({productId:r.productId,name:r.name,qty:r.qty,unitPrice:r.unitPrice,lineTotal:r.lineTotal,categoryId:r.categoryId,lineTaxes:r.lineTaxes||[]})),subTotal:a.subtotal,taxLines:i,taxTotal:a.totalTax,total:a.total,...t}}}class ch extends Error{constructor(t,a="DOMAIN_ERROR",n){super(t),this.code=a,this.details=n,this.name="DomainError"}}class Gu extends ch{constructor(t,a){super(t,"VALIDATION_ERROR",a),this.name="ValidationError"}}class ir extends ch{constructor(t="No encontrado",a){super(t,"NOT_FOUND",a),this.name="NotFoundError"}}var lb={};class ib{constructor(t=typeof process<"u"&&lb?"info":"debug"){G(this,"minLevelIndex");G(this,"levels",["debug","info","warn","error"]);this.minLevelIndex=this.levels.indexOf(t)}should(t){return this.levels.indexOf(t)>=this.minLevelIndex}format(t){const a=`[${t.ts}] ${t.level.toUpperCase()} ${t.msg}`;return t.context?a+" "+JSON.stringify(t.context):a}debug(t,a){this.should("debug")&&console.debug(this.format({level:"debug",msg:t,ts:new Date().toISOString(),context:a}))}info(t,a){this.should("info")&&console.info(this.format({level:"info",msg:t,ts:new Date().toISOString(),context:a}))}warn(t,a){this.should("warn")&&console.warn(this.format({level:"warn",msg:t,ts:new Date().toISOString(),context:a}))}error(t,a){this.should("error")&&console.error(this.format({level:"error",msg:t,ts:new Date().toISOString(),context:a}))}}const B=new ib;class sb{constructor(t,a,n,l,i,r){G(this,"orderRepository");G(this,"cartService");G(this,"auditService");G(this,"authService");G(this,"queueRepository");G(this,"pricingService");this.orderRepository=t,this.cartService=a,this.auditService=n,this.authService=l,this.queueRepository=i,this.pricingService=r}async finalizeSale(t={}){const{customerData:a=null,discounts:n=[],payments:l=[]}=t;try{B.info("Starting sale finalization");const i=this.cartService.toArray();if(i.length===0)throw new Gu("No hay productos en el carrito");const r=this.cartService.getSummary(),c=this.pricingService.calculate(i,n),o=this.pricingService.evaluatePaymentStatus(c.grandTotal,l),u=this.buildOrder(r,c,o,a,n,l),f=await this.orderRepository.create(u);return this.cartService.clear(),await this.auditService.log("ORDER_FINALIZED",{orderId:f.id,total:f.total,user:this.authService.getUsername()}),B.info("Sale finalized successfully",{orderId:f.id}),f}catch(i){throw B.error("Error finalizing sale",{error:i.message}),i}}async cancelOrder(t){try{const a=await this.orderRepository.findById(t);if(!a)throw new ir("Orden no encontrada");if(a.status==="canceled")throw new Gu("La orden ya está cancelada");await this.orderRepository.updateStatus(t,"canceled"),await this.auditService.log("ORDER_CANCELED",{orderId:t,user:this.authService.getUsername()}),B.info("Order canceled",{orderId:t})}catch(a){throw B.error("Error canceling order",{orderId:t,error:a.message}),a}}async fulfillOrder(t){try{if(!await this.orderRepository.findById(t))throw new ir("Orden no encontrada");await this.orderRepository.updateStatus(t,"fulfilled"),await this.auditService.log("ORDER_FULFILLED",{orderId:t,user:this.authService.getUsername()}),B.info("Order fulfilled",{orderId:t})}catch(a){throw B.error("Error fulfilling order",{orderId:t,error:a.message}),a}}async markPrinted(t,a){try{if(!await this.orderRepository.findById(t))throw new ir("Orden no encontrada");const l={};a==="invoice"?(l.invoicePrinted=!0,l.invoicePrintedAt=sn()):a==="kitchen"&&(l.kitchenPrinted=!0,l.kitchenPrintedAt=sn()),B.debug("Print status would be updated",{orderId:t,type:a}),await this.auditService.log("ORDER_PRINT_MARKED",{orderId:t,printType:a,user:this.authService.getUsername()}),B.debug("Order marked as printed",{orderId:t,type:a})}catch(n){throw B.error("Error marking order as printed",{orderId:t,type:a,error:n.message}),n}}async getOrderById(t){try{return await this.orderRepository.findById(t)||null}catch(a){throw B.error("Error getting order by ID",{orderId:t,error:a.message}),a}}async getRecentOrders(t=50){try{return await this.orderRepository.listRecent(t)}catch(a){throw B.error("Error listing recent orders",{error:a.message}),a}}buildOrder(t,a,n,l,i,r){const c=An("order"),o=sn(),u=new Map;[...t.lineTaxes,...t.globalTaxes].forEach(m=>{const d=u.get(m.code);d?(d.base+=m.base,d.amount+=m.amount):u.set(m.code,{code:m.code,name:m.name,rate:m.rate,base:m.base,amount:m.amount,scope:m.scope})});const f={id:c,createdAt:o,status:"completed",lines:this.cartService.toArray().map(m=>({productId:m.productId,name:m.name,qty:m.qty,unitPrice:m.unitPrice,lineTotal:m.lineTotal})),taxLines:Array.from(u.values()),taxTotal:t.totalTax,discounts:i,payments:r,total:a.grandTotal};return l&&(f.customer=l,f.customerName=l.name,f.customerPhone=l.phone),f}}class rb{constructor(t,a,n,l={durationMinutes:60}){this.userRepository=t,this.roleRepository=a,this.audit=n,this.sessionConfig=l,this.currentUser=null,this.roleCache=new Map,this.permissionsCache=new Set,this.initialized=!1,this._loadFromStorage(),this._validateExpiration()}async initialize(){if(!this.initialized)try{this.currentUser&&(await this._loadPermissions(),console.log(`[Auth] Sesión restaurada para ${this.currentUser.username}`)),this.initialized=!0}catch(t){console.warn("[Auth] Error restaurando sesión:",t),this.logout(!0),this.initialized=!0}}async _hash(t){const a=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(n)).map(l=>l.toString(16).padStart(2,"0")).join("")}_saveToStorage(){this.currentUser?localStorage.setItem("pos_session",JSON.stringify(this.currentUser)):localStorage.removeItem("pos_session")}_loadFromStorage(){try{const t=localStorage.getItem("pos_session");t&&(this.currentUser=JSON.parse(t),console.log(`[Auth] Sesión cargada desde localStorage para ${this.currentUser.username}`))}catch(t){console.warn("[Auth] Error cargando sesión desde localStorage:",t),localStorage.removeItem("pos_session")}}_validateExpiration(){this.currentUser&&new Date(this.currentUser.expiresAt).getTime()<Date.now()&&this.logout(!0)}async login(t,a){const n=await this.userRepository.findByUsername(t);if(!n)throw new Error("Usuario no encontrado");if(n.active===!1)throw new Error("Usuario inactivo");if(await this._hash(a)!==n.passwordHash)throw new Error("Credenciales inválidas");const i=new Date(Date.now()+this.sessionConfig.durationMinutes*6e4).toISOString();return this.currentUser={username:n.username,userId:n.id,roleId:n.roleId,expiresAt:i},await this._loadPermissions(),this._saveToStorage(),await this.audit.log("LOGIN",{user:n.username}),n.mustChangePassword&&(this.currentUser.mustChangePassword=!0),this.currentUser}async _loadPermissions(){if(this.permissionsCache.clear(),!this.currentUser)return;const t=await this.roleRepository.findById(this.currentUser.roleId);if(!t)return;let a=t.permissions||[];a.includes("*")&&(a=JSON.parse(localStorage.getItem("all_perms_cache")||"[]")),a.forEach(n=>this.permissionsCache.add(n))}isAuthenticated(){this._validateExpiration();const t=!!this.currentUser;return t&&!this.initialized&&console.warn("[Auth] Usuario encontrado pero permisos no cargados aún"),t}isFullyAuthenticated(){return this.isAuthenticated()&&this.initialized}logout(t=!1){this.currentUser&&this.audit.log("LOGOUT",{user:this.currentUser.username,expired:t}),this.currentUser=null,this._saveToStorage()}getRoleId(){var t;return((t=this.currentUser)==null?void 0:t.roleId)||null}getUserId(){var t;return((t=this.currentUser)==null?void 0:t.userId)||null}getUsername(){var t;return((t=this.currentUser)==null?void 0:t.username)||null}hasPermission(t){return this.isAuthenticated()?this.permissionsCache.has(t)||this.permissionsCache.has("*"):!1}hasAny(...t){return t.some(a=>this.hasPermission(a))}async changeOwnPassword(t,a){if(!this.isAuthenticated())throw new Error("No autenticado");const n=await this.userRepository.findById(this.getUserId());if(await this._hash(t)!==n.passwordHash)throw new Error("Contraseña actual incorrecta");const i=await this._hash(a);await this.userRepository.setPassword(n.id,i),await this.audit.log("USER_PASSWORD_CHANGE",{user:n.username})}async adminResetPassword(t,a){const n=await this._hash(a);await this.userRepository.setPassword(t,n),await this.userRepository.update(t,{mustChangePassword:!0}),await this.audit.log("USER_PASSWORD_CHANGE",{targetUserId:t,admin:this.getUsername()})}}class cb{constructor(t){this.repo=t}async log(t,a={}){const n={id:An("audit_"),timestamp:sn(),action:t,user:a.user||a.admin||a.username||"",details:a};await this.repo.log(n)}async list(t=200){return this.repo.list(t)}}class ob{constructor(t,a){this.roleRepo=t,this.audit=a}async list(){return this.roleRepo.getAll()}async updateRole(t,a,n){const l=await this.roleRepo.update(t,a);return await this.audit.log("ROLE_UPDATE",{id:t,patch:a,actor:n}),l}async createRole(t,a){const n={id:An("role_"),...t};return await this.roleRepo.create(n),await this.audit.log("ROLE_UPDATE",{create:n.id,actor:a}),n}}class ub{constructor(t,a,n){this.repo=t,this.auth=a,this.audit=n}async list(){return this.repo.list()}async create({username:t,roleId:a,tempPassword:n}){if(!this.auth.hasPermission("USER_CREATE"))throw new Error("No autorizado");const l=await this.auth._hash(n),i={id:An("u_"),username:t,passwordHash:l,roleId:a,passwordChangedAt:null,active:!0,mustChangePassword:!0};return await this.repo.create(i),await this.audit.log("USER_CREATE",{username:t,roleId:a,by:this.auth.getUsername()}),i}async changeRole(t,a){if(!this.auth.hasPermission("USER_EDIT"))throw new Error("No autorizado");const n=await this.repo.update(t,{roleId:a});return await this.audit.log("USER_UPDATE_ROLE",{userId:t,newRoleId:a,by:this.auth.getUsername()}),n}async deactivate(t){if(!this.auth.hasPermission("USER_EDIT"))throw new Error("No autorizado");const a=await this.repo.update(t,{active:!1});return await this.audit.log("USER_UPDATE_ROLE",{userId:t,deactivated:!0,by:this.auth.getUsername()}),a}}class db{constructor(t){this.orderRepo=t}async salesByDateRange(t,a){const l=(await this.orderRepo.col.find().exec()).map(r=>r.toJSON()).filter(r=>r.createdAt>=t&&r.createdAt<=a&&r.status!=="canceled"),i=l.reduce((r,c)=>r+c.total,0);return{count:l.length,total:i,orders:l}}async topProducts(t,a,n=5){const{orders:l}=await this.salesByDateRange(t,a),i=new Map;return l.forEach(r=>{r.lines.forEach(c=>{const o=i.get(c.productId)||{productId:c.productId,name:c.name,qty:0,revenue:0};o.qty+=c.qty,o.revenue+=c.lineTotal,i.set(c.productId,o)})}),Array.from(i.values()).sort((r,c)=>c.qty-r.qty).slice(0,n)}async totalsByCategory(t,a){const{orders:n}=await this.salesByDateRange(t,a),l=new Map;return n.forEach(i=>{i.lines.forEach(r=>{const c=l.get(r.category)||{category:r.category,qty:0,revenue:0};c.qty+=r.qty,c.revenue+=r.lineTotal,l.set(r.category,c)})}),Array.from(l.values())}}class fb{constructor(t,a,n,l,i,r){this.remote=t,this.orderRepo=a,this.productRepo=n,this.userRepo=l,this.audit=i,this.queue=r,this.running=!1}async pushPending(){const t=await this.queue.pending(50);for(const a of t)try{await this.remote.push(a),await this.queue.remove(a.id),await this.audit.log("SYNC_PUSH",{collection:a.entityCollection,docId:a.docId})}catch{await this.queue.incrementTried(a.id)}}async pull(){try{const{products:t,orders:a}=await this.remote.pull();for(const n of t)await this.productRepo.findById(n.id)||await this.productRepo.col.insert(n);for(const n of a)await this.orderRepo.col.findOne(n.id).exec()||await this.orderRepo.col.insert(n);await this.audit.log("SYNC_PULL",{products:t.length,orders:a.length})}catch(t){console.error("Pull error",t)}}async runFullSync(){this.running||(this.running=!0,await this.pushPending(),await this.pull(),this.running=!1)}}class mb{calculate(t,a=[]){const n=t.reduce((o,u)=>o+u.lineTotal,0);let l=n;const i=[];a.forEach(o=>{let u=0;o.type==="PERCENT"?u=+(l*(o.value/100)).toFixed(2):o.type==="FIXED"&&(u=Math.min(l,o.value)),l-=u,i.push({type:o.type,value:o.value,label:o.label||(o.type==="PERCENT"?`${o.value}%`:`$${o.value}`),amount:u})});const r=i.reduce((o,u)=>o+u.amount,0),c=+(n-r).toFixed(2);return{subTotal:n,discountTotal:r,grandTotal:c,appliedDiscounts:i}}evaluatePaymentStatus(t,a){const n=a.reduce((r,c)=>r+c.amount,0),l=+(n-t).toFixed(2),i=n===0?"unpaid":n+1e-4<t?"partial":"paid";return{amountPaid:n,changeDue:l>0?l:0,paymentStatus:i}}}function hb(e={}){const{locale:t="es-AR",currency:a="ARS",minimumFractionDigits:n=2}=e,l=new Intl.NumberFormat(t,{style:"currency",currency:a,minimumFractionDigits:n});return i=>l.format(i||0)}class pb{constructor(t){G(this,"invoice");G(this,"kitchen");G(this,"escpos");G(this,"queue",[]);G(this,"processing",!1);G(this,"idSeq",0);G(this,"fallbackWindow",!0);G(this,"preferredMode","auto");G(this,"listeners",{});G(this,"escposRetryDelays",[250,500,1e3]);G(this,"metrics",{jobsProcessed:0,jobsFailed:0,escposRetries:0,avgLatencyMs:0,batchCount:0,queuedPeak:0});G(this,"batchWindowMs",50);G(this,"batchBuffer",[]);G(this,"batchTimer",null);G(this,"moneyFmt",hb());this.invoice=t.invoice,this.kitchen=t.kitchen,this.escpos=t.escpos,t.fallbackWindow===!1&&(this.fallbackWindow=!1);try{const a=localStorage.getItem("print_pref");(a==="escpos"||a==="window"||a==="auto")&&(this.preferredMode=a)}catch{}try{const a=localStorage.getItem("print_fallback_window");a!==null&&(this.fallbackWindow=JSON.parse(a))}catch{}}enqueue(t){const a={...t,id:++this.idSeq,attempts:t.attempts||0,enqueuedAt:performance.now()};return this.queue.push(a),this.queue.length>this.metrics.queuedPeak&&(this.metrics.queuedPeak=this.queue.length),this.emit("queue",{size:this.queue.length}),this.run(),"pj_"+a.id}async run(){var t;if(!this.processing){for(this.processing=!0,this.emit("processing",!0);this.queue.length;){const a=this.queue.shift(),n=performance.now();await this.execute(a).catch(r=>{B.error("Print job failed",{error:String(r)}),this.metrics.jobsFailed++});const l=performance.now()-n,i=this.metrics.jobsProcessed+1;this.metrics.avgLatencyMs=(this.metrics.avgLatencyMs*this.metrics.jobsProcessed+l)/i,this.metrics.jobsProcessed=i,(t=a.onDone)==null||t.call(a),this.emit("queue",{size:this.queue.length}),this.emit("metrics",this.metrics)}this.processing=!1,this.emit("processing",!1)}}async execute(t){var l,i,r,c,o,u,f,m,d,h,b,j,S,g;const{order:a,kind:n}=t;if(B.info("Executing print job",{jobKind:n,preferredMode:this.preferredMode,fallbackWindow:this.fallbackWindow,escposAvailable:!!this.escpos}),this.preferredMode==="window"){B.info("Preferred mode is window, using direct fallback"),(n==="invoice"||n==="both")&&(this.fallbackWindow?(B.info("Using window for invoice"),this.windowInvoice(a),(l=t.markPrinted)==null||l.call(t,"invoice")):B.warn("Window mode selected but fallback disabled")),(n==="kitchen"||n==="both")&&(i=this.kitchen)!=null&&i.openTicket&&(B.info("Using kitchen printer"),this.kitchen.openTicket(a),(r=t.markPrinted)==null||r.call(t,"kitchen"));return}if(this.preferredMode==="escpos"){if(this.escpos){B.info("ESC/POS mode: using ESC/POS printer only (strict mode)");try{(n==="invoice"||n==="both")&&(await this.tryEscposStrict(async()=>this.escpos.printOrder(a,{}),t),(c=t.markPrinted)==null||c.call(t,"invoice")),(n==="kitchen"||n==="both")&&(await this.tryEscposStrict(async()=>this.escpos.printKitchen(a,{}),t),(o=t.markPrinted)==null||o.call(t,"kitchen"))}catch(p){if(this.fallbackWindow&&(n==="invoice"||n==="both"))B.info("ESC/POS mode: fallback window enabled, using window after ESC/POS failure"),this.windowInvoice(a),(u=t.markPrinted)==null||u.call(t,"invoice");else if(n==="invoice"||n==="both")throw B.error("ESC/POS mode: strict mode failed and no fallback available for invoices"),p;if((n==="kitchen"||n==="both")&&((f=this.kitchen)!=null&&f.openTicket))B.info("ESC/POS mode: using kitchen printer for kitchen orders"),this.kitchen.openTicket(a),(m=t.markPrinted)==null||m.call(t,"kitchen");else if(n==="kitchen")throw B.error("ESC/POS mode: no kitchen printer available"),p}}else throw B.error("ESC/POS mode selected but no ESC/POS printer available"),new Error("ESC/POS printer not available");return}if(this.preferredMode==="auto"){if(B.info("Auto mode: trying intelligent fallback sequence"),this.escpos){B.info("Auto mode: trying ESC/POS first");try{(n==="invoice"||n==="both")&&(await this.tryEscpos(async()=>this.escpos.printOrder(a,{}),t),(d=t.markPrinted)==null||d.call(t,"invoice")),(n==="kitchen"||n==="both")&&(await this.tryEscpos(async()=>this.escpos.printKitchen(a,{}),t),(h=t.markPrinted)==null||h.call(t,"kitchen"));return}catch{B.info("Auto mode: ESC/POS failed, trying dedicated printers")}}B.info("Auto mode: using dedicated adapters"),(n==="invoice"||n==="both")&&((b=this.invoice)!=null&&b.openInvoice?(B.info("Auto mode: using dedicated invoice printer"),this.invoice.openInvoice(a,()=>{var p;return(p=t.markPrinted)==null?void 0:p.call(t,"invoice")})):this.fallbackWindow?(B.info("Auto mode: using window fallback"),this.windowInvoice(a),(j=t.markPrinted)==null||j.call(t,"invoice")):B.warn("Auto mode: no invoice options available")),(n==="kitchen"||n==="both")&&((S=this.kitchen)!=null&&S.openTicket?(B.info("Auto mode: using kitchen printer"),this.kitchen.openTicket(a),(g=t.markPrinted)==null||g.call(t,"kitchen")):B.warn("Auto mode: no kitchen printer available"));return}B.error("Unexpected execution path in printing service",{preferredMode:this.preferredMode})}printInvoice(t,a){return this.enqueue({kind:"invoice",order:t,markPrinted:a})}printKitchen(t,a){return this.enqueue({kind:"kitchen",order:t,markPrinted:a})}printBoth(t,a){return this.enqueue({kind:"both",order:t,markPrinted:a})}windowInvoice(t){const a=(t.lines||[]).map(m=>`<tr><td>${m.qty} x ${m.name}</td><td style="text-align:right">${this.moneyFmt(m.lineTotal)}</td></tr>`).join(""),n=(t.lines||[]).reduce((m,d)=>m+(d.lineTotal||0),0),l=t.taxTotal||0,i=this.moneyFmt(t.total||0),r=this.moneyFmt(n),c=this.moneyFmt(l);let o="";if(t.taxLines&&t.taxLines.length>0){const m=new Map;t.taxLines.forEach(h=>{const b=m.get(h.code);b?b.amount+=h.amount:m.set(h.code,{...h})}),o=Array.from(m.values()).map(h=>`<tr><td style="padding-left: 10px;">${h.name||h.code} (${(h.rate*100).toFixed(1)}%)</td><td style="text-align:right">+${this.moneyFmt(h.amount)}</td></tr>`).join("")}const u=`<html><head><title>Factura ${t.id}</title><style>
      body{font-family: 'Courier New', monospace; margin: 12px; font-size: 14px;}
      .header {text-align: center; border-bottom: 2px solid #000; padding-bottom: 8px; margin-bottom: 12px;}
      .business-name {font-size: 18px; font-weight: bold; margin: 0;}
      .business-info {font-size: 12px; margin: 2px 0;}
      table{width:100%; font-size: 13px; border-collapse:collapse; margin: 8px 0;}
      .invoice-info {margin-bottom: 12px; font-size: 12px;}
      .items-table td{padding: 3px 0; border-bottom: 1px dotted #ccc;}
      .items-header td{border-bottom: 1px solid #000; font-weight: bold; padding: 4px 0;}
      .subtotal-section {border-top: 1px solid #000; margin-top: 8px;}
      .subtotal-section td{padding: 2px 0;}
      .tax-line {font-size: 12px; color: #666;}
      .total-line {border-top: 2px solid #000; font-weight: bold; font-size: 15px;}
      .footer {text-align: center; margin-top: 20px; font-size: 11px; color: #666;}
      .customer-info {margin: 8px 0; font-size: 12px; border: 1px solid #ddd; padding: 6px;}
    </style></head><body>
    
    <div class="header">
      <div class="business-name">Pizzería del Barrio</div>
      <div class="business-info">Sistema POS - Factura de Venta</div>
    </div>
    
    <div class="invoice-info">
      <strong>Factura:</strong> ${t.id}<br>
      <strong>Fecha:</strong> ${new Date(t.createdAt).toLocaleString("es-AR")}<br>
      ${t.customerName?`<strong>Cliente:</strong> ${t.customerName}<br>`:""}
      ${t.customerPhone?`<strong>Teléfono:</strong> ${t.customerPhone}<br>`:""}
    </div>
    
    ${t.customer?`
    <div class="customer-info">
      <strong>📞 ${t.customer.phone||t.customerPhone||""}</strong><br>
      ${t.customer.name||t.customerName||""}<br>
      ${t.customer.address||""} ${t.customer.barrio?`- ${t.customer.barrio}`:""}
    </div>
    `:""}
    
    <table class="items-table">
      <tr class="items-header">
        <td><strong>Descripción</strong></td>
        <td style="text-align:right"><strong>Importe</strong></td>
      </tr>
      ${a}
    </table>
    
    <table class="subtotal-section">
      <tr>
        <td><strong>Subtotal</strong></td>
        <td style="text-align:right"><strong>${r}</strong></td>
      </tr>
      ${o}
      ${l>0?`
      <tr>
        <td><strong>Total Impuestos</strong></td>
        <td style="text-align:right"><strong>${c}</strong></td>
      </tr>
      `:""}
      <tr class="total-line">
        <td><strong>TOTAL A PAGAR</strong></td>
        <td style="text-align:right"><strong>${i}</strong></td>
      </tr>
    </table>
    
    ${t.payments&&t.payments.length>0?`
    <table style="margin-top: 12px;">
      <tr><td colspan="2"><strong>Forma de Pago:</strong></td></tr>
      ${t.payments.map(m=>`<tr><td>${m.method}</td><td style="text-align:right">${this.moneyFmt(m.amount)}</td></tr>`).join("")}
    </table>
    `:""}
    
    <div class="footer">
      <p>¡Gracias por su compra!</p>
      <p>POS Sistema - ${new Date().getFullYear()}</p>
    </div>
    
    </body></html>`,f=window.open("","_blank","width=480,height=640,scrollbars=yes");f&&(f.document.write(u),f.document.close(),setTimeout(()=>f.print(),300))}setPreferredMode(t){this.preferredMode=t;try{localStorage.setItem("print_pref",t)}catch{}this.emit("mode",t)}getPreferredMode(){return this.preferredMode}setFallbackWindow(t){this.fallbackWindow=t;try{localStorage.setItem("print_fallback_window",JSON.stringify(t))}catch{}this.emit("fallback",t)}getFallbackWindow(){return this.fallbackWindow}getMetrics(){return{...this.metrics}}cancelJob(t){const a=parseInt(t.replace("pj_",""),10),n=this.queue.findIndex(i=>i.id===a);if(n>=0)return this.queue.splice(n,1),this.emit("queue",{size:this.queue.length}),!0;const l=this.batchBuffer.findIndex(i=>i.id===a);return l>=0?(this.batchBuffer.splice(l,1),!0):!1}cancelAll(){const t=this.queue.length+this.batchBuffer.length;return this.queue.length=0,this.batchBuffer.length=0,this.batchTimer&&(clearTimeout(this.batchTimer),this.batchTimer=null),this.emit("queue",{size:0}),t}on(t,a){var n;((n=this.listeners)[t]||(n[t]=[])).push(a)}off(t,a){this.listeners[t]=(this.listeners[t]||[]).filter(n=>n!==a)}emit(t,a){(this.listeners[t]||[]).forEach(n=>{try{n(a)}catch(l){B.error("Listener error",{evt:t,error:String(l)})}})}async tryEscpos(t,a){try{await t()}catch(n){a.attempts==null&&(a.attempts=0);const l=a.attempts++;if(l<this.escposRetryDelays.length){const i=this.escposRetryDelays[l];return B.warn("EscPos retry",{delay:i,attempt:l}),this.metrics.escposRetries++,await new Promise(r=>setTimeout(r,i)),this.tryEscpos(t,a)}if(B.error("EscPos failed after retries",{error:String(n),preferredMode:this.preferredMode,fallbackWindow:this.fallbackWindow}),this.fallbackWindow){B.info("Using fallback window after ESC/POS failure"),this.windowInvoice(a.order);return}throw new Error(`ESC/POS printing failed: ${String(n)}`)}}async tryEscposStrict(t,a){try{await t()}catch(n){a.attempts==null&&(a.attempts=0);const l=a.attempts++;if(l<this.escposRetryDelays.length){const i=this.escposRetryDelays[l];return B.warn("EscPos retry (strict mode)",{delay:i,attempt:l}),this.metrics.escposRetries++,await new Promise(r=>setTimeout(r,i)),this.tryEscposStrict(t,a)}throw B.error("EscPos failed after retries (strict mode)",{error:String(n),preferredMode:this.preferredMode,fallbackWindow:this.fallbackWindow}),new Error(`ESC/POS printing failed (strict mode): ${String(n)}`)}}}const Hn={printer:{preferredMode:"auto",fallbackWindow:!0},ui:{drawerAutoClose:!0,theme:"light"},pos:{autoSave:!0,taxRate:.21,currency:"ARS"}};class gb{constructor(){G(this,"config");G(this,"listeners",{});G(this,"storageKey","pos_system_config");this.config=this.loadConfig()}loadConfig(){try{const t=localStorage.getItem(this.storageKey);if(t){const a=JSON.parse(t);return this.mergeConfig(Hn,a)}}catch(t){B.warn("Error loading system configuration:",t)}return{...Hn}}mergeConfig(t,a){return{printer:{...t.printer,...a.printer},ui:{...t.ui,...a.ui},pos:{...t.pos,...a.pos}}}saveConfig(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.config)),this.notifyListeners(),B.info("Configuration saved")}catch(t){throw B.error("Error saving configuration:",t),t}}getConfig(){return{...this.config}}getPrinterConfig(){return{...this.config.printer}}getUIConfig(){return{...this.config.ui}}getPOSConfig(){return{...this.config.pos}}updatePrinterConfig(t){this.config.printer={...this.config.printer,...t},this.saveConfig()}updateUIConfig(t){this.config.ui={...this.config.ui,...t},this.saveConfig()}updatePOSConfig(t){this.config.pos={...this.config.pos,...t},this.saveConfig()}updateConfig(t){t.printer&&(this.config.printer={...this.config.printer,...t.printer}),t.ui&&(this.config.ui={...this.config.ui,...t.ui}),t.pos&&(this.config.pos={...this.config.pos,...t.pos}),this.saveConfig()}resetToDefaults(){this.config={...Hn},this.saveConfig()}resetPrinterConfig(){this.config.printer={...Hn.printer},this.saveConfig()}onChange(t){const a="change";this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(t)}offChange(t){const a="change";this.listeners[a]&&(this.listeners[a]=this.listeners[a].filter(n=>n!==t))}notifyListeners(){(this.listeners.change||[]).forEach(a=>{try{a(this.config)}catch(n){B.error("Error in configuration change listener:",n)}})}exportConfig(){return JSON.stringify(this.config,null,2)}importConfig(t){try{const a=JSON.parse(t);this.config=this.mergeConfig(Hn,a),this.saveConfig()}catch(a){throw B.error("Error importing configuration:",a),new Error("Invalid configuration format")}}validateConfig(t){try{if(!t||typeof t!="object")return!1;if(t.printer){const a=["auto","escpos","window"];if(t.printer.preferredMode&&!a.includes(t.printer.preferredMode))return!1}if(t.ui){const a=["light","dark","auto"];if(t.ui.theme&&!a.includes(t.ui.theme))return!1}if(t.pos){const a=["ARS","USD","EUR"];if(t.pos.currency&&!a.includes(t.pos.currency)||t.pos.taxRate!==void 0&&(t.pos.taxRate<0||t.pos.taxRate>1))return!1}return!0}catch{return!1}}}class yb{constructor(t){this.taxRepo=t}async getAllTaxes(){return await this.taxRepo.all()}async getActiveTaxes(){return await this.taxRepo.allActive()}async createTax(t){const a=`tax_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n={...t,id:a,rate:t.rate/100};return B.info("Creating tax",{tax:n}),await this.taxRepo.create(n)}async updateTax(t,a){return a.rate!==void 0&&(a.rate=a.rate/100),B.info("Updating tax",{id:t,updates:a}),await this.taxRepo.update(t,a)}async deleteTax(t){B.info("Deactivating tax",{id:t}),await this.taxRepo.update(t,{active:!1})}async permanentlyDeleteTax(t){B.info("Permanently deleting tax",{id:t}),await this.taxRepo.delete(t)}calculateLineTaxes(t,a,n){return n.filter(i=>i.active&&i.scope==="line"&&(i.appliesToCategories.length===0||a&&i.appliesToCategories.includes(a))).map(i=>({code:i.code,name:i.name,base:t,rate:i.rate,amount:t*i.rate,scope:"line"}))}calculateGlobalTaxes(t,a){return a.filter(l=>l.active&&l.scope==="global").map(l=>({code:l.code,name:l.name,base:t,rate:l.rate,amount:t*l.rate,scope:"global"}))}calculateOrderTaxes(t,a){const n=[];t.forEach(c=>{const o=this.calculateLineTaxes(c.total,c.categoryId,a);n.push(...o)});const l=t.reduce((c,o)=>c+o.total,0),i=this.calculateGlobalTaxes(l,a),r=[...n,...i].reduce((c,o)=>c+o.amount,0);return B.debug("Tax calculation complete",{subtotal:l,lineTaxesCount:n.length,globalTaxesCount:i.length,totalTax:r}),{lineTaxes:n,globalTaxes:i,totalTax:r}}async createDefaultTaxes(){const t=[{code:"IVA21",name:"IVA 21%",rate:21,scope:"line",appliesToCategories:[],active:!0},{code:"IVA105",name:"IVA 10.5%",rate:10.5,scope:"line",appliesToCategories:[],active:!0},{code:"EXENTO",name:"Exento",rate:0,scope:"line",appliesToCategories:[],active:!0}];for(const a of t)(await this.taxRepo.all()).find(l=>l.code===a.code)||await this.createTax(a);B.info("Default taxes created")}}class vb{constructor(t,a,n,l){this.wasteRepo=t,this.ingredientRepo=a,this.audit=n,this.auth=l}async reportWaste({ingredientId:t,qty:a,reason:n,branchId:l}){if(a<=0)throw new Error("La cantidad de merma debe ser > 0");const i={id:An("w_"),ingredientId:t,qty:a,reason:n||"",branchId:l||"",reportedBy:this.auth.getUsername(),timestamp:sn()};await this.wasteRepo.col.insert(i);const r=await this.ingredientRepo.col.findOne(t).exec();if(r){const c=r.get("current")||0;await r.incrementalPatch({current:c-a})}return await this.audit.log("WASTE_REPORTED",{ingredientId:t,qty:a,reason:n}),i}}class xb{constructor(t,a,n){this.repo=t,this.auth=a,this.audit=n}async recordExperiment({productId:t,base:a,scenarios:n,modelVersion:l="v1",tags:i=[],notes:r=""}){var u;const c={productId:t,base:a,scenarios:n,modelVersion:l,tags:i,notes:r,user:(u=this.auth)!=null&&u.getUsername?this.auth.getUsername():"system"},o=await this.repo.create(c);return await this.audit.log("PRICE_EXPERIMENT_CREATE",{productId:t,id:o.id}),o}async listRecent(t=50){return this.repo.recent(t)}}class bb{openTicket(t){const a=this.buildHTML(t),n=window.open("","_blank","width=420,height=600");if(!n){alert("Permitir popups para imprimir.");return}n.document.write(a),n.document.close(),n.focus(),setTimeout(()=>n.print(),200)}buildHTML(t){const a=t.lines.map(n=>`
      <tr>
        <td>${n.qty}</td>
        <td>${n.name}</td>
        <td>${n.category||""}</td>
      </tr>
    `).join("");return`
<!DOCTYPE html>
<html><head><meta charset='utf-8'/>
<title>Comanda ${t.id}</title>
<style>
body { font-family: monospace; padding:8px; }
h2 { margin:0 0 4px; text-align:center; }
table { width:100%; border-collapse:collapse; }
td,th { border-bottom:1px solid #000; padding:4px; font-size:12px; }
th { background:#000; color:#fff; }
</style>
</head>
<body>
<h2>COMANDA COCINA</h2>
<div>ID: ${t.id}<br>Fecha: ${new Date(t.createdAt).toLocaleString()}</div>
<table>
<thead><tr><th>Cant</th><th>Producto</th><th>Cat</th></tr></thead>
<tbody>${a}</tbody>
</table>
</body></html>`}}const Sb="\x1B";class jb{constructor(t={}){G(this,"device",null);G(this,"endpointOut",null);G(this,"gatewayUrl");G(this,"useWebUSB");this.gatewayUrl=t.gatewayUrl||null,this.useWebUSB=t.useWebUSB!==!1}async connectWebUSB(){if(!("usb"in navigator))throw new Error("WebUSB no soportado");this.device=await navigator.usb.requestDevice({filters:[{vendorId:1208},{vendorId:1110},{vendorId:1659}]}),await this.device.open(),this.device.configuration==null&&await this.device.selectConfiguration(1);const t=this.device.configuration.interfaces.find(l=>l.alternates.some(i=>i.interfaceClass===7))||this.device.configuration.interfaces[0];await this.device.claimInterface(t.interfaceNumber);const n=t.alternates[0].endpoints.find(l=>l.direction==="out");if(!n)throw new Error("No endpoint OUT");this.endpointOut=n.endpointNumber}async printOrder(t,{headerTitle:a="Pizzeria del Barrio",cut:n=!0}={}){const l=[];l.push(this.center(a.toUpperCase())),l.push(this.center("COMPROBANTE")),l.push(this.line()),l.push(`ID: ${t.id}`),l.push(`Fecha: ${new Date(t.createdAt).toLocaleString()}`),t.customerPhone&&l.push(`Cliente: ${t.customerName||""} (${t.customerPhone})`),l.push(this.line()),l.push("Cant  Descripción                Importe"),l.push(this.line()),(t.lines||[]).forEach(r=>{const c=String(r.qty).padEnd(4," "),o=this.padRight(r.name,24),u=this.alignRight(Number(r.lineTotal).toFixed(2),8);l.push(`${c} ${o}${u}`)}),l.push(this.line()),l.push(this.rowKV("TOTAL",this.money(t.total||t.grandTotal))),l.push(this.center("Gracias por su compra")),l.push(`
`);let i=this.encodeText(l.join(`
`));n&&(i=this.concatBuffers(i,this.cut())),await this.send(i)}async printKitchen(t,{headerTitle:a="COMANDA COCINA",cut:n=!0}={}){const l=[];l.push(this.center(a)),l.push(this.line()),l.push(`ID: ${t.id}`),l.push(`Fecha: ${new Date(t.createdAt).toLocaleTimeString()}`),l.push(this.line()),(t.lines||[]).forEach(r=>{l.push(`${r.qty}x ${r.name}`)}),l.push(this.center("--- FIN ---")),l.push(`
`);let i=this.encodeText(l.join(`
`));n&&(i=this.concatBuffers(i,this.cut())),await this.send(i)}async send(t){if(this.useWebUSB&&this.device&&this.endpointOut!=null)await this.device.transferOut(this.endpointOut,t);else if(this.gatewayUrl){const a=btoa(String.fromCharCode(...new Uint8Array(t)));await fetch(this.gatewayUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:a})})}else{const a="No hay destino de impresión configurado.";throw console.warn(a),new Error(a)}}encodeText(t){return new TextEncoder().encode(t)}concatBuffers(t,a){const n=new Uint8Array(t.length+a.length);return n.set(t,0),n.set(a,t.length),n}cut(){return new Uint8Array([Sb.charCodeAt(0),105])}line(){return"-".repeat(40)}center(t){if(t.length>=40)return t;const n=Math.floor((40-t.length)/2);return" ".repeat(n)+t}padRight(t,a){return t.length>=a?t.slice(0,a):t+" ".repeat(a-t.length)}alignRight(t,a){return t.length>=a?t.slice(0,a):" ".repeat(a-t.length)+t}rowKV(t,a){const l=40-(t.length+a.length);return t+(l>0?" ".repeat(l):"")+a}money(t){return"$"+Number(t||0).toFixed(2)}}class Eb{constructor(t,a){this.baseUrl=t,this.tokenProvider=a}async _headers(){return{"Content-Type":"application/json",Authorization:"Bearer "+await this.tokenProvider()}}async pull(){const t=await fetch(this.baseUrl+"/api/pull",{headers:await this._headers()});if(!t.ok)throw new Error("Pull failed");return t.json()}async push(t){const a=await fetch(this.baseUrl+"/api/push",{method:"POST",headers:await this._headers(),body:JSON.stringify(t)});if(!a.ok)throw new Error("Push failed");return a.json()}}const Nb=[{id:"r_owner",name:"OWNER",description:"Dueño / visión estratégica",permissions:["*"]},{id:"r_admin",name:"ADMIN",description:"Control total operativo",permissions:["*"]},{id:"r_cajero",name:"CAJERO",description:"Opera caja",permissions:["PRODUCT_VIEW","SALE_CREATE","INVOICE_PRINT","KITCHEN_PRINT","SALE_VIEW","CUSTOMER_VIEW","CUSTOMER_EDIT","TIP_CONFIG"]},{id:"r_supervisor",name:"SUPERVISOR",description:"Supervisa y controla",permissions:["PRODUCT_VIEW","SALE_VIEW","SALE_CANCEL","INVOICE_PRINT","KITCHEN_PRINT","REPORT_VIEW","SALE_FULFILL","CUSTOMER_VIEW"]},{id:"r_visor",name:"VISOR",description:"Solo consulta",permissions:["PRODUCT_VIEW","SALE_VIEW","REPORT_VIEW","CUSTOMER_VIEW"]}],Tb=["PRODUCT_VIEW","PRODUCT_CREATE","PRODUCT_EDIT","PRODUCT_DELETE","SALE_CREATE","SALE_VIEW","SALE_CANCEL","SALE_FULFILL","INVOICE_PRINT","KITCHEN_PRINT","USER_VIEW","USER_CREATE","USER_EDIT","USER_PASSWORD_RESET","ROLE_VIEW","ROLE_EDIT","REPORT_VIEW","SYNC_RUN","AUDIT_VIEW","CUSTOMER_VIEW","CUSTOMER_EDIT","TAX_VIEW","TAX_EDIT","SUPPLIER_VIEW","SUPPLIER_EDIT","PURCHASE_VIEW","PURCHASE_CREATE","INVENTORY_VIEW","INVENTORY_ADJUST","ANALYTICS_VIEW","TIP_CONFIG","COST_VIEW"];async function Cb(){console.log("[Bootstrap] Iniciando creación del entorno...");try{const e=await Qx();console.log("[Bootstrap] Base de datos inicializada correctamente");const t={products:new Zx(e),customers:new Ix(e),orders:new Kx(e),users:new $x(e),roles:new Jx(e),audit:new Wx(e),queue:new Fx(e),taxes:new eb(e),promotions:new tb(e),priceExperiments:new ab(e),ingredients:e.ingredients?{col:e.ingredients}:null,waste:e.waste?{col:e.waste}:null};console.log("[Bootstrap] Repositorios creados"),await wb(e),console.log("[Bootstrap] Datos críticos cargados"),setTimeout(()=>_b(e),100),console.log("[Bootstrap] Seeding opcional programado en background");const a={};a.audit=new cb(t.audit),console.log("[Bootstrap] Servicio de auditoría creado"),a.config=new gb,console.log("[Bootstrap] Servicio de configuración creado"),a.tax=new yb(t.taxes),await a.tax.createDefaultTaxes(),console.log("[Bootstrap] Servicio de impuestos creado"),a.auth=new rb(t.users,t.roles,a.audit,{durationMinutes:90}),await a.auth.initialize(),console.log("[Bootstrap] Servicio de autenticación inicializado"),a.cart=new nb,a.cart.setTaxService(a.tax),a.pricing=new mb;const n=a.config.getPrinterConfig();return console.log("[Bootstrap] Configuración de impresora:",n),a.printing=new pb({fallbackWindow:n.fallbackWindow,kitchen:new bb,escpos:new jb}),a.printing.setPreferredMode&&a.printing.setPreferredMode(n.preferredMode),a.printing.setFallbackWindow&&a.printing.setFallbackWindow(n.fallbackWindow),console.log("[Bootstrap] PrintingService inicializado - modo:",a.printing.getPreferredMode(),"fallback:",a.printing.getFallbackWindow()),console.log("[Bootstrap] Servicios de carrito, pricing y printing creados"),a.orders=new sb(t.orders,a.cart,a.audit,a.auth,t.queue,a.pricing),a.orders.orderRepository=t.orders,a.roles=new ob(t.roles,a.audit),a.users=new ub(t.users,a.auth,a.audit),a.reports=new db(t.orders),a.sync=new fb(new Eb("https://example-sync-server.test",async()=>"demo-token"),t.orders,t.products,t.users,a.audit,t.queue),t.waste&&t.ingredients&&(a.waste=new vb(t.waste,t.ingredients,a.audit,a.auth)),t.priceExperiments&&(a.priceExperiments=new xb(t.priceExperiments,a.auth,a.audit)),console.log("[Bootstrap] Todos los servicios creados exitosamente"),{db:e,repos:t,services:a}}catch(e){throw console.error("[Bootstrap] Error en createAppEnvironment:",e),e}}async function wb(e){var t,a;try{if(console.log("[SEED-CRITICAL] Iniciando datos críticos..."),localStorage.setItem("all_perms_cache",JSON.stringify(Tb)),!((t=e.collections)!=null&&t.roles)){console.error("[SEED-CRITICAL] Colección roles no inicializada");return}if((await e.roles.find().exec()).length===0){console.log("[SEED-CRITICAL] Creando roles por defecto...");for(const l of Nb)try{await e.roles.insert({id:l.id,name:l.name,permissions:l.permissions})}catch(i){i.code!=="RXDB_DUPE"&&console.warn("[SEED-CRITICAL] Error insertando rol:",i)}console.log("[SEED-CRITICAL] Roles creados exitosamente")}if((a=e.collections)!=null&&a.users&&await e.users.count().exec()===0){console.log("[SEED-CRITICAL] Creando usuarios de prueba...");try{const i=async o=>{const u=new TextEncoder().encode(o),f=await crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(f)).map(m=>m.toString(16).padStart(2,"0")).join("")},r=await i("admin123"),c=await i("caja123");await e.users.insert({id:"u_admin",username:"admin",passwordHash:r,name:"Administrador",roleId:"r_admin",active:!0,createdAt:new Date().toISOString()}),await e.users.insert({id:"u_caja",username:"caja",passwordHash:c,name:"Cajero",roleId:"r_cajero",active:!0,createdAt:new Date().toISOString()}),console.log("[SEED-CRITICAL] Usuarios de prueba creados: admin/admin123, caja/caja123")}catch(i){i.code!=="RXDB_DUPE"&&console.warn("[SEED-CRITICAL] Error creando usuarios:",i)}}}catch(n){console.error("[SEED-CRITICAL] Error en seeding crítico:",n)}}async function _b(e){var t;try{if(console.log("[SEED-OPTIONAL] Iniciando datos opcionales..."),(t=e.collections)!=null&&t.products&&(await e.products.find().exec()).length===0){console.log("[SEED-OPTIONAL] Creando productos de ejemplo...");const n=[{id:"pizza-margherita",name:"Pizza Margherita",basePrice:1200,category:"Pizzas",active:!0,createdAt:new Date().toISOString()},{id:"pizza-pepperoni",name:"Pizza Pepperoni",basePrice:1400,category:"Pizzas",active:!0,createdAt:new Date().toISOString()},{id:"pizza-hawaiana",name:"Pizza Hawaiana",basePrice:1500,category:"Pizzas",active:!0,createdAt:new Date().toISOString()},{id:"empanada-carne",name:"Empanada de Carne",basePrice:300,category:"Empanadas",active:!0,createdAt:new Date().toISOString()},{id:"empanada-pollo",name:"Empanada de Pollo",basePrice:300,category:"Empanadas",active:!0,createdAt:new Date().toISOString()},{id:"gaseosa-cola",name:"Gaseosa Cola 500ml",basePrice:400,category:"Bebidas",active:!0,createdAt:new Date().toISOString()},{id:"agua-mineral",name:"Agua Mineral 500ml",basePrice:250,category:"Bebidas",active:!0,createdAt:new Date().toISOString()},{id:"pizza-cuatro-quesos",name:"Pizza Cuatro Quesos",basePrice:1600,category:"Pizzas",active:!0,createdAt:new Date().toISOString()}];for(const l of n)await e.products.insert(l);console.log("[SEED-OPTIONAL] Productos creados:",n.length)}}catch(a){console.error("[SEED-OPTIONAL] Error en seeding opcional:",a)}}function sr(e){console.log(`[BOOT] ${e} @ ${new Date().toISOString()}`)}function Pn(e,t){const a=document.getElementById("progress-fill"),n=document.querySelector(".initial-loader p");a&&(a.style.width=`${e}%`,a.style.animation="none"),t&&n&&(n.textContent=t)}function Ab(){document.body.classList.add("app-loaded"),setTimeout(()=>{const e=document.getElementById("initial-loader");e&&e.remove()},500)}(async()=>{try{sr("start"),Pn(10,"Iniciando sistema..."),Pn(25,"Inicializando base de datos...");const{services:e,repos:t,db:a}=await Cb();sr("env-created"),Pn(70,"Configurando servicios...");const n=document.getElementById("react-root");if(!n){console.error("Elemento #react-root no encontrado");return}Pn(90,"Cargando interfaz..."),hy.createRoot(n).render(s.jsx(Mh.StrictMode,{children:s.jsx(Bv,{value:{services:e,repos:t,rawState:{services:e,repos:t,db:a}},children:s.jsx(wv,{children:s.jsx(Cx,{})})})})),sr("render-complete"),Pn(100,"¡Listo!"),setTimeout(()=>{Ab()},300)}catch(e){const t=document.getElementById("react-root"),a=e instanceof Error?`${e.message}
${e.stack}`:String(e);console.error("[Bootstrap Error]",e),console.error("[Bootstrap Error Stack]",e instanceof Error?e.stack:"No stack trace");const n=`
      <div style="padding:20px;color:red;background:#ffe6e6;border:1px solid red;margin:20px;">
        <h3>Error de Inicialización</h3>
        <pre style="white-space:pre-wrap;font-size:11px;">${a.replace(/</g,"&lt;")}</pre>
      </div>
    `;t?t.innerHTML=n:document.body.insertAdjacentHTML("beforeend",n)}})();
//# sourceMappingURL=index-Cr-fKqWi.js.map
